var j0=t=>{throw TypeError(t)};var Zp=(t,e,n)=>e.has(t)||j0("Cannot "+n);var Q=(t,e,n)=>(Zp(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?j0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ce=(t,e,n,r)=>(Zp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Xe=(t,e,n)=>(Zp(t,e,"access private method"),n);var fd=(t,e,n,r)=>({set _(s){Ce(t,e,s,n)},get _(){return Q(t,e,r)}});function rP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R1={exports:{}},Cf={},j1={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),sP=Symbol.for("react.portal"),iP=Symbol.for("react.fragment"),oP=Symbol.for("react.strict_mode"),aP=Symbol.for("react.profiler"),lP=Symbol.for("react.provider"),cP=Symbol.for("react.context"),uP=Symbol.for("react.forward_ref"),dP=Symbol.for("react.suspense"),hP=Symbol.for("react.memo"),fP=Symbol.for("react.lazy"),P0=Symbol.iterator;function pP(t){return t===null||typeof t!="object"?null:(t=P0&&t[P0]||t["@@iterator"],typeof t=="function"?t:null)}var P1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D1=Object.assign,O1={};function kl(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||P1}kl.prototype.isReactComponent={};kl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function L1(){}L1.prototype=kl.prototype;function tv(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||P1}var nv=tv.prototype=new L1;nv.constructor=tv;D1(nv,kl.prototype);nv.isPureReactComponent=!0;var D0=Array.isArray,M1=Object.prototype.hasOwnProperty,rv={current:null},F1={key:!0,ref:!0,__self:!0,__source:!0};function V1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)M1.call(e,r)&&!F1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Cu,type:t,key:i,ref:o,props:s,_owner:rv.current}}function mP(t,e){return{$$typeof:Cu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cu}function gP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var O0=/\/+/g;function Jp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gP(""+t.key):e.toString(36)}function Qd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cu:case sP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Jp(o,0):r,D0(s)?(n="",t!=null&&(n=t.replace(O0,"$&/")+"/"),Qd(s,e,n,"",function(u){return u})):s!=null&&(sv(s)&&(s=mP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(O0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",D0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Jp(i,l);o+=Qd(i,e,n,c,s)}else if(c=pP(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Jp(i,l++),o+=Qd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function md(t,e,n){if(t==null)return t;var r=[],s=0;return Qd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function yP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},Yd={transition:null},vP={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Yd,ReactCurrentOwner:rv};function U1(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:md,forEach:function(t,e,n){md(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return md(t,function(){e++}),e},toArray:function(t){return md(t,function(e){return e})||[]},only:function(t){if(!sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=kl;He.Fragment=iP;He.Profiler=aP;He.PureComponent=tv;He.StrictMode=oP;He.Suspense=dP;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vP;He.act=U1;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)M1.call(e,c)&&!F1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Cu,type:t.type,key:s,ref:i,props:r,_owner:o}};He.createContext=function(t){return t={$$typeof:cP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lP,_context:t},t.Consumer=t};He.createElement=V1;He.createFactory=function(t){var e=V1.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:uP,render:t}};He.isValidElement=sv;He.lazy=function(t){return{$$typeof:fP,_payload:{_status:-1,_result:t},_init:yP}};He.memo=function(t,e){return{$$typeof:hP,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=Yd.transition;Yd.transition={};try{t()}finally{Yd.transition=e}};He.unstable_act=U1;He.useCallback=function(t,e){return An.current.useCallback(t,e)};He.useContext=function(t){return An.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return An.current.useDeferredValue(t)};He.useEffect=function(t,e){return An.current.useEffect(t,e)};He.useId=function(){return An.current.useId()};He.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return An.current.useMemo(t,e)};He.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};He.useRef=function(t){return An.current.useRef(t)};He.useState=function(t){return An.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return An.current.useTransition()};He.version="18.3.1";j1.exports=He;var E=j1.exports;const ti=ev(E),iv=rP({__proto__:null,default:ti},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=E,wP=Symbol.for("react.element"),_P=Symbol.for("react.fragment"),EP=Object.prototype.hasOwnProperty,bP=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TP={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)EP.call(e,r)&&!TP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wP,type:t,key:i,ref:o,props:s,_owner:bP.current}}Cf.Fragment=_P;Cf.jsx=z1;Cf.jsxs=z1;R1.exports=Cf;var a=R1.exports,B1={exports:{}},rr={},$1={exports:{}},W1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var J=U.length;U.push($);e:for(;0<J;){var B=J-1>>>1,K=U[B];if(0<s(K,$))U[B]=$,U[J]=K,J=B;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],J=U.pop();if(J!==$){U[0]=J;e:for(var B=0,K=U.length,ae=K>>>1;B<ae;){var ue=2*(B+1)-1,le=U[ue],Te=ue+1,ye=U[Te];if(0>s(le,J))Te<K&&0>s(ye,le)?(U[B]=ye,U[Te]=J,B=Te):(U[B]=le,U[ue]=J,B=ue);else if(Te<K&&0>s(ye,J))U[B]=ye,U[Te]=J,B=Te;else break e}}return $}function s(U,$){var J=U.sortIndex-$.sortIndex;return J!==0?J:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=U)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function N(U){if(m=!1,_(U),!y)if(n(c)!==null)y=!0,oe(C);else{var $=n(u);$!==null&&Y(N,$.startTime-U)}}function C(U,$){y=!1,m&&(m=!1,v(S),S=-1),g=!0;var J=p;try{for(_($),f=n(c);f!==null&&(!(f.expirationTime>$)||U&&!M());){var B=f.callback;if(typeof B=="function"){f.callback=null,p=f.priorityLevel;var K=B(f.expirationTime<=$);$=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(c)&&r(c),_($)}else r(c);f=n(c)}if(f!==null)var ae=!0;else{var ue=n(u);ue!==null&&Y(N,ue.startTime-$),ae=!1}return ae}finally{f=null,p=J,g=!1}}var L=!1,T=null,S=-1,P=5,k=-1;function M(){return!(t.unstable_now()-k<P)}function R(){if(T!==null){var U=t.unstable_now();k=U;var $=!0;try{$=T(!0,U)}finally{$?D():(L=!1,T=null)}}else L=!1}var D;if(typeof w=="function")D=function(){w(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=R,D=function(){q.postMessage(null)}}else D=function(){x(R,0)};function oe(U){T=U,L||(L=!0,D())}function Y(U,$){S=x(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,oe(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var J=p;p=$;try{return U()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=p;p=U;try{return $()}finally{p=J}},t.unstable_scheduleCallback=function(U,$,J){var B=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?B+J:B):J=B,U){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,U={id:h++,callback:$,priorityLevel:U,startTime:J,expirationTime:K,sortIndex:-1},J>B?(U.sortIndex=J,e(u,U),n(c)===null&&U===n(u)&&(m?(v(S),S=-1):m=!0,Y(N,J-B))):(U.sortIndex=K,e(c,U),y||g||(y=!0,oe(C))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var $=p;return function(){var J=p;p=$;try{return U.apply(this,arguments)}finally{p=J}}}})(W1);$1.exports=W1;var SP=$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP=E,nr=SP;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H1=new Set,zc={};function Xo(t,e){ul(t,e),ul(t+"Capture",e)}function ul(t,e){for(zc[t]=e,t=0;t<e.length;t++)H1.add(e[t])}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tg=Object.prototype.hasOwnProperty,NP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},M0={};function IP(t){return tg.call(M0,t)?!0:tg.call(L0,t)?!1:NP.test(t)?M0[t]=!0:(L0[t]=!0,!1)}function kP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AP(t,e,n,r){if(e===null||typeof e>"u"||kP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ov=/[\-:]([a-z])/g;function av(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ov,av);dn[e]=new Rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ov,av);dn[e]=new Rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ov,av);dn[e]=new Rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Rn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function lv(t,e,n,r){var s=dn.hasOwnProperty(e)?dn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AP(e,n,s,r)&&(n=null),r||s===null?IP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bs=CP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gd=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),cv=Symbol.for("react.strict_mode"),ng=Symbol.for("react.profiler"),q1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),sg=Symbol.for("react.suspense_list"),dv=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),G1=Symbol.for("react.offscreen"),F0=Symbol.iterator;function ec(t){return t===null||typeof t!="object"?null:(t=F0&&t[F0]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,em;function dc(t){if(em===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);em=e&&e[1]||""}return`
`+em+t}var tm=!1;function nm(t,e){if(!t||tm)return"";tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{tm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dc(t):""}function RP(t){switch(t.tag){case 5:return dc(t.type);case 16:return dc("Lazy");case 13:return dc("Suspense");case 19:return dc("SuspenseList");case 0:case 2:case 15:return t=nm(t.type,!1),t;case 11:return t=nm(t.type.render,!1),t;case 1:return t=nm(t.type,!0),t;default:return""}}function ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ea:return"Fragment";case _a:return"Portal";case ng:return"Profiler";case cv:return"StrictMode";case rg:return"Suspense";case sg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K1:return(t.displayName||"Context")+".Consumer";case q1:return(t._context.displayName||"Context")+".Provider";case uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dv:return e=t.displayName||null,e!==null?e:ig(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return ig(t(e))}catch{}}return null}function jP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(e);case 8:return e===cv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PP(t){var e=Q1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yd(t){t._valueTracker||(t._valueTracker=PP(t))}function Y1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function og(t,e){var n=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function V0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X1(t,e){e=e.checked,e!=null&&lv(t,"checked",e,!1)}function ag(t,e){X1(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lg(t,e.type,n):e.hasOwnProperty("defaultValue")&&lg(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lg(t,e,n){(e!=="number"||Th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hc=Array.isArray;function Oa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(hc(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function Z1(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function B0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function J1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ug(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?J1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vd,eT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vd=vd||document.createElement("div"),vd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DP=["Webkit","ms","Moz","O"];Object.keys(bc).forEach(function(t){DP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bc[e]=bc[t]})});function tT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bc.hasOwnProperty(t)&&bc[t]?(""+e).trim():e+"px"}function nT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var OP=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dg(t,e){if(e){if(OP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function hg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fg=null;function hv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pg=null,La=null,Ma=null;function $0(t){if(t=ku(t)){if(typeof pg!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Rf(e),pg(t.stateNode,t.type,e))}}function rT(t){La?Ma?Ma.push(t):Ma=[t]:La=t}function sT(){if(La){var t=La,e=Ma;if(Ma=La=null,$0(t),e)for(t=0;t<e.length;t++)$0(e[t])}}function iT(t,e){return t(e)}function oT(){}var rm=!1;function aT(t,e,n){if(rm)return t(e,n);rm=!0;try{return iT(t,e,n)}finally{rm=!1,(La!==null||Ma!==null)&&(oT(),sT())}}function $c(t,e){var n=t.stateNode;if(n===null)return null;var r=Rf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var mg=!1;if(js)try{var tc={};Object.defineProperty(tc,"passive",{get:function(){mg=!0}}),window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{mg=!1}function LP(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Tc=!1,Sh=null,Ch=!1,gg=null,MP={onError:function(t){Tc=!0,Sh=t}};function FP(t,e,n,r,s,i,o,l,c){Tc=!1,Sh=null,LP.apply(MP,arguments)}function VP(t,e,n,r,s,i,o,l,c){if(FP.apply(this,arguments),Tc){if(Tc){var u=Sh;Tc=!1,Sh=null}else throw Error(fe(198));Ch||(Ch=!0,gg=u)}}function Zo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W0(t){if(Zo(t)!==t)throw Error(fe(188))}function UP(t){var e=t.alternate;if(!e){if(e=Zo(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return W0(s),t;if(i===r)return W0(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function cT(t){return t=UP(t),t!==null?uT(t):null}function uT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uT(t);if(e!==null)return e;t=t.sibling}return null}var dT=nr.unstable_scheduleCallback,H0=nr.unstable_cancelCallback,zP=nr.unstable_shouldYield,BP=nr.unstable_requestPaint,Mt=nr.unstable_now,$P=nr.unstable_getCurrentPriorityLevel,fv=nr.unstable_ImmediatePriority,hT=nr.unstable_UserBlockingPriority,Nh=nr.unstable_NormalPriority,WP=nr.unstable_LowPriority,fT=nr.unstable_IdlePriority,Nf=null,Xr=null;function HP(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Nf,t,void 0,(t.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:GP,qP=Math.log,KP=Math.LN2;function GP(t){return t>>>=0,t===0?32:31-(qP(t)/KP|0)|0}var xd=64,wd=4194304;function fc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=fc(l):(i&=o,i!==0&&(r=fc(i)))}else o=n&~s,o!==0?r=fc(o):i!==0&&(r=fc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rr(e),s=1<<n,r|=t[n],e&=~s;return r}function QP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Rr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=QP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pT(){var t=xd;return xd<<=1,!(xd&4194240)&&(xd=64),t}function sm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rr(e),t[e]=n}function XP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Rr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var at=0;function mT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gT,mv,yT,vT,xT,vg=!1,_d=[],bi=null,Ti=null,Si=null,Wc=new Map,Hc=new Map,oi=[],ZP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q0(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(e.pointerId)}}function nc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ku(e),e!==null&&mv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JP(t,e,n,r,s){switch(e){case"focusin":return bi=nc(bi,t,e,n,r,s),!0;case"dragenter":return Ti=nc(Ti,t,e,n,r,s),!0;case"mouseover":return Si=nc(Si,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wc.set(i,nc(Wc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Hc.set(i,nc(Hc.get(i)||null,t,e,n,r,s)),!0}return!1}function wT(t){var e=mo(t.target);if(e!==null){var n=Zo(e);if(n!==null){if(e=n.tag,e===13){if(e=lT(n),e!==null){t.blockedOn=e,xT(t.priority,function(){yT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fg=r,n.target.dispatchEvent(r),fg=null}else return e=ku(n),e!==null&&mv(e),t.blockedOn=n,!1;e.shift()}return!0}function K0(t,e,n){Xd(t)&&n.delete(e)}function eD(){vg=!1,bi!==null&&Xd(bi)&&(bi=null),Ti!==null&&Xd(Ti)&&(Ti=null),Si!==null&&Xd(Si)&&(Si=null),Wc.forEach(K0),Hc.forEach(K0)}function rc(t,e){t.blockedOn===e&&(t.blockedOn=null,vg||(vg=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,eD)))}function qc(t){function e(s){return rc(s,t)}if(0<_d.length){rc(_d[0],t);for(var n=1;n<_d.length;n++){var r=_d[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&rc(bi,t),Ti!==null&&rc(Ti,t),Si!==null&&rc(Si,t),Wc.forEach(e),Hc.forEach(e),n=0;n<oi.length;n++)r=oi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)wT(n),n.blockedOn===null&&oi.shift()}var Fa=Bs.ReactCurrentBatchConfig,kh=!0;function tD(t,e,n,r){var s=at,i=Fa.transition;Fa.transition=null;try{at=1,gv(t,e,n,r)}finally{at=s,Fa.transition=i}}function nD(t,e,n,r){var s=at,i=Fa.transition;Fa.transition=null;try{at=4,gv(t,e,n,r)}finally{at=s,Fa.transition=i}}function gv(t,e,n,r){if(kh){var s=xg(t,e,n,r);if(s===null)pm(t,e,r,Ah,n),q0(t,r);else if(JP(s,t,e,n,r))r.stopPropagation();else if(q0(t,r),e&4&&-1<ZP.indexOf(t)){for(;s!==null;){var i=ku(s);if(i!==null&&gT(i),i=xg(t,e,n,r),i===null&&pm(t,e,r,Ah,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pm(t,e,r,null,n)}}var Ah=null;function xg(t,e,n,r){if(Ah=null,t=hv(r),t=mo(t),t!==null)if(e=Zo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ah=t,null}function _T(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($P()){case fv:return 1;case hT:return 4;case Nh:case WP:return 16;case fT:return 536870912;default:return 16}default:return 16}}var wi=null,yv=null,Zd=null;function ET(){if(Zd)return Zd;var t,e=yv,n=e.length,r,s="value"in wi?wi.value:wi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Zd=s.slice(t,1<r?1-r:void 0)}function Jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ed(){return!0}function G0(){return!1}function sr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ed:G0,this.isPropagationStopped=G0,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ed)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ed)},persist:function(){},isPersistent:Ed}),e}var Al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vv=sr(Al),Iu=Ct({},Al,{view:0,detail:0}),rD=sr(Iu),im,om,sc,If=Ct({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sc&&(sc&&t.type==="mousemove"?(im=t.screenX-sc.screenX,om=t.screenY-sc.screenY):om=im=0,sc=t),im)},movementY:function(t){return"movementY"in t?t.movementY:om}}),Q0=sr(If),sD=Ct({},If,{dataTransfer:0}),iD=sr(sD),oD=Ct({},Iu,{relatedTarget:0}),am=sr(oD),aD=Ct({},Al,{animationName:0,elapsedTime:0,pseudoElement:0}),lD=sr(aD),cD=Ct({},Al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uD=sr(cD),dD=Ct({},Al,{data:0}),Y0=sr(dD),hD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pD[t])?!!e[t]:!1}function xv(){return mD}var gD=Ct({},Iu,{key:function(t){if(t.key){var e=hD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(t){return t.type==="keypress"?Jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yD=sr(gD),vD=Ct({},If,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=sr(vD),xD=Ct({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),wD=sr(xD),_D=Ct({},Al,{propertyName:0,elapsedTime:0,pseudoElement:0}),ED=sr(_D),bD=Ct({},If,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TD=sr(bD),SD=[9,13,27,32],wv=js&&"CompositionEvent"in window,Sc=null;js&&"documentMode"in document&&(Sc=document.documentMode);var CD=js&&"TextEvent"in window&&!Sc,bT=js&&(!wv||Sc&&8<Sc&&11>=Sc),Z0=" ",J0=!1;function TT(t,e){switch(t){case"keyup":return SD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ST(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ba=!1;function ND(t,e){switch(t){case"compositionend":return ST(e);case"keypress":return e.which!==32?null:(J0=!0,Z0);case"textInput":return t=e.data,t===Z0&&J0?null:t;default:return null}}function ID(t,e){if(ba)return t==="compositionend"||!wv&&TT(t,e)?(t=ET(),Zd=yv=wi=null,ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bT&&e.locale!=="ko"?null:e.data;default:return null}}var kD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kD[t.type]:e==="textarea"}function CT(t,e,n,r){rT(r),e=Rh(e,"onChange"),0<e.length&&(n=new vv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cc=null,Kc=null;function AD(t){MT(t,0)}function kf(t){var e=Ca(t);if(Y1(e))return t}function RD(t,e){if(t==="change")return e}var NT=!1;if(js){var lm;if(js){var cm="oninput"in document;if(!cm){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),cm=typeof t_.oninput=="function"}lm=cm}else lm=!1;NT=lm&&(!document.documentMode||9<document.documentMode)}function n_(){Cc&&(Cc.detachEvent("onpropertychange",IT),Kc=Cc=null)}function IT(t){if(t.propertyName==="value"&&kf(Kc)){var e=[];CT(e,Kc,t,hv(t)),aT(AD,e)}}function jD(t,e,n){t==="focusin"?(n_(),Cc=e,Kc=n,Cc.attachEvent("onpropertychange",IT)):t==="focusout"&&n_()}function PD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kf(Kc)}function DD(t,e){if(t==="click")return kf(e)}function OD(t,e){if(t==="input"||t==="change")return kf(e)}function LD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dr=typeof Object.is=="function"?Object.is:LD;function Gc(t,e){if(Dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!tg.call(e,s)||!Dr(t[s],e[s]))return!1}return!0}function r_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s_(t,e){var n=r_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r_(n)}}function kT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AT(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Th(t.document)}return e}function _v(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MD(t){var e=AT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kT(n.ownerDocument.documentElement,n)){if(r!==null&&_v(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=s_(n,i);var o=s_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FD=js&&"documentMode"in document&&11>=document.documentMode,Ta=null,wg=null,Nc=null,_g=!1;function i_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_g||Ta==null||Ta!==Th(r)||(r=Ta,"selectionStart"in r&&_v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nc&&Gc(Nc,r)||(Nc=r,r=Rh(wg,"onSelect"),0<r.length&&(e=new vv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ta)))}function bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sa={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},um={},RT={};js&&(RT=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Af(t){if(um[t])return um[t];if(!Sa[t])return t;var e=Sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RT)return um[t]=e[n];return t}var jT=Af("animationend"),PT=Af("animationiteration"),DT=Af("animationstart"),OT=Af("transitionend"),LT=new Map,o_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){LT.set(t,e),Xo(e,[t])}for(var dm=0;dm<o_.length;dm++){var hm=o_[dm],VD=hm.toLowerCase(),UD=hm[0].toUpperCase()+hm.slice(1);Yi(VD,"on"+UD)}Yi(jT,"onAnimationEnd");Yi(PT,"onAnimationIteration");Yi(DT,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(OT,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);Xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function a_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VP(r,e,void 0,t),t.currentTarget=null}function MT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;a_(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;a_(s,l,u),i=c}}}if(Ch)throw t=gg,Ch=!1,gg=null,t}function wt(t,e){var n=e[Cg];n===void 0&&(n=e[Cg]=new Set);var r=t+"__bubble";n.has(r)||(FT(e,t,2,!1),n.add(r))}function fm(t,e,n){var r=0;e&&(r|=4),FT(n,t,r,e)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Qc(t){if(!t[Td]){t[Td]=!0,H1.forEach(function(n){n!=="selectionchange"&&(zD.has(n)||fm(n,!1,t),fm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Td]||(e[Td]=!0,fm("selectionchange",!1,e))}}function FT(t,e,n,r){switch(_T(e)){case 1:var s=tD;break;case 4:s=nD;break;default:s=gv}n=s.bind(null,e,n,t),s=void 0,!mg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=mo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}aT(function(){var u=i,h=hv(n),f=[];e:{var p=LT.get(t);if(p!==void 0){var g=vv,y=t;switch(t){case"keypress":if(Jd(n)===0)break e;case"keydown":case"keyup":g=yD;break;case"focusin":y="focus",g=am;break;case"focusout":y="blur",g=am;break;case"beforeblur":case"afterblur":g=am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=iD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wD;break;case jT:case PT:case DT:g=lD;break;case OT:g=ED;break;case"scroll":g=rD;break;case"wheel":g=TD;break;case"copy":case"cut":case"paste":g=uD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=X0}var m=(e&4)!==0,x=!m&&t==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var w=u,_;w!==null;){_=w;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,v!==null&&(N=$c(w,v),N!=null&&m.push(Yc(w,N,_)))),x)break;w=w.return}0<m.length&&(p=new g(p,y,null,n,h),f.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==fg&&(y=n.relatedTarget||n.fromElement)&&(mo(y)||y[Ps]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?mo(y):null,y!==null&&(x=Zo(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(m=Q0,N="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=X0,N="onPointerLeave",v="onPointerEnter",w="pointer"),x=g==null?p:Ca(g),_=y==null?p:Ca(y),p=new m(N,w+"leave",g,n,h),p.target=x,p.relatedTarget=_,N=null,mo(h)===u&&(m=new m(v,w+"enter",y,n,h),m.target=_,m.relatedTarget=x,N=m),x=N,g&&y)t:{for(m=g,v=y,w=0,_=m;_;_=ha(_))w++;for(_=0,N=v;N;N=ha(N))_++;for(;0<w-_;)m=ha(m),w--;for(;0<_-w;)v=ha(v),_--;for(;w--;){if(m===v||v!==null&&m===v.alternate)break t;m=ha(m),v=ha(v)}m=null}else m=null;g!==null&&l_(f,p,g,m,!1),y!==null&&x!==null&&l_(f,x,y,m,!0)}}e:{if(p=u?Ca(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var C=RD;else if(e_(p))if(NT)C=OD;else{C=PD;var L=jD}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=DD);if(C&&(C=C(t,u))){CT(f,C,n,h);break e}L&&L(t,p,u),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&lg(p,"number",p.value)}switch(L=u?Ca(u):window,t){case"focusin":(e_(L)||L.contentEditable==="true")&&(Ta=L,wg=u,Nc=null);break;case"focusout":Nc=wg=Ta=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,i_(f,n,h);break;case"selectionchange":if(FD)break;case"keydown":case"keyup":i_(f,n,h)}var T;if(wv)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ba?TT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(bT&&n.locale!=="ko"&&(ba||S!=="onCompositionStart"?S==="onCompositionEnd"&&ba&&(T=ET()):(wi=h,yv="value"in wi?wi.value:wi.textContent,ba=!0)),L=Rh(u,S),0<L.length&&(S=new Y0(S,t,null,n,h),f.push({event:S,listeners:L}),T?S.data=T:(T=ST(n),T!==null&&(S.data=T)))),(T=CD?ND(t,n):ID(t,n))&&(u=Rh(u,"onBeforeInput"),0<u.length&&(h=new Y0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}MT(f,e)})}function Yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$c(t,n),i!=null&&r.unshift(Yc(t,i,s)),i=$c(t,e),i!=null&&r.push(Yc(t,i,s))),t=t.return}return r}function ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=$c(n,i),c!=null&&o.unshift(Yc(n,c,l))):s||(c=$c(n,i),c!=null&&o.push(Yc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BD=/\r\n?/g,$D=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(BD,`
`).replace($D,"")}function Sd(t,e,n){if(e=c_(e),c_(t)!==e&&n)throw Error(fe(425))}function jh(){}var Eg=null,bg=null;function Tg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,WD=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,HD=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(t){return u_.resolve(null).then(t).catch(qD)}:Sg;function qD(t){setTimeout(function(){throw t})}function mm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),qc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qc(e)}function Ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Rl,Xc="__reactProps$"+Rl,Ps="__reactContainer$"+Rl,Cg="__reactEvents$"+Rl,KD="__reactListeners$"+Rl,GD="__reactHandles$"+Rl;function mo(t){var e=t[Kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ps]||n[Kr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d_(t);t!==null;){if(n=t[Kr])return n;t=d_(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[Kr]||t[Ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ca(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Rf(t){return t[Xc]||null}var Ng=[],Na=-1;function Xi(t){return{current:t}}function _t(t){0>Na||(t.current=Ng[Na],Ng[Na]=null,Na--)}function gt(t,e){Na++,Ng[Na]=t.current,t.current=e}var Vi={},En=Xi(Vi),zn=Xi(!1),Ro=Vi;function dl(t,e){var n=t.type.contextTypes;if(!n)return Vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bn(t){return t=t.childContextTypes,t!=null}function Ph(){_t(zn),_t(En)}function h_(t,e,n){if(En.current!==Vi)throw Error(fe(168));gt(En,e),gt(zn,n)}function VT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,jP(t)||"Unknown",s));return Ct({},n,r)}function Dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vi,Ro=En.current,gt(En,t),gt(zn,zn.current),!0}function f_(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=VT(t,e,Ro),r.__reactInternalMemoizedMergedChildContext=t,_t(zn),_t(En),gt(En,t)):_t(zn),gt(zn,n)}var ws=null,jf=!1,gm=!1;function UT(t){ws===null?ws=[t]:ws.push(t)}function QD(t){jf=!0,UT(t)}function Zi(){if(!gm&&ws!==null){gm=!0;var t=0,e=at;try{var n=ws;for(at=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ws=null,jf=!1}catch(s){throw ws!==null&&(ws=ws.slice(t+1)),dT(fv,Zi),s}finally{at=e,gm=!1}}return null}var Ia=[],ka=0,Oh=null,Lh=0,lr=[],cr=0,jo=null,bs=1,Ts="";function ho(t,e){Ia[ka++]=Lh,Ia[ka++]=Oh,Oh=t,Lh=e}function zT(t,e,n){lr[cr++]=bs,lr[cr++]=Ts,lr[cr++]=jo,jo=t;var r=bs;t=Ts;var s=32-Rr(r)-1;r&=~(1<<s),n+=1;var i=32-Rr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bs=1<<32-Rr(e)+s|n<<s|r,Ts=i+t}else bs=1<<i|n<<s|r,Ts=t}function Ev(t){t.return!==null&&(ho(t,1),zT(t,1,0))}function bv(t){for(;t===Oh;)Oh=Ia[--ka],Ia[ka]=null,Lh=Ia[--ka],Ia[ka]=null;for(;t===jo;)jo=lr[--cr],lr[cr]=null,Ts=lr[--cr],lr[cr]=null,bs=lr[--cr],lr[cr]=null}var er=null,Xn=null,Et=!1,Ir=null;function BT(t,e){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Xn=Ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jo!==null?{id:bs,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Xn=null,!0):!1;default:return!1}}function Ig(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kg(t){if(Et){var e=Xn;if(e){var n=e;if(!p_(t,e)){if(Ig(t))throw Error(fe(418));e=Ci(n.nextSibling);var r=er;e&&p_(t,e)?BT(r,n):(t.flags=t.flags&-4097|2,Et=!1,er=t)}}else{if(Ig(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Et=!1,er=t}}}function m_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function Cd(t){if(t!==er)return!1;if(!Et)return m_(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tg(t.type,t.memoizedProps)),e&&(e=Xn)){if(Ig(t))throw $T(),Error(fe(418));for(;e;)BT(t,e),e=Ci(e.nextSibling)}if(m_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=Ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=er?Ci(t.stateNode.nextSibling):null;return!0}function $T(){for(var t=Xn;t;)t=Ci(t.nextSibling)}function hl(){Xn=er=null,Et=!1}function Tv(t){Ir===null?Ir=[t]:Ir.push(t)}var YD=Bs.ReactCurrentBatchConfig;function ic(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g_(t){var e=t._init;return e(t._payload)}function WT(t){function e(v,w){if(t){var _=v.deletions;_===null?(v.deletions=[w],v.flags|=16):_.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Ai(v,w),v.index=0,v.sibling=null,v}function i(v,w,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<w?(v.flags|=2,w):_):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,w,_,N){return w===null||w.tag!==6?(w=bm(_,v.mode,N),w.return=v,w):(w=s(w,_),w.return=v,w)}function c(v,w,_,N){var C=_.type;return C===Ea?h(v,w,_.props.children,N,_.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&g_(C)===w.type)?(N=s(w,_.props),N.ref=ic(v,w,_),N.return=v,N):(N=oh(_.type,_.key,_.props,null,v.mode,N),N.ref=ic(v,w,_),N.return=v,N)}function u(v,w,_,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Tm(_,v.mode,N),w.return=v,w):(w=s(w,_.children||[]),w.return=v,w)}function h(v,w,_,N,C){return w===null||w.tag!==7?(w=Io(_,v.mode,N,C),w.return=v,w):(w=s(w,_),w.return=v,w)}function f(v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=bm(""+w,v.mode,_),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gd:return _=oh(w.type,w.key,w.props,null,v.mode,_),_.ref=ic(v,null,w),_.return=v,_;case _a:return w=Tm(w,v.mode,_),w.return=v,w;case si:var N=w._init;return f(v,N(w._payload),_)}if(hc(w)||ec(w))return w=Io(w,v.mode,_,null),w.return=v,w;Nd(v,w)}return null}function p(v,w,_,N){var C=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:l(v,w,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gd:return _.key===C?c(v,w,_,N):null;case _a:return _.key===C?u(v,w,_,N):null;case si:return C=_._init,p(v,w,C(_._payload),N)}if(hc(_)||ec(_))return C!==null?null:h(v,w,_,N,null);Nd(v,_)}return null}function g(v,w,_,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(_)||null,l(w,v,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case gd:return v=v.get(N.key===null?_:N.key)||null,c(w,v,N,C);case _a:return v=v.get(N.key===null?_:N.key)||null,u(w,v,N,C);case si:var L=N._init;return g(v,w,_,L(N._payload),C)}if(hc(N)||ec(N))return v=v.get(_)||null,h(w,v,N,C,null);Nd(w,N)}return null}function y(v,w,_,N){for(var C=null,L=null,T=w,S=w=0,P=null;T!==null&&S<_.length;S++){T.index>S?(P=T,T=null):P=T.sibling;var k=p(v,T,_[S],N);if(k===null){T===null&&(T=P);break}t&&T&&k.alternate===null&&e(v,T),w=i(k,w,S),L===null?C=k:L.sibling=k,L=k,T=P}if(S===_.length)return n(v,T),Et&&ho(v,S),C;if(T===null){for(;S<_.length;S++)T=f(v,_[S],N),T!==null&&(w=i(T,w,S),L===null?C=T:L.sibling=T,L=T);return Et&&ho(v,S),C}for(T=r(v,T);S<_.length;S++)P=g(T,v,S,_[S],N),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?S:P.key),w=i(P,w,S),L===null?C=P:L.sibling=P,L=P);return t&&T.forEach(function(M){return e(v,M)}),Et&&ho(v,S),C}function m(v,w,_,N){var C=ec(_);if(typeof C!="function")throw Error(fe(150));if(_=C.call(_),_==null)throw Error(fe(151));for(var L=C=null,T=w,S=w=0,P=null,k=_.next();T!==null&&!k.done;S++,k=_.next()){T.index>S?(P=T,T=null):P=T.sibling;var M=p(v,T,k.value,N);if(M===null){T===null&&(T=P);break}t&&T&&M.alternate===null&&e(v,T),w=i(M,w,S),L===null?C=M:L.sibling=M,L=M,T=P}if(k.done)return n(v,T),Et&&ho(v,S),C;if(T===null){for(;!k.done;S++,k=_.next())k=f(v,k.value,N),k!==null&&(w=i(k,w,S),L===null?C=k:L.sibling=k,L=k);return Et&&ho(v,S),C}for(T=r(v,T);!k.done;S++,k=_.next())k=g(T,v,S,k.value,N),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?S:k.key),w=i(k,w,S),L===null?C=k:L.sibling=k,L=k);return t&&T.forEach(function(R){return e(v,R)}),Et&&ho(v,S),C}function x(v,w,_,N){if(typeof _=="object"&&_!==null&&_.type===Ea&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case gd:e:{for(var C=_.key,L=w;L!==null;){if(L.key===C){if(C=_.type,C===Ea){if(L.tag===7){n(v,L.sibling),w=s(L,_.props.children),w.return=v,v=w;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&g_(C)===L.type){n(v,L.sibling),w=s(L,_.props),w.ref=ic(v,L,_),w.return=v,v=w;break e}n(v,L);break}else e(v,L);L=L.sibling}_.type===Ea?(w=Io(_.props.children,v.mode,N,_.key),w.return=v,v=w):(N=oh(_.type,_.key,_.props,null,v.mode,N),N.ref=ic(v,w,_),N.return=v,v=N)}return o(v);case _a:e:{for(L=_.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(v,w.sibling),w=s(w,_.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Tm(_,v.mode,N),w.return=v,v=w}return o(v);case si:return L=_._init,x(v,w,L(_._payload),N)}if(hc(_))return y(v,w,_,N);if(ec(_))return m(v,w,_,N);Nd(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,_),w.return=v,v=w):(n(v,w),w=bm(_,v.mode,N),w.return=v,v=w),o(v)):n(v,w)}return x}var fl=WT(!0),HT=WT(!1),Mh=Xi(null),Fh=null,Aa=null,Sv=null;function Cv(){Sv=Aa=Fh=null}function Nv(t){var e=Mh.current;_t(Mh),t._currentValue=e}function Ag(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Va(t,e){Fh=t,Sv=Aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function fr(t){var e=t._currentValue;if(Sv!==t)if(t={context:t,memoizedValue:e,next:null},Aa===null){if(Fh===null)throw Error(fe(308));Aa=t,Fh.dependencies={lanes:0,firstContext:t}}else Aa=Aa.next=t;return e}var go=null;function Iv(t){go===null?go=[t]:go.push(t)}function qT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Iv(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ds(t,r)}function Ds(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ii=!1;function kv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ds(t,n)}return s=r.interleaved,s===null?(e.next=e,Iv(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ds(t,n)}function eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pv(t,n)}}function y_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vh(t,e,n,r){var s=t.updateQueue;ii=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,m=l;switch(p=e,g=n,m.tag){case 1:if(y=m.payload,typeof y=="function"){f=y.call(g,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,p=typeof y=="function"?y.call(g,f,p):y,p==null)break e;f=Ct({},f,p);break e;case 2:ii=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Do|=o,t.lanes=o,t.memoizedState=f}}function v_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Au={},Zr=Xi(Au),Zc=Xi(Au),Jc=Xi(Au);function yo(t){if(t===Au)throw Error(fe(174));return t}function Av(t,e){switch(gt(Jc,e),gt(Zc,t),gt(Zr,Au),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ug(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ug(e,t)}_t(Zr),gt(Zr,e)}function pl(){_t(Zr),_t(Zc),_t(Jc)}function GT(t){yo(Jc.current);var e=yo(Zr.current),n=ug(e,t.type);e!==n&&(gt(Zc,t),gt(Zr,n))}function Rv(t){Zc.current===t&&(_t(Zr),_t(Zc))}var Tt=Xi(0);function Uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ym=[];function jv(){for(var t=0;t<ym.length;t++)ym[t]._workInProgressVersionPrimary=null;ym.length=0}var th=Bs.ReactCurrentDispatcher,vm=Bs.ReactCurrentBatchConfig,Po=0,St=null,Gt=null,en=null,zh=!1,Ic=!1,eu=0,XD=0;function mn(){throw Error(fe(321))}function Pv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dr(t[n],e[n]))return!1;return!0}function Dv(t,e,n,r,s,i){if(Po=i,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,th.current=t===null||t.memoizedState===null?tO:nO,t=n(r,s),Ic){i=0;do{if(Ic=!1,eu=0,25<=i)throw Error(fe(301));i+=1,en=Gt=null,e.updateQueue=null,th.current=rO,t=n(r,s)}while(Ic)}if(th.current=Bh,e=Gt!==null&&Gt.next!==null,Po=0,en=Gt=St=null,zh=!1,e)throw Error(fe(300));return t}function Ov(){var t=eu!==0;return eu=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?St.memoizedState=en=t:en=en.next=t,en}function pr(){if(Gt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var e=en===null?St.memoizedState:en.next;if(e!==null)en=e,Gt=t;else{if(t===null)throw Error(fe(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},en===null?St.memoizedState=en=t:en=en.next=t}return en}function tu(t,e){return typeof e=="function"?e(t):e}function xm(t){var e=pr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Gt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Po&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,St.lanes|=h,Do|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Dr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,St.lanes|=i,Do|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wm(t){var e=pr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Dr(i,e.memoizedState)||(Un=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function QT(){}function YT(t,e){var n=St,r=pr(),s=e(),i=!Dr(r.memoizedState,s);if(i&&(r.memoizedState=s,Un=!0),r=r.queue,Lv(JT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,nu(9,ZT.bind(null,n,r,s,e),void 0,null),tn===null)throw Error(fe(349));Po&30||XT(n,e,s)}return s}function XT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZT(t,e,n,r){e.value=n,e.getSnapshot=r,eS(e)&&tS(t)}function JT(t,e,n){return n(function(){eS(e)&&tS(t)})}function eS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dr(t,n)}catch{return!0}}function tS(t){var e=Ds(t,1);e!==null&&jr(e,t,1,-1)}function x_(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},e.queue=t,t=t.dispatch=eO.bind(null,St,t),[e.memoizedState,t]}function nu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nS(){return pr().memoizedState}function nh(t,e,n,r){var s=Br();St.flags|=t,s.memoizedState=nu(1|e,n,void 0,r===void 0?null:r)}function Pf(t,e,n,r){var s=pr();r=r===void 0?null:r;var i=void 0;if(Gt!==null){var o=Gt.memoizedState;if(i=o.destroy,r!==null&&Pv(r,o.deps)){s.memoizedState=nu(e,n,i,r);return}}St.flags|=t,s.memoizedState=nu(1|e,n,i,r)}function w_(t,e){return nh(8390656,8,t,e)}function Lv(t,e){return Pf(2048,8,t,e)}function rS(t,e){return Pf(4,2,t,e)}function sS(t,e){return Pf(4,4,t,e)}function iS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oS(t,e,n){return n=n!=null?n.concat([t]):null,Pf(4,4,iS.bind(null,e,t),n)}function Mv(){}function aS(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lS(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cS(t,e,n){return Po&21?(Dr(n,e)||(n=pT(),St.lanes|=n,Do|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function ZD(t,e){var n=at;at=n!==0&&4>n?n:4,t(!0);var r=vm.transition;vm.transition={};try{t(!1),e()}finally{at=n,vm.transition=r}}function uS(){return pr().memoizedState}function JD(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dS(t))hS(e,n);else if(n=qT(t,e,n,r),n!==null){var s=kn();jr(n,t,r,s),fS(n,e,r)}}function eO(t,e,n){var r=ki(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dS(t))hS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Dr(l,o)){var c=e.interleaved;c===null?(s.next=s,Iv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=qT(t,e,s,r),n!==null&&(s=kn(),jr(n,t,r,s),fS(n,e,r))}}function dS(t){var e=t.alternate;return t===St||e!==null&&e===St}function hS(t,e){Ic=zh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pv(t,n)}}var Bh={readContext:fr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},tO={readContext:fr,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:fr,useEffect:w_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nh(4194308,4,iS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return nh(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JD.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:x_,useDebugValue:Mv,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=x_(!1),e=t[0];return t=ZD.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=Br();if(Et){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),tn===null)throw Error(fe(349));Po&30||XT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,w_(JT.bind(null,r,i,t),[t]),r.flags|=2048,nu(9,ZT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Br(),e=tn.identifierPrefix;if(Et){var n=Ts,r=bs;n=(r&~(1<<32-Rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=eu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nO={readContext:fr,useCallback:aS,useContext:fr,useEffect:Lv,useImperativeHandle:oS,useInsertionEffect:rS,useLayoutEffect:sS,useMemo:lS,useReducer:xm,useRef:nS,useState:function(){return xm(tu)},useDebugValue:Mv,useDeferredValue:function(t){var e=pr();return cS(e,Gt.memoizedState,t)},useTransition:function(){var t=xm(tu)[0],e=pr().memoizedState;return[t,e]},useMutableSource:QT,useSyncExternalStore:YT,useId:uS,unstable_isNewReconciler:!1},rO={readContext:fr,useCallback:aS,useContext:fr,useEffect:Lv,useImperativeHandle:oS,useInsertionEffect:rS,useLayoutEffect:sS,useMemo:lS,useReducer:wm,useRef:nS,useState:function(){return wm(tu)},useDebugValue:Mv,useDeferredValue:function(t){var e=pr();return Gt===null?e.memoizedState=t:cS(e,Gt.memoizedState,t)},useTransition:function(){var t=wm(tu)[0],e=pr().memoizedState;return[t,e]},useMutableSource:QT,useSyncExternalStore:YT,useId:uS,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Df={isMounted:function(t){return(t=t._reactInternals)?Zo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kn(),s=ki(t),i=Ns(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(jr(e,t,s,r),eh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kn(),s=ki(t),i=Ns(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(jr(e,t,s,r),eh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kn(),r=ki(t),s=Ns(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ni(t,s,r),e!==null&&(jr(e,t,r,n),eh(e,t,r))}};function __(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Gc(n,r)||!Gc(s,i):!0}function pS(t,e,n){var r=!1,s=Vi,i=e.contextType;return typeof i=="object"&&i!==null?i=fr(i):(s=Bn(e)?Ro:En.current,r=e.contextTypes,i=(r=r!=null)?dl(t,s):Vi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function E_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function jg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fr(i):(i=Bn(e)?Ro:En.current,s.context=dl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Df.enqueueReplaceState(s,s.state,null),Vh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ml(t,e){try{var n="",r=e;do n+=RP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _m(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sO=typeof WeakMap=="function"?WeakMap:Map;function mS(t,e,n){n=Ns(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wh||(Wh=!0,$g=r),Pg(t,e)},n}function gS(t,e,n){n=Ns(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pg(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function b_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vO.bind(null,t,e,n),e.then(t,t))}function T_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ns(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var iO=Bs.ReactCurrentOwner,Un=!1;function In(t,e,n,r){e.child=t===null?HT(e,null,n,r):fl(e,t.child,n,r)}function C_(t,e,n,r,s){n=n.render;var i=e.ref;return Va(e,s),r=Dv(t,e,n,r,i,s),n=Ov(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(Et&&n&&Ev(e),e.flags|=1,In(t,e,r,s),e.child)}function N_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yS(t,e,i,r,s)):(t=oh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gc,n(o,r)&&t.ref===e.ref)return Os(t,e,s)}return e.flags|=1,t=Ai(i,r),t.ref=e.ref,t.return=e,e.child=t}function yS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Gc(i,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,Os(t,e,s)}return Dg(t,e,n,r,s)}function vS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(ja,Kn),Kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(ja,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,gt(ja,Kn),Kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,gt(ja,Kn),Kn|=r;return In(t,e,s,n),e.child}function xS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dg(t,e,n,r,s){var i=Bn(n)?Ro:En.current;return i=dl(e,i),Va(e,s),n=Dv(t,e,n,r,i,s),r=Ov(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(Et&&r&&Ev(e),e.flags|=1,In(t,e,n,s),e.child)}function I_(t,e,n,r,s){if(Bn(n)){var i=!0;Dh(e)}else i=!1;if(Va(e,s),e.stateNode===null)rh(t,e),pS(e,n,r),jg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=fr(u):(u=Bn(n)?Ro:En.current,u=dl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&E_(e,o,r,u),ii=!1;var p=e.memoizedState;o.state=p,Vh(e,r,o,s),c=e.memoizedState,l!==r||p!==c||zn.current||ii?(typeof h=="function"&&(Rg(e,n,h,r),c=e.memoizedState),(l=ii||__(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,KT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Tr(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=fr(c):(c=Bn(n)?Ro:En.current,c=dl(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&E_(e,o,r,c),ii=!1,p=e.memoizedState,o.state=p,Vh(e,r,o,s);var y=e.memoizedState;l!==f||p!==y||zn.current||ii?(typeof g=="function"&&(Rg(e,n,g,r),y=e.memoizedState),(u=ii||__(e,n,u,r,p,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Og(t,e,n,r,i,s)}function Og(t,e,n,r,s,i){xS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&f_(e,n,!1),Os(t,e,i);r=e.stateNode,iO.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fl(e,t.child,null,i),e.child=fl(e,null,l,i)):In(t,e,l,i),e.memoizedState=r.state,s&&f_(e,n,!0),e.child}function wS(t){var e=t.stateNode;e.pendingContext?h_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h_(t,e.context,!1),Av(t,e.containerInfo)}function k_(t,e,n,r,s){return hl(),Tv(s),e.flags|=256,In(t,e,n,r),e.child}var Lg={dehydrated:null,treeContext:null,retryLane:0};function Mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function _S(t,e,n){var r=e.pendingProps,s=Tt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),gt(Tt,s&1),t===null)return kg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mf(o,r,0,null),t=Io(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mg(n),e.memoizedState=Lg,t):Fv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return oO(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ai(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ai(l,i):(i=Io(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lg,r}return i=t.child,t=i.sibling,r=Ai(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fv(t,e){return e=Mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Id(t,e,n,r){return r!==null&&Tv(r),fl(e,t.child,null,n),t=Fv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_m(Error(fe(422))),Id(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mf({mode:"visible",children:r.children},s,0,null),i=Io(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fl(e,t.child,null,o),e.child.memoizedState=Mg(o),e.memoizedState=Lg,i);if(!(e.mode&1))return Id(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(fe(419)),r=_m(i,r,void 0),Id(t,e,o,r)}if(l=(o&t.childLanes)!==0,Un||l){if(r=tn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ds(t,s),jr(r,t,s,-1))}return Wv(),r=_m(Error(fe(421))),Id(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xn=Ci(s.nextSibling),er=e,Et=!0,Ir=null,t!==null&&(lr[cr++]=bs,lr[cr++]=Ts,lr[cr++]=jo,bs=t.id,Ts=t.overflow,jo=e),e=Fv(e,r.children),e.flags|=4096,e)}function A_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ag(t.return,e,n)}function Em(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ES(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(In(t,e,r.children,n),r=Tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A_(t,n,e);else if(t.tag===19)A_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gt(Tt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Uh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Em(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Uh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Em(e,!0,n,null,i);break;case"together":Em(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Os(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Do|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aO(t,e,n){switch(e.tag){case 3:wS(e),hl();break;case 5:GT(e);break;case 1:Bn(e.type)&&Dh(e);break;case 4:Av(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;gt(Mh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gt(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?_S(t,e,n):(gt(Tt,Tt.current&1),t=Os(t,e,n),t!==null?t.sibling:null);gt(Tt,Tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ES(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),gt(Tt,Tt.current),r)break;return null;case 22:case 23:return e.lanes=0,vS(t,e,n)}return Os(t,e,n)}var bS,Fg,TS,SS;bS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fg=function(){};TS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,yo(Zr.current);var i=null;switch(n){case"input":s=og(t,s),r=og(t,r),i=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),i=[];break;case"textarea":s=cg(t,s),r=cg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jh)}dg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&wt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};SS=function(t,e,n,r){n!==r&&(e.flags|=4)};function oc(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lO(t,e,n){var r=e.pendingProps;switch(bv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return Bn(e.type)&&Ph(),gn(e),null;case 3:return r=e.stateNode,pl(),_t(zn),_t(En),jv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(qg(Ir),Ir=null))),Fg(t,e),gn(e),null;case 5:Rv(e);var s=yo(Jc.current);if(n=e.type,t!==null&&e.stateNode!=null)TS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return gn(e),null}if(t=yo(Zr.current),Cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kr]=e,r[Xc]=i,t=(e.mode&1)!==0,n){case"dialog":wt("cancel",r),wt("close",r);break;case"iframe":case"object":case"embed":wt("load",r);break;case"video":case"audio":for(s=0;s<pc.length;s++)wt(pc[s],r);break;case"source":wt("error",r);break;case"img":case"image":case"link":wt("error",r),wt("load",r);break;case"details":wt("toggle",r);break;case"input":V0(r,i),wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},wt("invalid",r);break;case"textarea":z0(r,i),wt("invalid",r)}dg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Sd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Sd(r.textContent,l,t),s=["children",""+l]):zc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&wt("scroll",r)}switch(n){case"input":yd(r),U0(r,i,!0);break;case"textarea":yd(r),B0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kr]=e,t[Xc]=r,bS(t,e,!1,!1),e.stateNode=t;e:{switch(o=hg(n,r),n){case"dialog":wt("cancel",t),wt("close",t),s=r;break;case"iframe":case"object":case"embed":wt("load",t),s=r;break;case"video":case"audio":for(s=0;s<pc.length;s++)wt(pc[s],t);s=r;break;case"source":wt("error",t),s=r;break;case"img":case"image":case"link":wt("error",t),wt("load",t),s=r;break;case"details":wt("toggle",t),s=r;break;case"input":V0(t,r),s=og(t,r),wt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),wt("invalid",t);break;case"textarea":z0(t,r),s=cg(t,r),wt("invalid",t);break;default:s=r}dg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?nT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bc(t,c):typeof c=="number"&&Bc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&wt("scroll",t):c!=null&&lv(t,i,c,o))}switch(n){case"input":yd(t),U0(t,r,!1);break;case"textarea":yd(t),B0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Oa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)SS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=yo(Jc.current),yo(Zr.current),Cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kr]=e,(i=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:Sd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=e,e.stateNode=r}return gn(e),null;case 13:if(_t(Tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Xn!==null&&e.mode&1&&!(e.flags&128))$T(),hl(),e.flags|=98560,i=!1;else if(i=Cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Kr]=e}else hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),i=!1}else Ir!==null&&(qg(Ir),Ir=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?Yt===0&&(Yt=3):Wv())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return pl(),Fg(t,e),t===null&&Qc(e.stateNode.containerInfo),gn(e),null;case 10:return Nv(e.type._context),gn(e),null;case 17:return Bn(e.type)&&Ph(),gn(e),null;case 19:if(_t(Tt),i=e.memoizedState,i===null)return gn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)oc(i,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uh(t),o!==null){for(e.flags|=128,oc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(Tt,Tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mt()>gl&&(e.flags|=128,r=!0,oc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Uh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Et)return gn(e),null}else 2*Mt()-i.renderingStartTime>gl&&n!==1073741824&&(e.flags|=128,r=!0,oc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,n=Tt.current,gt(Tt,r?n&1|2:n&1),e):(gn(e),null);case 22:case 23:return $v(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kn&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function cO(t,e){switch(bv(e),e.tag){case 1:return Bn(e.type)&&Ph(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pl(),_t(zn),_t(En),jv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rv(e),null;case 13:if(_t(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(Tt),null;case 4:return pl(),null;case 10:return Nv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var kd=!1,xn=!1,uO=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function Vg(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var R_=!1;function dO(t,e){if(Eg=kh,t=AT(),_v(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bg={focusedElem:t,selectionRange:n},kh=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Tr(e.type,m),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(N){Rt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return y=R_,R_=!1,y}function kc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vg(e,n,i)}s=s.next}while(s!==r)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ug(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CS(t){var e=t.alternate;e!==null&&(t.alternate=null,CS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[Xc],delete e[Cg],delete e[KD],delete e[GD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function j_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jh));else if(r!==4&&(t=t.child,t!==null))for(zg(t,e,n),t=t.sibling;t!==null;)zg(t,e,n),t=t.sibling}function Bg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bg(t,e,n),t=t.sibling;t!==null;)Bg(t,e,n),t=t.sibling}var rn=null,Nr=!1;function Ys(t,e,n){for(n=n.child;n!==null;)IS(t,e,n),n=n.sibling}function IS(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Nf,n)}catch{}switch(n.tag){case 5:xn||Ra(n,e);case 6:var r=rn,s=Nr;rn=null,Ys(t,e,n),rn=r,Nr=s,rn!==null&&(Nr?(t=rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rn.removeChild(n.stateNode));break;case 18:rn!==null&&(Nr?(t=rn,n=n.stateNode,t.nodeType===8?mm(t.parentNode,n):t.nodeType===1&&mm(t,n),qc(t)):mm(rn,n.stateNode));break;case 4:r=rn,s=Nr,rn=n.stateNode.containerInfo,Nr=!0,Ys(t,e,n),rn=r,Nr=s;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Vg(n,e,o),s=s.next}while(s!==r)}Ys(t,e,n);break;case 1:if(!xn&&(Ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Rt(n,e,l)}Ys(t,e,n);break;case 21:Ys(t,e,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,Ys(t,e,n),xn=r):Ys(t,e,n);break;default:Ys(t,e,n)}}function P_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uO),e.forEach(function(r){var s=wO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,Nr=!1;break e;case 3:rn=l.stateNode.containerInfo,Nr=!0;break e;case 4:rn=l.stateNode.containerInfo,Nr=!0;break e}l=l.return}if(rn===null)throw Error(fe(160));IS(i,o,s),rn=null,Nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Rt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kS(e,t),e=e.sibling}function kS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),zr(t),r&4){try{kc(3,t,t.return),Of(3,t)}catch(m){Rt(t,t.return,m)}try{kc(5,t,t.return)}catch(m){Rt(t,t.return,m)}}break;case 1:Er(e,t),zr(t),r&512&&n!==null&&Ra(n,n.return);break;case 5:if(Er(e,t),zr(t),r&512&&n!==null&&Ra(n,n.return),t.flags&32){var s=t.stateNode;try{Bc(s,"")}catch(m){Rt(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&X1(s,i),hg(l,o);var u=hg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?nT(s,f):h==="dangerouslySetInnerHTML"?eT(s,f):h==="children"?Bc(s,f):lv(s,h,f,u)}switch(l){case"input":ag(s,i);break;case"textarea":Z1(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Oa(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Oa(s,!!i.multiple,i.defaultValue,!0):Oa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xc]=i}catch(m){Rt(t,t.return,m)}}break;case 6:if(Er(e,t),zr(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Rt(t,t.return,m)}}break;case 3:if(Er(e,t),zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qc(e.containerInfo)}catch(m){Rt(t,t.return,m)}break;case 4:Er(e,t),zr(t);break;case 13:Er(e,t),zr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zv=Mt())),r&4&&P_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xn=(u=xn)||h,Er(e,t),xn=u):Er(e,t),zr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Se=t,h=t.child;h!==null;){for(f=Se=h;Se!==null;){switch(p=Se,g=p.child,p.tag){case 0:case 11:case 14:case 15:kc(4,p,p.return);break;case 1:Ra(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(m){Rt(r,n,m)}}break;case 5:Ra(p,p.return);break;case 22:if(p.memoizedState!==null){O_(f);continue}}g!==null?(g.return=p,Se=g):O_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=tT("display",o))}catch(m){Rt(t,t.return,m)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Rt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Er(e,t),zr(t),r&4&&P_(t);break;case 21:break;default:Er(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bc(s,""),r.flags&=-33);var i=j_(t);Bg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=j_(t);zg(t,l,o);break;default:throw Error(fe(161))}}catch(c){Rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hO(t,e,n){Se=t,AS(t)}function AS(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var s=Se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xn;l=kd;var u=xn;if(kd=o,(xn=c)&&!u)for(Se=s;Se!==null;)o=Se,c=o.child,o.tag===22&&o.memoizedState!==null?L_(s):c!==null?(c.return=o,Se=c):L_(s);for(;i!==null;)Se=i,AS(i),i=i.sibling;Se=s,kd=l,xn=u}D_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Se=i):D_(t)}}function D_(t){for(;Se!==null;){var e=Se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xn||Of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&v_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&qc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}xn||e.flags&512&&Ug(e)}catch(p){Rt(e,e.return,p)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function O_(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function L_(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(c){Rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Rt(e,s,c)}}var i=e.return;try{Ug(e)}catch(c){Rt(e,i,c)}break;case 5:var o=e.return;try{Ug(e)}catch(c){Rt(e,o,c)}}}catch(c){Rt(e,e.return,c)}if(e===t){Se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Se=l;break}Se=e.return}}var fO=Math.ceil,$h=Bs.ReactCurrentDispatcher,Vv=Bs.ReactCurrentOwner,hr=Bs.ReactCurrentBatchConfig,tt=0,tn=null,$t=null,cn=0,Kn=0,ja=Xi(0),Yt=0,ru=null,Do=0,Lf=0,Uv=0,Ac=null,Fn=null,zv=0,gl=1/0,xs=null,Wh=!1,$g=null,Ii=null,Ad=!1,_i=null,Hh=0,Rc=0,Wg=null,sh=-1,ih=0;function kn(){return tt&6?Mt():sh!==-1?sh:sh=Mt()}function ki(t){return t.mode&1?tt&2&&cn!==0?cn&-cn:YD.transition!==null?(ih===0&&(ih=pT()),ih):(t=at,t!==0||(t=window.event,t=t===void 0?16:_T(t.type)),t):1}function jr(t,e,n,r){if(50<Rc)throw Rc=0,Wg=null,Error(fe(185));Nu(t,n,r),(!(tt&2)||t!==tn)&&(t===tn&&(!(tt&2)&&(Lf|=n),Yt===4&&ai(t,cn)),$n(t,r),n===1&&tt===0&&!(e.mode&1)&&(gl=Mt()+500,jf&&Zi()))}function $n(t,e){var n=t.callbackNode;YP(t,e);var r=Ih(t,t===tn?cn:0);if(r===0)n!==null&&H0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H0(n),e===1)t.tag===0?QD(M_.bind(null,t)):UT(M_.bind(null,t)),HD(function(){!(tt&6)&&Zi()}),n=null;else{switch(mT(r)){case 1:n=fv;break;case 4:n=hT;break;case 16:n=Nh;break;case 536870912:n=fT;break;default:n=Nh}n=FS(n,RS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RS(t,e){if(sh=-1,ih=0,tt&6)throw Error(fe(327));var n=t.callbackNode;if(Ua()&&t.callbackNode!==n)return null;var r=Ih(t,t===tn?cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qh(t,r);else{e=r;var s=tt;tt|=2;var i=PS();(tn!==t||cn!==e)&&(xs=null,gl=Mt()+500,No(t,e));do try{gO();break}catch(l){jS(t,l)}while(!0);Cv(),$h.current=i,tt=s,$t!==null?e=0:(tn=null,cn=0,e=Yt)}if(e!==0){if(e===2&&(s=yg(t),s!==0&&(r=s,e=Hg(t,s))),e===1)throw n=ru,No(t,0),ai(t,r),$n(t,Mt()),n;if(e===6)ai(t,r);else{if(s=t.current.alternate,!(r&30)&&!pO(s)&&(e=qh(t,r),e===2&&(i=yg(t),i!==0&&(r=i,e=Hg(t,i))),e===1))throw n=ru,No(t,0),ai(t,r),$n(t,Mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:fo(t,Fn,xs);break;case 3:if(ai(t,r),(r&130023424)===r&&(e=zv+500-Mt(),10<e)){if(Ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){kn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sg(fo.bind(null,t,Fn,xs),e);break}fo(t,Fn,xs);break;case 4:if(ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Rr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fO(r/1960))-r,10<r){t.timeoutHandle=Sg(fo.bind(null,t,Fn,xs),r);break}fo(t,Fn,xs);break;case 5:fo(t,Fn,xs);break;default:throw Error(fe(329))}}}return $n(t,Mt()),t.callbackNode===n?RS.bind(null,t):null}function Hg(t,e){var n=Ac;return t.current.memoizedState.isDehydrated&&(No(t,e).flags|=256),t=qh(t,e),t!==2&&(e=Fn,Fn=n,e!==null&&qg(e)),t}function qg(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function pO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e){for(e&=~Uv,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rr(e),r=1<<n;t[n]=-1,e&=~r}}function M_(t){if(tt&6)throw Error(fe(327));Ua();var e=Ih(t,0);if(!(e&1))return $n(t,Mt()),null;var n=qh(t,e);if(t.tag!==0&&n===2){var r=yg(t);r!==0&&(e=r,n=Hg(t,r))}if(n===1)throw n=ru,No(t,0),ai(t,e),$n(t,Mt()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fo(t,Fn,xs),$n(t,Mt()),null}function Bv(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(gl=Mt()+500,jf&&Zi())}}function Oo(t){_i!==null&&_i.tag===0&&!(tt&6)&&Ua();var e=tt;tt|=1;var n=hr.transition,r=at;try{if(hr.transition=null,at=1,t)return t()}finally{at=r,hr.transition=n,tt=e,!(tt&6)&&Zi()}}function $v(){Kn=ja.current,_t(ja)}function No(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WD(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(bv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ph();break;case 3:pl(),_t(zn),_t(En),jv();break;case 5:Rv(r);break;case 4:pl();break;case 13:_t(Tt);break;case 19:_t(Tt);break;case 10:Nv(r.type._context);break;case 22:case 23:$v()}n=n.return}if(tn=t,$t=t=Ai(t.current,null),cn=Kn=e,Yt=0,ru=null,Uv=Lf=Do=0,Fn=Ac=null,go!==null){for(e=0;e<go.length;e++)if(n=go[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}go=null}return t}function jS(t,e){do{var n=$t;try{if(Cv(),th.current=Bh,zh){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zh=!1}if(Po=0,en=Gt=St=null,Ic=!1,eu=0,Vv.current=null,n===null||n.return===null){Yt=1,ru=e,$t=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=cn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=T_(o);if(g!==null){g.flags&=-257,S_(g,o,l,i,e),g.mode&1&&b_(i,u,e),e=g,c=u;var y=e.updateQueue;if(y===null){var m=new Set;m.add(c),e.updateQueue=m}else y.add(c);break e}else{if(!(e&1)){b_(i,u,e),Wv();break e}c=Error(fe(426))}}else if(Et&&l.mode&1){var x=T_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),S_(x,o,l,i,e),Tv(ml(c,l));break e}}i=c=ml(c,l),Yt!==4&&(Yt=2),Ac===null?Ac=[i]:Ac.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=mS(i,c,e);y_(i,v);break e;case 1:l=c;var w=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ii===null||!Ii.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=gS(i,l,e);y_(i,N);break e}}i=i.return}while(i!==null)}OS(n)}catch(C){e=C,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function PS(){var t=$h.current;return $h.current=Bh,t===null?Bh:t}function Wv(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),tn===null||!(Do&268435455)&&!(Lf&268435455)||ai(tn,cn)}function qh(t,e){var n=tt;tt|=2;var r=PS();(tn!==t||cn!==e)&&(xs=null,No(t,e));do try{mO();break}catch(s){jS(t,s)}while(!0);if(Cv(),tt=n,$h.current=r,$t!==null)throw Error(fe(261));return tn=null,cn=0,Yt}function mO(){for(;$t!==null;)DS($t)}function gO(){for(;$t!==null&&!zP();)DS($t)}function DS(t){var e=MS(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?OS(t):$t=e,Vv.current=null}function OS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cO(n,e),n!==null){n.flags&=32767,$t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,$t=null;return}}else if(n=lO(n,e,Kn),n!==null){$t=n;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Yt===0&&(Yt=5)}function fo(t,e,n){var r=at,s=hr.transition;try{hr.transition=null,at=1,yO(t,e,n,r)}finally{hr.transition=s,at=r}return null}function yO(t,e,n,r){do Ua();while(_i!==null);if(tt&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(XP(t,i),t===tn&&($t=tn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ad||(Ad=!0,FS(Nh,function(){return Ua(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=hr.transition,hr.transition=null;var o=at;at=1;var l=tt;tt|=4,Vv.current=null,dO(t,n),kS(n,t),MD(bg),kh=!!Eg,bg=Eg=null,t.current=n,hO(n),BP(),tt=l,at=o,hr.transition=i}else t.current=n;if(Ad&&(Ad=!1,_i=t,Hh=s),i=t.pendingLanes,i===0&&(Ii=null),HP(n.stateNode),$n(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wh)throw Wh=!1,t=$g,$g=null,t;return Hh&1&&t.tag!==0&&Ua(),i=t.pendingLanes,i&1?t===Wg?Rc++:(Rc=0,Wg=t):Rc=0,Zi(),null}function Ua(){if(_i!==null){var t=mT(Hh),e=hr.transition,n=at;try{if(hr.transition=null,at=16>t?16:t,_i===null)var r=!1;else{if(t=_i,_i=null,Hh=0,tt&6)throw Error(fe(331));var s=tt;for(tt|=4,Se=t.current;Se!==null;){var i=Se,o=i.child;if(Se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Se=u;Se!==null;){var h=Se;switch(h.tag){case 0:case 11:case 15:kc(8,h,i)}var f=h.child;if(f!==null)f.return=h,Se=f;else for(;Se!==null;){h=Se;var p=h.sibling,g=h.return;if(CS(h),h===u){Se=null;break}if(p!==null){p.return=g,Se=p;break}Se=g}}}var y=i.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}Se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Se=o;else e:for(;Se!==null;){if(i=Se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Se=v;break e}Se=i.return}}var w=t.current;for(Se=w;Se!==null;){o=Se;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Se=_;else e:for(o=w;Se!==null;){if(l=Se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Of(9,l)}}catch(C){Rt(l,l.return,C)}if(l===o){Se=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Se=N;break e}Se=l.return}}if(tt=s,Zi(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Nf,t)}catch{}r=!0}return r}finally{at=n,hr.transition=e}}return!1}function F_(t,e,n){e=ml(n,e),e=mS(t,e,1),t=Ni(t,e,1),e=kn(),t!==null&&(Nu(t,1,e),$n(t,e))}function Rt(t,e,n){if(t.tag===3)F_(t,t,n);else for(;e!==null;){if(e.tag===3){F_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=ml(n,t),t=gS(e,t,1),e=Ni(e,t,1),t=kn(),e!==null&&(Nu(e,1,t),$n(e,t));break}}e=e.return}}function vO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&n,tn===t&&(cn&n)===n&&(Yt===4||Yt===3&&(cn&130023424)===cn&&500>Mt()-zv?No(t,0):Uv|=n),$n(t,e)}function LS(t,e){e===0&&(t.mode&1?(e=wd,wd<<=1,!(wd&130023424)&&(wd=4194304)):e=1);var n=kn();t=Ds(t,e),t!==null&&(Nu(t,e,n),$n(t,n))}function xO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),LS(t,n)}function wO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),LS(t,n)}var MS;MS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,aO(t,e,n);Un=!!(t.flags&131072)}else Un=!1,Et&&e.flags&1048576&&zT(e,Lh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rh(t,e),t=e.pendingProps;var s=dl(e,En.current);Va(e,n),s=Dv(null,e,r,t,s,n);var i=Ov();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bn(r)?(i=!0,Dh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kv(e),s.updater=Df,e.stateNode=s,s._reactInternals=e,jg(e,r,t,n),e=Og(null,e,r,!0,i,n)):(e.tag=0,Et&&i&&Ev(e),In(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=EO(r),t=Tr(r,t),s){case 0:e=Dg(null,e,r,t,n);break e;case 1:e=I_(null,e,r,t,n);break e;case 11:e=C_(null,e,r,t,n);break e;case 14:e=N_(null,e,r,Tr(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),Dg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),I_(t,e,r,s,n);case 3:e:{if(wS(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,KT(t,e),Vh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ml(Error(fe(423)),e),e=k_(t,e,r,n,s);break e}else if(r!==s){s=ml(Error(fe(424)),e),e=k_(t,e,r,n,s);break e}else for(Xn=Ci(e.stateNode.containerInfo.firstChild),er=e,Et=!0,Ir=null,n=HT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hl(),r===s){e=Os(t,e,n);break e}In(t,e,r,n)}e=e.child}return e;case 5:return GT(e),t===null&&kg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tg(r,s)?o=null:i!==null&&Tg(r,i)&&(e.flags|=32),xS(t,e),In(t,e,o,n),e.child;case 6:return t===null&&kg(e),null;case 13:return _S(t,e,n);case 4:return Av(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fl(e,null,r,n):In(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),C_(t,e,r,s,n);case 7:return In(t,e,e.pendingProps,n),e.child;case 8:return In(t,e,e.pendingProps.children,n),e.child;case 12:return In(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,gt(Mh,r._currentValue),r._currentValue=o,i!==null)if(Dr(i.value,o)){if(i.children===s.children&&!zn.current){e=Os(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ns(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ag(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ag(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}In(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Va(e,n),s=fr(s),r=r(s),e.flags|=1,In(t,e,r,n),e.child;case 14:return r=e.type,s=Tr(r,e.pendingProps),s=Tr(r.type,s),N_(t,e,r,s,n);case 15:return yS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),rh(t,e),e.tag=1,Bn(r)?(t=!0,Dh(e)):t=!1,Va(e,n),pS(e,r,s),jg(e,r,s,n),Og(null,e,r,!0,t,n);case 19:return ES(t,e,n);case 22:return vS(t,e,n)}throw Error(fe(156,e.tag))};function FS(t,e){return dT(t,e)}function _O(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(t,e,n,r){return new _O(t,e,n,r)}function Hv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function EO(t){if(typeof t=="function")return Hv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uv)return 11;if(t===dv)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ea:return Io(n.children,s,i,e);case cv:o=8,s|=8;break;case ng:return t=dr(12,n,e,s|2),t.elementType=ng,t.lanes=i,t;case rg:return t=dr(13,n,e,s),t.elementType=rg,t.lanes=i,t;case sg:return t=dr(19,n,e,s),t.elementType=sg,t.lanes=i,t;case G1:return Mf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q1:o=10;break e;case K1:o=9;break e;case uv:o=11;break e;case dv:o=14;break e;case si:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=dr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Io(t,e,n,r){return t=dr(7,t,r,e),t.lanes=n,t}function Mf(t,e,n,r){return t=dr(22,t,r,e),t.elementType=G1,t.lanes=n,t.stateNode={isHidden:!1},t}function bm(t,e,n){return t=dr(6,t,null,e),t.lanes=n,t}function Tm(t,e,n){return e=dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sm(0),this.expirationTimes=sm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qv(t,e,n,r,s,i,o,l,c){return t=new bO(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kv(i),t}function TO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VS(t){if(!t)return Vi;t=t._reactInternals;e:{if(Zo(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Bn(n))return VT(t,n,e)}return e}function US(t,e,n,r,s,i,o,l,c){return t=qv(n,r,!0,t,s,i,o,l,c),t.context=VS(null),n=t.current,r=kn(),s=ki(n),i=Ns(r,s),i.callback=e??null,Ni(n,i,s),t.current.lanes=s,Nu(t,s,r),$n(t,r),t}function Ff(t,e,n,r){var s=e.current,i=kn(),o=ki(s);return n=VS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ns(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(s,e,o),t!==null&&(jr(t,s,o,i),eh(t,s,o)),o}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kv(t,e){V_(t,e),(t=t.alternate)&&V_(t,e)}function SO(){return null}var zS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gv(t){this._internalRoot=t}Vf.prototype.render=Gv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Ff(t,e,null,null)};Vf.prototype.unmount=Gv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oo(function(){Ff(null,t,null,null)}),e[Ps]=null}};function Vf(t){this._internalRoot=t}Vf.prototype.unstable_scheduleHydration=function(t){if(t){var e=vT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oi.length&&e!==0&&e<oi[n].priority;n++);oi.splice(n,0,t),n===0&&wT(t)}};function Qv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U_(){}function CO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Kh(o);i.call(u)}}var o=US(e,r,t,0,null,!1,!1,"",U_);return t._reactRootContainer=o,t[Ps]=o.current,Qc(t.nodeType===8?t.parentNode:t),Oo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Kh(c);l.call(u)}}var c=qv(t,0,!1,null,null,!1,!1,"",U_);return t._reactRootContainer=c,t[Ps]=c.current,Qc(t.nodeType===8?t.parentNode:t),Oo(function(){Ff(e,c,n,r)}),c}function zf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Kh(o);l.call(c)}}Ff(e,o,t,s)}else o=CO(n,e,t,s,r);return Kh(o)}gT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fc(e.pendingLanes);n!==0&&(pv(e,n|1),$n(e,Mt()),!(tt&6)&&(gl=Mt()+500,Zi()))}break;case 13:Oo(function(){var r=Ds(t,1);if(r!==null){var s=kn();jr(r,t,1,s)}}),Kv(t,1)}};mv=function(t){if(t.tag===13){var e=Ds(t,134217728);if(e!==null){var n=kn();jr(e,t,134217728,n)}Kv(t,134217728)}};yT=function(t){if(t.tag===13){var e=ki(t),n=Ds(t,e);if(n!==null){var r=kn();jr(n,t,e,r)}Kv(t,e)}};vT=function(){return at};xT=function(t,e){var n=at;try{return at=t,e()}finally{at=n}};pg=function(t,e,n){switch(e){case"input":if(ag(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rf(r);if(!s)throw Error(fe(90));Y1(r),ag(r,s)}}}break;case"textarea":Z1(t,n);break;case"select":e=n.value,e!=null&&Oa(t,!!n.multiple,e,!1)}};iT=Bv;oT=Oo;var NO={usingClientEntryPoint:!1,Events:[ku,Ca,Rf,rT,sT,Bv]},ac={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IO={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cT(t),t===null?null:t.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Nf=Rd.inject(IO),Xr=Rd}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NO;rr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(e))throw Error(fe(200));return TO(t,e,null,n)};rr.createRoot=function(t,e){if(!Qv(t))throw Error(fe(299));var n=!1,r="",s=zS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qv(t,1,!1,null,null,n,!1,r,s),t[Ps]=e.current,Qc(t.nodeType===8?t.parentNode:t),new Gv(e)};rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=cT(e),t=t===null?null:t.stateNode,t};rr.flushSync=function(t){return Oo(t)};rr.hydrate=function(t,e,n){if(!Uf(e))throw Error(fe(200));return zf(null,t,e,!0,n)};rr.hydrateRoot=function(t,e,n){if(!Qv(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=zS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=US(e,null,t,1,n??null,s,!1,i,o),t[Ps]=e.current,Qc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vf(e)};rr.render=function(t,e,n){if(!Uf(e))throw Error(fe(200));return zf(null,t,e,!1,n)};rr.unmountComponentAtNode=function(t){if(!Uf(t))throw Error(fe(40));return t._reactRootContainer?(Oo(function(){zf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ps]=null})}),!0):!1};rr.unstable_batchedUpdates=Bv;rr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uf(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return zf(t,e,n,!1,r)};rr.version="18.3.1-next-f1338f8080-20240426";function BS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BS)}catch(t){console.error(t)}}BS(),B1.exports=rr;var Jo=B1.exports;const kO=ev(Jo);var $S,z_=Jo;$S=z_.createRoot,z_.hydrateRoot;function AO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var WS={exports:{}},HS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=E;function RO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jO=typeof Object.is=="function"?Object.is:RO,PO=yl.useState,DO=yl.useEffect,OO=yl.useLayoutEffect,LO=yl.useDebugValue;function MO(t,e){var n=e(),r=PO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return OO(function(){s.value=n,s.getSnapshot=e,Sm(s)&&i({inst:s})},[t,n,e]),DO(function(){return Sm(s)&&i({inst:s}),t(function(){Sm(s)&&i({inst:s})})},[t]),LO(n),n}function Sm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jO(t,n)}catch{return!0}}function FO(t,e){return e()}var VO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FO:MO;HS.useSyncExternalStore=yl.useSyncExternalStore!==void 0?yl.useSyncExternalStore:VO;WS.exports=HS;var qS=WS.exports;const UO=iv.useInsertionEffect,zO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BO=zO?E.useLayoutEffect:E.useEffect,$O=UO||BO,KS=t=>{const e=E.useRef([t,(...n)=>e[0](...n)]).current;return $O(()=>{e[0]=t}),e[1]},WO="popstate",Yv="pushState",Xv="replaceState",HO="hashchange",B_=[WO,Yv,Xv,HO],qO=t=>{for(const e of B_)addEventListener(e,t);return()=>{for(const e of B_)removeEventListener(e,t)}},GS=(t,e)=>qS.useSyncExternalStore(qO,t,e),KO=()=>location.search,GO=({ssrSearch:t=""}={})=>GS(KO,()=>t),$_=()=>location.pathname,QO=({ssrPath:t}={})=>GS($_,t?()=>t:$_),YO=(t,{replace:e=!1,state:n=null}={})=>history[e?Xv:Yv](n,"",t),XO=(t={})=>[QO(t),YO],W_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[W_]>"u"){for(const t of[Yv,Xv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,W_,{value:!0})}const ZO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",QS=(t="")=>t==="/"?"":t,JO=(t,e)=>t[0]==="~"?t.slice(1):QS(e)+t,eL=(t="",e)=>ZO(H_(QS(t)),H_(e)),H_=t=>{try{return decodeURI(t)}catch{return t}},YS={hook:XO,searchHook:GO,parser:AO,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},XS=E.createContext(YS),Bf=()=>E.useContext(XS),ZS={},JS=E.createContext(ZS),tL=()=>E.useContext(JS),Zv=t=>{const[e,n]=t.hook(t);return[eL(t.base,e),KS((r,s)=>n(JO(r,t.base),s))]},eC=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},nL=({children:t,...e})=>{var h,f;const n=Bf(),r=e.hook?YS:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=E.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,(g!==r[p]||g!==s[p])&&(s=u)}return E.createElement(XS.Provider,{value:s,children:t})},q_=({children:t,component:e},n)=>e?E.createElement(e,{params:n}):typeof t=="function"?t(n):t,rL=t=>{let e=E.useRef(ZS);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},Xs=({path:t,nest:e,match:n,...r})=>{const s=Bf(),[i]=Zv(s),[o,l,c]=n??eC(s.parser,t,i,e),u=rL({...tL(),...l});if(!o)return null;const h=c?E.createElement(nL,{base:c},q_(r,u)):q_(r,u);return E.createElement(JS.Provider,{value:u,children:h})},Pa=E.forwardRef((t,e)=>{const n=Bf(),[r,s]=Zv(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...g}=t,y=KS(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(l==null||l(x),x.defaultPrevented||(x.preventDefault(),s(o,t)))}),m=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&E.isValidElement(u)?E.cloneElement(u,{onClick:y,href:m}):E.createElement("a",{...g,onClick:y,href:m,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),tC=t=>Array.isArray(t)?t.flatMap(e=>tC(e&&e.type===E.Fragment?e.props.children:e)):[t],sL=({children:t,location:e})=>{const n=Bf(),[r]=Zv(n);for(const s of tC(t)){let i=0;if(E.isValidElement(s)&&(i=eC(n.parser,s.props.path,e||r,s.props.nest))[0])return E.cloneElement(s,{match:i})}return null};var Ru=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lo=typeof window>"u"||"Deno"in globalThis;function On(){}function iL(t,e){return typeof t=="function"?t(e):t}function Kg(t){return typeof t=="number"&&t>=0&&t!==1/0}function nC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ri(t,e){return typeof t=="function"?t(e):t}function ar(t,e){return typeof t=="function"?t(e):t}function K_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Jv(o,e.options))return!1}else if(!iu(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function G_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(su(e.options.mutationKey)!==su(i))return!1}else if(!iu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jv(t,e){return((e==null?void 0:e.queryKeyHashFn)||su)(t)}function su(t){return JSON.stringify(t,(e,n)=>Qg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function iu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>iu(t[n],e[n])):!1}function rC(t,e){if(t===e)return t;const n=Q_(t)&&Q_(e);if(n||Qg(t)&&Qg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=rC(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function Gg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Q_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qg(t){if(!Y_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Y_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Y_(t){return Object.prototype.toString.call(t)==="[object Object]"}function oL(t){return new Promise(e=>{setTimeout(e,t)})}function Yg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rC(t,e):e}function aL(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function lL(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ex=Symbol();function sC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ex?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function cL(t,e){return typeof t=="function"?t(...e):!!t}var xo,hi,Xa,E1,uL=(E1=class extends Ru{constructor(){super();Le(this,xo);Le(this,hi);Le(this,Xa);Ce(this,Xa,e=>{if(!Lo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,hi)||this.setEventListener(Q(this,Xa))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,hi))==null||e.call(this),Ce(this,hi,void 0))}setEventListener(e){var n;Ce(this,Xa,e),(n=Q(this,hi))==null||n.call(this),Ce(this,hi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,xo)!==e&&(Ce(this,xo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,xo)=="boolean"?Q(this,xo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xo=new WeakMap,hi=new WeakMap,Xa=new WeakMap,E1),tx=new uL,Za,fi,Ja,b1,dL=(b1=class extends Ru{constructor(){super();Le(this,Za,!0);Le(this,fi);Le(this,Ja);Ce(this,Ja,e=>{if(!Lo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,fi)||this.setEventListener(Q(this,Ja))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,fi))==null||e.call(this),Ce(this,fi,void 0))}setEventListener(e){var n;Ce(this,Ja,e),(n=Q(this,fi))==null||n.call(this),Ce(this,fi,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Za)!==e&&(Ce(this,Za,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Za)}},Za=new WeakMap,fi=new WeakMap,Ja=new WeakMap,b1),Gh=new dL;function Xg(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function hL(t){return Math.min(1e3*2**t,3e4)}function iC(t){return(t??"online")==="online"?Gh.isOnline():!0}var oC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function aC(t){let e=!1,n=0,r;const s=Xg(),i=()=>s.status!=="pending",o=m=>{var x;i()||(p(new oC(m)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>tx.isFocused()&&(t.networkMode==="always"||Gh.isOnline())&&t.canRun(),h=()=>iC(t.networkMode)&&t.canRun(),f=m=>{i()||(r==null||r(),s.resolve(m))},p=m=>{i()||(r==null||r(),s.reject(m))},g=()=>new Promise(m=>{var x;r=v=>{(i()||u())&&m(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var m;r=void 0,i()||(m=t.onContinue)==null||m.call(t)}),y=()=>{if(i())return;let m;const x=n===0?t.initialPromise:void 0;try{m=x??t.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(f).catch(v=>{var L;if(i())return;const w=t.retry??(Lo?0:3),_=t.retryDelay??hL,N=typeof _=="function"?_(n,v):_,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,v);if(e||!C){p(v);return}n++,(L=t.onFail)==null||L.call(t,n,v),oL(N).then(()=>u()?void 0:g()).then(()=>{e?p(v):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?y():g().then(y),s)}}var fL=t=>setTimeout(t,0);function pL(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=fL;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var on=pL(),wo,T1,lC=(T1=class{constructor(){Le(this,wo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Kg(this.gcTime)&&Ce(this,wo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Lo?1/0:5*60*1e3))}clearGcTimeout(){Q(this,wo)&&(clearTimeout(Q(this,wo)),Ce(this,wo,void 0))}},wo=new WeakMap,T1),el,tl,or,_o,Zt,Eu,Eo,Sr,vs,S1,mL=(S1=class extends lC{constructor(n){super();Le(this,Sr);Le(this,el);Le(this,tl);Le(this,or);Le(this,_o);Le(this,Zt);Le(this,Eu);Le(this,Eo);Ce(this,Eo,!1),Ce(this,Eu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ce(this,_o,n.client),Ce(this,or,Q(this,_o).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ce(this,el,gL(this.options)),this.state=n.state??Q(this,el),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Zt))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,Eu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,or).remove(this)}setData(n,r){const s=Yg(this.state.data,n,this.options);return Xe(this,Sr,vs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Xe(this,Sr,vs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Zt))==null?void 0:s.promise;return(i=Q(this,Zt))==null||i.cancel(n),r?r.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,el))}isActive(){return this.observers.some(n=>ar(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ex||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ri(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!nC(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Zt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Zt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,or).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Zt)&&(Q(this,Eo)?Q(this,Zt).cancel({revert:!0}):Q(this,Zt).cancelRetry()),this.scheduleGc()),Q(this,or).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xe(this,Sr,vs).call(this,{type:"invalidate"})}async fetch(n,r){var u,h,f,p,g,y,m,x,v,w,_,N;if(this.state.fetchStatus!=="idle"&&((u=Q(this,Zt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Zt))return Q(this,Zt).continueRetry(),Q(this,Zt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const C=this.observers.find(L=>L.options.queryFn);C&&this.setOptions(C.options)}const s=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Ce(this,Eo,!0),s.signal)})},o=()=>{const C=sC(this.options,r),T=(()=>{const S={client:Q(this,_o),queryKey:this.queryKey,meta:this.meta};return i(S),S})();return Ce(this,Eo,!1),this.options.persister?this.options.persister(C,T,this):C(T)},c=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Q(this,_o),state:this.state,fetchFn:o};return i(C),C})();(h=this.options.behavior)==null||h.onFetch(c,this),Ce(this,tl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&Xe(this,Sr,vs).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta}),Ce(this,Zt,aC({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onFail:(C,L)=>{Xe(this,Sr,vs).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{Xe(this,Sr,vs).call(this,{type:"pause"})},onContinue:()=>{Xe(this,Sr,vs).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const C=await Q(this,Zt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(g=Q(this,or).config).onSuccess)==null||y.call(g,C,this),(x=(m=Q(this,or).config).onSettled)==null||x.call(m,C,this.state.error,this),C}catch(C){if(C instanceof oC){if(C.silent)return Q(this,Zt).promise;if(C.revert)return this.setState({...Q(this,tl),fetchStatus:"idle"}),this.state.data}throw Xe(this,Sr,vs).call(this,{type:"error",error:C}),(w=(v=Q(this,or).config).onError)==null||w.call(v,C,this),(N=(_=Q(this,or).config).onSettled)==null||N.call(_,this.state.data,C,this),C}finally{this.scheduleGc()}}},el=new WeakMap,tl=new WeakMap,or=new WeakMap,_o=new WeakMap,Zt=new WeakMap,Eu=new WeakMap,Eo=new WeakMap,Sr=new WeakSet,vs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...cC(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ce(this,tl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),on.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,or).notify({query:this,type:"updated",action:n})})},S1);function cC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Wr,C1,yL=(C1=class extends Ru{constructor(e={}){super();Le(this,Wr);this.config=e,Ce(this,Wr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Jv(s,n);let o=this.get(i);return o||(o=new mL({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Wr).has(e.queryHash)||(Q(this,Wr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Wr).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Wr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Wr).get(e)}getAll(){return[...Q(this,Wr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>K_(e,r)):n}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){on.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wr=new WeakMap,C1),Hr,Cn,bo,qr,ni,N1,vL=(N1=class extends lC{constructor(n){super();Le(this,qr);Le(this,Hr);Le(this,Cn);Le(this,bo);this.mutationId=n.mutationId,Ce(this,Cn,n.mutationCache),Ce(this,Hr,[]),this.state=n.state||xL(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Hr).includes(n)||(Q(this,Hr).push(n),this.clearGcTimeout(),Q(this,Cn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ce(this,Hr,Q(this,Hr).filter(r=>r!==n)),this.scheduleGc(),Q(this,Cn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Hr).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Cn).remove(this))}continue(){var n;return((n=Q(this,bo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,h,f,p,g,y,m,x,v,w,_,N,C,L,T,S,P;const r=()=>{Xe(this,qr,ni).call(this,{type:"continue"})};Ce(this,bo,aC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(k,M)=>{Xe(this,qr,ni).call(this,{type:"failed",failureCount:k,error:M})},onPause:()=>{Xe(this,qr,ni).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Cn).canRun(this)}));const s=this.state.status==="pending",i=!Q(this,bo).canStart();try{if(s)r();else{Xe(this,qr,ni).call(this,{type:"pending",variables:n,isPaused:i}),await((l=(o=Q(this,Cn).config).onMutate)==null?void 0:l.call(o,n,this));const M=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));M!==this.state.context&&Xe(this,qr,ni).call(this,{type:"pending",context:M,variables:n,isPaused:i})}const k=await Q(this,bo).start();return await((f=(h=Q(this,Cn).config).onSuccess)==null?void 0:f.call(h,k,n,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,k,n,this.state.context)),await((m=(y=Q(this,Cn).config).onSettled)==null?void 0:m.call(y,k,null,this.state.variables,this.state.context,this)),await((v=(x=this.options).onSettled)==null?void 0:v.call(x,k,null,n,this.state.context)),Xe(this,qr,ni).call(this,{type:"success",data:k}),k}catch(k){try{throw await((_=(w=Q(this,Cn).config).onError)==null?void 0:_.call(w,k,n,this.state.context,this)),await((C=(N=this.options).onError)==null?void 0:C.call(N,k,n,this.state.context)),await((T=(L=Q(this,Cn).config).onSettled)==null?void 0:T.call(L,void 0,k,this.state.variables,this.state.context,this)),await((P=(S=this.options).onSettled)==null?void 0:P.call(S,void 0,k,n,this.state.context)),k}finally{Xe(this,qr,ni).call(this,{type:"error",error:k})}}finally{Q(this,Cn).runNext(this)}}},Hr=new WeakMap,Cn=new WeakMap,bo=new WeakMap,qr=new WeakSet,ni=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),on.batch(()=>{Q(this,Hr).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Cn).notify({mutation:this,type:"updated",action:n})})},N1);function xL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _s,Cr,bu,I1,wL=(I1=class extends Ru{constructor(e={}){super();Le(this,_s);Le(this,Cr);Le(this,bu);this.config=e,Ce(this,_s,new Set),Ce(this,Cr,new Map),Ce(this,bu,0)}build(e,n,r){const s=new vL({mutationCache:this,mutationId:++fd(this,bu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,_s).add(e);const n=jd(e);if(typeof n=="string"){const r=Q(this,Cr).get(n);r?r.push(e):Q(this,Cr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,_s).delete(e)){const n=jd(e);if(typeof n=="string"){const r=Q(this,Cr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,Cr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=jd(e);if(typeof n=="string"){const r=Q(this,Cr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=jd(e);if(typeof n=="string"){const s=(r=Q(this,Cr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){on.batch(()=>{Q(this,_s).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,_s).clear(),Q(this,Cr).clear()})}getAll(){return Array.from(Q(this,_s))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>G_(n,r))}findAll(e={}){return this.getAll().filter(n=>G_(e,n))}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return on.batch(()=>Promise.all(e.map(n=>n.continue().catch(On))))}},_s=new WeakMap,Cr=new WeakMap,bu=new WeakMap,I1);function jd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function X_(t){return{onFetch:(e,n)=>{var h,f,p,g,y;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},v=sC(e.options,e.fetchOptions),w=async(_,N,C)=>{if(m)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const T=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:N,direction:C?"backward":"forward",meta:e.options.meta};return x(M),M})(),S=await v(T),{maxPages:P}=e.options,k=C?lL:aL;return{pages:k(_.pages,S,P),pageParams:k(_.pageParams,N,P)}};if(s&&i.length){const _=s==="backward",N=_?_L:Z_,C={pages:i,pageParams:o},L=N(r,C);l=await w(C,L,_)}else{const _=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:Z_(r,l);if(c>0&&N==null)break;l=await w(l,N),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var m,x;return(x=(m=e.options).persister)==null?void 0:x.call(m,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Z_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _L(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var At,pi,mi,nl,rl,gi,sl,il,k1,EL=(k1=class{constructor(t={}){Le(this,At);Le(this,pi);Le(this,mi);Le(this,nl);Le(this,rl);Le(this,gi);Le(this,sl);Le(this,il);Ce(this,At,t.queryCache||new yL),Ce(this,pi,t.mutationCache||new wL),Ce(this,mi,t.defaultOptions||{}),Ce(this,nl,new Map),Ce(this,rl,new Map),Ce(this,gi,0)}mount(){fd(this,gi)._++,Q(this,gi)===1&&(Ce(this,sl,tx.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,At).onFocus())})),Ce(this,il,Gh.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,At).onOnline())})))}unmount(){var t,e;fd(this,gi)._--,Q(this,gi)===0&&((t=Q(this,sl))==null||t.call(this),Ce(this,sl,void 0),(e=Q(this,il))==null||e.call(this),Ce(this,il,void 0))}isFetching(t){return Q(this,At).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,At).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,At).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ri(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,At).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,At).get(r.queryHash),i=s==null?void 0:s.state.data,o=iL(e,i);if(o!==void 0)return Q(this,At).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return on.batch(()=>Q(this,At).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,At).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,At);on.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,At);return on.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=on.batch(()=>Q(this,At).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(On).catch(On)}invalidateQueries(t,e={}){return on.batch(()=>(Q(this,At).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=on.batch(()=>Q(this,At).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(On)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(On)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,At).build(this,e);return n.isStaleByTime(Ri(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(On).catch(On)}fetchInfiniteQuery(t){return t.behavior=X_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(On).catch(On)}ensureInfiniteQueryData(t){return t.behavior=X_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gh.isOnline()?Q(this,pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,At)}getMutationCache(){return Q(this,pi)}getDefaultOptions(){return Q(this,mi)}setDefaultOptions(t){Ce(this,mi,t)}setQueryDefaults(t,e){Q(this,nl).set(su(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,nl).values()],n={};return e.forEach(r=>{iu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,rl).set(su(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,rl).values()],n={};return e.forEach(r=>{iu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,mi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Jv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ex&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,mi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,At).clear(),Q(this,pi).clear()}},At=new WeakMap,pi=new WeakMap,mi=new WeakMap,nl=new WeakMap,rl=new WeakMap,gi=new WeakMap,sl=new WeakMap,il=new WeakMap,k1),Dn,Ze,Tu,Nn,To,ol,yi,vi,Su,al,ll,So,Co,xi,cl,st,mc,Zg,Jg,ey,ty,ny,ry,sy,uC,A1,bL=(A1=class extends Ru{constructor(e,n){super();Le(this,st);Le(this,Dn);Le(this,Ze);Le(this,Tu);Le(this,Nn);Le(this,To);Le(this,ol);Le(this,yi);Le(this,vi);Le(this,Su);Le(this,al);Le(this,ll);Le(this,So);Le(this,Co);Le(this,xi);Le(this,cl,new Set);this.options=n,Ce(this,Dn,e),Ce(this,vi,null),Ce(this,yi,Xg()),this.options.experimental_prefetchInRender||Q(this,yi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,Ze).addObserver(this),J_(Q(this,Ze),this.options)?Xe(this,st,mc).call(this):this.updateResult(),Xe(this,st,ty).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iy(Q(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iy(Q(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xe(this,st,ny).call(this),Xe(this,st,ry).call(this),Q(this,Ze).removeObserver(this)}setOptions(e){const n=this.options,r=Q(this,Ze);if(this.options=Q(this,Dn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ar(this.options.enabled,Q(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xe(this,st,sy).call(this),Q(this,Ze).setOptions(this.options),n._defaulted&&!Gg(this.options,n)&&Q(this,Dn).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,Ze),observer:this});const s=this.hasListeners();s&&eE(Q(this,Ze),r,this.options,n)&&Xe(this,st,mc).call(this),this.updateResult(),s&&(Q(this,Ze)!==r||ar(this.options.enabled,Q(this,Ze))!==ar(n.enabled,Q(this,Ze))||Ri(this.options.staleTime,Q(this,Ze))!==Ri(n.staleTime,Q(this,Ze)))&&Xe(this,st,Zg).call(this);const i=Xe(this,st,Jg).call(this);s&&(Q(this,Ze)!==r||ar(this.options.enabled,Q(this,Ze))!==ar(n.enabled,Q(this,Ze))||i!==Q(this,xi))&&Xe(this,st,ey).call(this,i)}getOptimisticResult(e){const n=Q(this,Dn).getQueryCache().build(Q(this,Dn),e),r=this.createResult(n,e);return SL(this,r)&&(Ce(this,Nn,r),Ce(this,ol,this.options),Ce(this,To,Q(this,Ze).state)),r}getCurrentResult(){return Q(this,Nn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Q(this,cl).add(e)}getCurrentQuery(){return Q(this,Ze)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Q(this,Dn).defaultQueryOptions(e),r=Q(this,Dn).getQueryCache().build(Q(this,Dn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Xe(this,st,mc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Nn)))}createResult(e,n){var P;const r=Q(this,Ze),s=this.options,i=Q(this,Nn),o=Q(this,To),l=Q(this,ol),u=e!==r?e.state:Q(this,Tu),{state:h}=e;let f={...h},p=!1,g;if(n._optimisticResults){const k=this.hasListeners(),M=!k&&J_(e,n),R=k&&eE(e,r,n,s);(M||R)&&(f={...f,...cC(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:x}=f;g=f.data;let v=!1;if(n.placeholderData!==void 0&&g===void 0&&x==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(k=i.data,v=!0):k=typeof n.placeholderData=="function"?n.placeholderData((P=Q(this,ll))==null?void 0:P.state.data,Q(this,ll)):n.placeholderData,k!==void 0&&(x="success",g=Yg(i==null?void 0:i.data,k,n),p=!0)}if(n.select&&g!==void 0&&!v)if(i&&g===(o==null?void 0:o.data)&&n.select===Q(this,Su))g=Q(this,al);else try{Ce(this,Su,n.select),g=n.select(g),g=Yg(i==null?void 0:i.data,g,n),Ce(this,al,g),Ce(this,vi,null)}catch(k){Ce(this,vi,k)}Q(this,vi)&&(y=Q(this,vi),g=Q(this,al),m=Date.now(),x="error");const w=f.fetchStatus==="fetching",_=x==="pending",N=x==="error",C=_&&w,L=g!==void 0,S={status:x,fetchStatus:f.fetchStatus,isPending:_,isSuccess:x==="success",isError:N,isInitialLoading:C,isLoading:C,data:g,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:N&&!L,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:N&&L,isStale:nx(e,n),refetch:this.refetch,promise:Q(this,yi),isEnabled:ar(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},M=()=>{const D=Ce(this,yi,S.promise=Xg());k(D)},R=Q(this,yi);switch(R.status){case"pending":e.queryHash===r.queryHash&&k(R);break;case"fulfilled":(S.status==="error"||S.data!==R.value)&&M();break;case"rejected":(S.status!=="error"||S.error!==R.reason)&&M();break}}return S}updateResult(){const e=Q(this,Nn),n=this.createResult(Q(this,Ze),this.options);if(Ce(this,To,Q(this,Ze).state),Ce(this,ol,this.options),Q(this,To).data!==void 0&&Ce(this,ll,Q(this,Ze)),Gg(n,e))return;Ce(this,Nn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Q(this,cl).size)return!0;const o=new Set(i??Q(this,cl));return this.options.throwOnError&&o.add("error"),Object.keys(Q(this,Nn)).some(l=>{const c=l;return Q(this,Nn)[c]!==e[c]&&o.has(c)})};Xe(this,st,uC).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xe(this,st,ty).call(this)}},Dn=new WeakMap,Ze=new WeakMap,Tu=new WeakMap,Nn=new WeakMap,To=new WeakMap,ol=new WeakMap,yi=new WeakMap,vi=new WeakMap,Su=new WeakMap,al=new WeakMap,ll=new WeakMap,So=new WeakMap,Co=new WeakMap,xi=new WeakMap,cl=new WeakMap,st=new WeakSet,mc=function(e){Xe(this,st,sy).call(this);let n=Q(this,Ze).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(On)),n},Zg=function(){Xe(this,st,ny).call(this);const e=Ri(this.options.staleTime,Q(this,Ze));if(Lo||Q(this,Nn).isStale||!Kg(e))return;const r=nC(Q(this,Nn).dataUpdatedAt,e)+1;Ce(this,So,setTimeout(()=>{Q(this,Nn).isStale||this.updateResult()},r))},Jg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,Ze)):this.options.refetchInterval)??!1},ey=function(e){Xe(this,st,ry).call(this),Ce(this,xi,e),!(Lo||ar(this.options.enabled,Q(this,Ze))===!1||!Kg(Q(this,xi))||Q(this,xi)===0)&&Ce(this,Co,setInterval(()=>{(this.options.refetchIntervalInBackground||tx.isFocused())&&Xe(this,st,mc).call(this)},Q(this,xi)))},ty=function(){Xe(this,st,Zg).call(this),Xe(this,st,ey).call(this,Xe(this,st,Jg).call(this))},ny=function(){Q(this,So)&&(clearTimeout(Q(this,So)),Ce(this,So,void 0))},ry=function(){Q(this,Co)&&(clearInterval(Q(this,Co)),Ce(this,Co,void 0))},sy=function(){const e=Q(this,Dn).getQueryCache().build(Q(this,Dn),this.options);if(e===Q(this,Ze))return;const n=Q(this,Ze);Ce(this,Ze,e),Ce(this,Tu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},uC=function(e){on.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Q(this,Nn))}),Q(this,Dn).getQueryCache().notify({query:Q(this,Ze),type:"observerResultsUpdated"})})},A1);function TL(t,e){return ar(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function J_(t,e){return TL(t,e)||t.state.data!==void 0&&iy(t,e,e.refetchOnMount)}function iy(t,e,n){if(ar(e.enabled,t)!==!1&&Ri(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&nx(t,e)}return!1}function eE(t,e,n,r){return(t!==e||ar(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&nx(t,n)}function nx(t,e){return ar(e.enabled,t)!==!1&&t.isStaleByTime(Ri(e.staleTime,t))}function SL(t,e){return!Gg(t.getCurrentResult(),e)}var dC=E.createContext(void 0),CL=t=>{const e=E.useContext(dC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},NL=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(dC.Provider,{value:t,children:e})),hC=E.createContext(!1),IL=()=>E.useContext(hC);hC.Provider;function kL(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var AL=E.createContext(kL()),RL=()=>E.useContext(AL),jL=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},PL=t=>{E.useEffect(()=>{t.clearReset()},[t])},DL=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||cL(n,[t.error,r])),OL=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},LL=(t,e)=>t.isLoading&&t.isFetching&&!e,ML=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,tE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function FL(t,e,n){var f,p,g,y,m;const r=IL(),s=RL(),i=CL(),o=i.defaultQueryOptions(t);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",OL(o),jL(o,s),PL(s);const l=!i.getQueryCache().get(o.queryHash),[c]=E.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(x=>{const v=h?c.subscribe(on.batchCalls(x)):On;return c.updateResult(),v},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),E.useEffect(()=>{c.setOptions(o)},[o,c]),ML(o,u))throw tE(o,c,s);if(DL({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((y=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||y.call(g,o,u),o.experimental_prefetchInRender&&!Lo&&LL(u,r)){const x=l?tE(o,c,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;x==null||x.catch(On).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Qh(t,e){return FL(t,bL)}async function VL(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const UL=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return await VL(n),await n.json()},zL=new EL({defaultOptions:{queries:{queryFn:UL({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),BL=1,$L=1e6;let Cm=0;function WL(){return Cm=(Cm+1)%Number.MAX_SAFE_INTEGER,Cm.toString()}const Nm=new Map,nE=t=>{if(Nm.has(t))return;const e=setTimeout(()=>{Nm.delete(t),jc({type:"REMOVE_TOAST",toastId:t})},$L);Nm.set(t,e)},HL=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,BL)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?nE(n):t.toasts.forEach(r=>{nE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ah=[];let lh={toasts:[]};function jc(t){lh=HL(lh,t),ah.forEach(e=>{e(lh)})}function qL({...t}){const e=WL(),n=s=>jc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>jc({type:"DISMISS_TOAST",toastId:e});return jc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Hn(){const[t,e]=E.useState(lh);return E.useEffect(()=>(ah.push(e),()=>{const n=ah.indexOf(e);n>-1&&ah.splice(n,1)}),[t]),{...t,toast:qL,dismiss:n=>jc({type:"DISMISS_TOAST",toastId:n})}}function ke(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function rE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=rE(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():rE(t[s],null)}}}}function Qe(...t){return E.useCallback(fC(...t),t)}function KL(t,e){const n=E.createContext(e),r=i=>{const{children:o,...l}=i,c=E.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=E.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function yr(t,e=[]){let n=[];function r(i,o){const l=E.createContext(o),c=n.length;n=[...n,o];const u=f=>{var v;const{scope:p,children:g,...y}=f,m=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,x=E.useMemo(()=>y,Object.values(y));return a.jsx(m.Provider,{value:x,children:g})};u.displayName=i+"Provider";function h(f,p){var m;const g=((m=p==null?void 0:p[t])==null?void 0:m[c])||l,y=E.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>E.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,GL(s,...e)]}function GL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vl(t){const e=YL(t),n=E.forwardRef((r,s)=>{const{children:i,...o}=r,l=E.Children.toArray(i),c=l.find(XL);if(c){const u=c.props.children,h=l.map(f=>f===c?E.Children.count(u)>1?E.Children.only(null):E.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:E.isValidElement(u)?E.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var QL=vl("Slot");function YL(t){const e=E.forwardRef((n,r)=>{const{children:s,...i}=n;if(E.isValidElement(s)){const o=JL(s),l=ZL(i,s.props);return s.type!==E.Fragment&&(l.ref=r?fC(r,o):o),E.cloneElement(s,l)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pC=Symbol("radix.slottable");function mC(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pC,e}function XL(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pC}function ZL(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function JL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function rx(t){const e=t+"CollectionProvider",[n,r]=yr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:x,children:v}=m,w=ti.useRef(null),_=ti.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:_,collectionRef:w,children:v})};o.displayName=e;const l=t+"CollectionSlot",c=vl(l),u=ti.forwardRef((m,x)=>{const{scope:v,children:w}=m,_=i(l,v),N=Qe(x,_.collectionRef);return a.jsx(c,{ref:N,children:w})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=vl(h),g=ti.forwardRef((m,x)=>{const{scope:v,children:w,..._}=m,N=ti.useRef(null),C=Qe(x,N),L=i(h,v);return ti.useEffect(()=>(L.itemMap.set(N,{ref:N,..._}),()=>void L.itemMap.delete(N))),a.jsx(p,{[f]:"",ref:C,children:w})});g.displayName=h;function y(m){const x=i(t+"CollectionConsumer",m);return ti.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((L,T)=>_.indexOf(L.ref.current)-_.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},y,r]}var e4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=e4.reduce((t,e)=>{const n=vl(`Primitive.${e}`),r=E.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function gC(t,e){t&&Jo.flushSync(()=>t.dispatchEvent(e))}function Wt(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function t4(t,e=globalThis==null?void 0:globalThis.document){const n=Wt(t);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var n4="DismissableLayer",oy="dismissableLayer.update",r4="dismissableLayer.pointerDownOutside",s4="dismissableLayer.focusOutside",sE,yC=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ju=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=E.useContext(yC),[h,f]=E.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=E.useState({}),y=Qe(e,T=>f(T)),m=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(x),w=h?m.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=v,C=o4(T=>{const S=T.target,P=[...u.branches].some(k=>k.contains(S));!N||P||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},p),L=a4(T=>{const S=T.target;[...u.branches].some(k=>k.contains(S))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},p);return t4(T=>{w===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},p),E.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(sE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),iE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=sE)}},[h,p,n,u]),E.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),iE())},[h,u]),E.useEffect(()=>{const T=()=>g({});return document.addEventListener(oy,T),()=>document.removeEventListener(oy,T)},[]),a.jsx(je.div,{...c,ref:y,style:{pointerEvents:_?N?"auto":"none":void 0,...t.style},onFocusCapture:ke(t.onFocusCapture,L.onFocusCapture),onBlurCapture:ke(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ke(t.onPointerDownCapture,C.onPointerDownCapture)})});ju.displayName=n4;var i4="DismissableLayerBranch",vC=E.forwardRef((t,e)=>{const n=E.useContext(yC),r=E.useRef(null),s=Qe(e,r);return E.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(je.div,{...t,ref:s})});vC.displayName=i4;function o4(t,e=globalThis==null?void 0:globalThis.document){const n=Wt(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){xC(r4,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function a4(t,e=globalThis==null?void 0:globalThis.document){const n=Wt(t),r=E.useRef(!1);return E.useEffect(()=>{const s=i=>{i.target&&!r.current&&xC(s4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iE(){const t=new CustomEvent(oy);document.dispatchEvent(t)}function xC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?gC(s,i):s.dispatchEvent(i)}var l4=ju,c4=vC,Ut=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},u4="Portal",$f=E.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=E.useState(!1);Ut(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?kO.createPortal(a.jsx(je.div,{...r,ref:e}),o):null});$f.displayName=u4;function d4(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var vr=t=>{const{present:e,children:n}=t,r=h4(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),i=Qe(r.ref,f4(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:i}):null};vr.displayName="Presence";function h4(t){const[e,n]=E.useState(),r=E.useRef(null),s=E.useRef(t),i=E.useRef("none"),o=t?"mounted":"unmounted",[l,c]=d4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const u=Pd(r.current);i.current=l==="mounted"?u:"none"},[l]),Ut(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Pd(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Ut(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const m=Pd(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&m&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=g=>{g.target===e&&(i.current=Pd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:E.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Pd(t){return(t==null?void 0:t.animationName)||"none"}function f4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var p4=iv[" useInsertionEffect ".trim().toString()]||Ut;function Mo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=m4({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=E.useRef(t!==void 0);E.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=E.useCallback(h=>{var f;if(l){const p=g4(h)?h(t):h;p!==t&&((f=o.current)==null||f.call(o,p))}else i(h)},[l,t,i,o]);return[c,u]}function m4({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),s=E.useRef(n),i=E.useRef(e);return p4(()=>{i.current=e},[e]),E.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function g4(t){return typeof t=="function"}var wC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),y4="VisuallyHidden",Wf=E.forwardRef((t,e)=>a.jsx(je.span,{...t,ref:e,style:{...wC,...t.style}}));Wf.displayName=y4;var v4=Wf,sx="ToastProvider",[ix,x4,w4]=rx("Toast"),[_C,rH]=yr("Toast",[w4]),[_4,Hf]=_C(sx),EC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=E.useState(null),[u,h]=E.useState(0),f=E.useRef(!1),p=E.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${sx}\`. Expected non-empty \`string\`.`),a.jsx(ix.Provider,{scope:e,children:a.jsx(_4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:E.useCallback(()=>h(g=>g+1),[]),onToastRemove:E.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};EC.displayName=sx;var bC="ToastViewport",E4=["F8"],ay="toast.viewportPause",ly="toast.viewportResume",TC=E.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=E4,label:s="Notifications ({hotkey})",...i}=t,o=Hf(bC,n),l=x4(n),c=E.useRef(null),u=E.useRef(null),h=E.useRef(null),f=E.useRef(null),p=Qe(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;E.useEffect(()=>{const x=v=>{var _;r.length!==0&&r.every(N=>v[N]||v.code===N)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),E.useEffect(()=>{const x=c.current,v=f.current;if(y&&x&&v){const w=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(ay);v.dispatchEvent(L),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(ly);v.dispatchEvent(L),o.isClosePausedRef.current=!1}},N=L=>{!x.contains(L.relatedTarget)&&_()},C=()=>{x.contains(document.activeElement)||_()};return x.addEventListener("focusin",w),x.addEventListener("focusout",N),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",C),window.addEventListener("blur",w),window.addEventListener("focus",_),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",N),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",C),window.removeEventListener("blur",w),window.removeEventListener("focus",_)}}},[y,o.isClosePausedRef]);const m=E.useCallback(({tabbingDirection:x})=>{const w=l().map(_=>{const N=_.ref.current,C=[N,...O4(N)];return x==="forwards"?C:C.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return E.useEffect(()=>{const x=f.current;if(x){const v=w=>{var C,L,T;const _=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!_){const S=document.activeElement,P=w.shiftKey;if(w.target===x&&P){(C=u.current)==null||C.focus();return}const R=m({tabbingDirection:P?"backwards":"forwards"}),D=R.findIndex(I=>I===S);Im(R.slice(D+1))?w.preventDefault():P?(L=u.current)==null||L.focus():(T=h.current)==null||T.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[l,m]),a.jsxs(c4,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&a.jsx(cy,{ref:u,onFocusFromOutsideViewport:()=>{const x=m({tabbingDirection:"forwards"});Im(x)}}),a.jsx(ix.Slot,{scope:n,children:a.jsx(je.ol,{tabIndex:-1,...i,ref:p})}),y&&a.jsx(cy,{ref:h,onFocusFromOutsideViewport:()=>{const x=m({tabbingDirection:"backwards"});Im(x)}})]})});TC.displayName=bC;var SC="ToastFocusProxy",cy=E.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Hf(SC,n);return a.jsx(Wf,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});cy.displayName=SC;var Pu="Toast",b4="toast.swipeStart",T4="toast.swipeMove",S4="toast.swipeCancel",C4="toast.swipeEnd",CC=E.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=Mo({prop:r,defaultProp:s??!0,onChange:i,caller:Pu});return a.jsx(vr,{present:n||l,children:a.jsx(k4,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Wt(t.onPause),onResume:Wt(t.onResume),onSwipeStart:ke(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ke(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});CC.displayName=Pu;var[N4,I4]=_C(Pu,{onClose(){}}),k4=E.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...y}=t,m=Hf(Pu,n),[x,v]=E.useState(null),w=Qe(e,I=>v(I)),_=E.useRef(null),N=E.useRef(null),C=s||m.duration,L=E.useRef(0),T=E.useRef(C),S=E.useRef(0),{onToastAdd:P,onToastRemove:k}=m,M=Wt(()=>{var q;(x==null?void 0:x.contains(document.activeElement))&&((q=m.viewport)==null||q.focus()),o()}),R=E.useCallback(I=>{!I||I===1/0||(window.clearTimeout(S.current),L.current=new Date().getTime(),S.current=window.setTimeout(M,I))},[M]);E.useEffect(()=>{const I=m.viewport;if(I){const q=()=>{R(T.current),u==null||u()},oe=()=>{const Y=new Date().getTime()-L.current;T.current=T.current-Y,window.clearTimeout(S.current),c==null||c()};return I.addEventListener(ay,oe),I.addEventListener(ly,q),()=>{I.removeEventListener(ay,oe),I.removeEventListener(ly,q)}}},[m.viewport,C,c,u,R]),E.useEffect(()=>{i&&!m.isClosePausedRef.current&&R(C)},[i,C,m.isClosePausedRef,R]),E.useEffect(()=>(P(),()=>k()),[P,k]);const D=E.useMemo(()=>x?PC(x):null,[x]);return m.viewport?a.jsxs(a.Fragment,{children:[D&&a.jsx(A4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),a.jsx(N4,{scope:n,onClose:M,children:Jo.createPortal(a.jsx(ix.ItemSlot,{scope:n,children:a.jsx(l4,{asChild:!0,onEscapeKeyDown:ke(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(je.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ke(t.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:ke(t.onPointerDown,I=>{I.button===0&&(_.current={x:I.clientX,y:I.clientY})}),onPointerMove:ke(t.onPointerMove,I=>{if(!_.current)return;const q=I.clientX-_.current.x,oe=I.clientY-_.current.y,Y=!!N.current,U=["left","right"].includes(m.swipeDirection),$=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,J=U?$(0,q):0,B=U?0:$(0,oe),K=I.pointerType==="touch"?10:2,ae={x:J,y:B},ue={originalEvent:I,delta:ae};Y?(N.current=ae,Dd(T4,f,ue,{discrete:!1})):oE(ae,m.swipeDirection,K)?(N.current=ae,Dd(b4,h,ue,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(q)>K||Math.abs(oe)>K)&&(_.current=null)}),onPointerUp:ke(t.onPointerUp,I=>{const q=N.current,oe=I.target;if(oe.hasPointerCapture(I.pointerId)&&oe.releasePointerCapture(I.pointerId),N.current=null,_.current=null,q){const Y=I.currentTarget,U={originalEvent:I,delta:q};oE(q,m.swipeDirection,m.swipeThreshold)?Dd(C4,g,U,{discrete:!0}):Dd(S4,p,U,{discrete:!0}),Y.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),A4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Hf(Pu,e),[i,o]=E.useState(!1),[l,c]=E.useState(!1);return P4(()=>o(!0)),E.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx($f,{asChild:!0,children:a.jsx(Wf,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},R4="ToastTitle",NC=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(je.div,{...r,ref:e})});NC.displayName=R4;var j4="ToastDescription",IC=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(je.div,{...r,ref:e})});IC.displayName=j4;var kC="ToastAction",AC=E.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(jC,{altText:n,asChild:!0,children:a.jsx(ox,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${kC}\`. Expected non-empty \`string\`.`),null)});AC.displayName=kC;var RC="ToastClose",ox=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=I4(RC,n);return a.jsx(jC,{asChild:!0,children:a.jsx(je.button,{type:"button",...r,ref:e,onClick:ke(t.onClick,s.onClose)})})});ox.displayName=RC;var jC=E.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function PC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),D4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...PC(r))}}),e}function Dd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?gC(s,i):s.dispatchEvent(i)}var oE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function P4(t=()=>{}){const e=Wt(t);Ut(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function D4(t){return t.nodeType===t.ELEMENT_NODE}function O4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Im(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var L4=EC,DC=TC,OC=CC,LC=NC,MC=IC,FC=AC,VC=ox;function UC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=UC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=UC(t))&&(r&&(r+=" "),r+=e);return r}const aE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,lE=zC,qf=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return lE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=aE(h)||aE(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(y=>{let[m,x]=y;return Array.isArray(x)?x.includes({...i,...l}[m]):{...i,...l}[m]===x})?[...u,f,p]:u},[]);return lE(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>E.createElement("svg",{ref:c,...F4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:BC("lucide",s),...l},[...o.map(([u,h])=>E.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(t,e)=>{const n=E.forwardRef(({className:r,...s},i)=>E.createElement(V4,{ref:i,iconNode:e,className:BC(`lucide-${M4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ye("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=Ye("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Ye("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ye("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=Ye("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=Ye("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=Ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=Ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Ye("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ux="-",G4=t=>{const e=Y4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(ux);return l[0]===""&&l.length!==1&&l.shift(),qC(l,e)||Q4(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},qC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?qC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(ux);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},hE=/^\[(.+)\]$/,Q4=t=>{if(hE.test(t)){const e=hE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Y4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Z4(Object.entries(t.classGroups),n).forEach(([i,o])=>{hy(o,r,i,e)}),r},hy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:fE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(X4(s)){hy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{hy(o,fE(e,i),n,r)})})},fE=(t,e)=>{let n=t;return e.split(ux).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},X4=t=>t.isThemeGetter,Z4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,J4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},KC="!",eM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let x=0;x<l.length;x++){let v=l[x];if(u===0){if(v===s&&(r||l.slice(x,x+i)===e)){c.push(l.slice(h,x)),h=x+i;continue}if(v==="/"){f=x;continue}}v==="["?u++:v==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(KC),y=g?p.substring(1):p,m=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:m}};return n?l=>n({className:l,parseClassName:o}):o},tM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},nM=t=>({cache:J4(t.cacheSize),parseClassName:eM(t),...G4(t)}),rM=/\s+/,sM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(rM);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let y=!!g,m=r(y?p.substring(0,g):p);if(!m){if(!y){l=u+(l.length>0?" "+l:l);continue}if(m=r(p),!m){l=u+(l.length>0?" "+l:l);continue}y=!1}const x=tM(h).join(":"),v=f?x+KC:x,w=v+m;if(i.includes(w))continue;i.push(w);const _=s(m,y);for(let N=0;N<_.length;++N){const C=_[N];i.push(v+C)}l=u+(l.length>0?" "+l:l)}return l};function iM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=GC(e))&&(r&&(r+=" "),r+=n);return r}const GC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=GC(t[r]))&&(n&&(n+=" "),n+=e);return n};function oM(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=nM(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=sM(c,n);return s(c,h),h}return function(){return i(iM.apply(null,arguments))}}const xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},QC=/^\[(?:([a-z-]+):)?(.+)\]$/i,aM=/^\d+\/\d+$/,lM=new Set(["px","full","screen"]),cM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ys=t=>za(t)||lM.has(t)||aM.test(t),Zs=t=>jl(t,"length",_M),za=t=>!!t&&!Number.isNaN(Number(t)),km=t=>jl(t,"number",za),lc=t=>!!t&&Number.isInteger(Number(t)),pM=t=>t.endsWith("%")&&za(t.slice(0,-1)),Ue=t=>QC.test(t),Js=t=>cM.test(t),mM=new Set(["length","size","percentage"]),gM=t=>jl(t,mM,YC),yM=t=>jl(t,"position",YC),vM=new Set(["image","url"]),xM=t=>jl(t,vM,bM),wM=t=>jl(t,"",EM),cc=()=>!0,jl=(t,e,n)=>{const r=QC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},_M=t=>uM.test(t)&&!dM.test(t),YC=()=>!1,EM=t=>hM.test(t),bM=t=>fM.test(t),TM=()=>{const t=xt("colors"),e=xt("spacing"),n=xt("blur"),r=xt("brightness"),s=xt("borderColor"),i=xt("borderRadius"),o=xt("borderSpacing"),l=xt("borderWidth"),c=xt("contrast"),u=xt("grayscale"),h=xt("hueRotate"),f=xt("invert"),p=xt("gap"),g=xt("gradientColorStops"),y=xt("gradientColorStopPositions"),m=xt("inset"),x=xt("margin"),v=xt("opacity"),w=xt("padding"),_=xt("saturate"),N=xt("scale"),C=xt("sepia"),L=xt("skew"),T=xt("space"),S=xt("translate"),P=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ue,e],R=()=>[Ue,e],D=()=>["",ys,Zs],I=()=>["auto",za,Ue],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ue],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[za,Ue];return{cacheSize:500,separator:":",theme:{colors:[cc],spacing:[ys,Zs],blur:["none","",Js,Ue],brightness:B(),borderColor:[t],borderRadius:["none","","full",Js,Ue],borderSpacing:R(),borderWidth:D(),contrast:B(),grayscale:$(),hueRotate:B(),invert:$(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[pM,Zs],inset:M(),margin:M(),opacity:B(),padding:R(),saturate:B(),scale:B(),sepia:$(),skew:B(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[Js]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Ue]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lc,Ue]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",lc,Ue]}],"grid-cols":[{"grid-cols":[cc]}],"col-start-end":[{col:["auto",{span:["full",lc,Ue]},Ue]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[cc]}],"row-start-end":[{row:["auto",{span:[lc,Ue]},Ue]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,e]}],"min-w":[{"min-w":[Ue,e,"min","max","fit"]}],"max-w":[{"max-w":[Ue,e,"none","full","min","max","fit","prose",{screen:[Js]},Js]}],h:[{h:[Ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Js,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",km]}],"font-family":[{font:[cc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",za,km]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ys,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ys,Zs]}],"underline-offset":[{"underline-offset":["auto",ys,Ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),yM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:oe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[ys,Ue]}],"outline-w":[{outline:[ys,Zs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ys,Zs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Js,wM]}],"shadow-color":[{shadow:[cc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Js,Ue]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[lc,Ue]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ys,Zs,km]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SM=oM(TM);function Pe(...t){return SM(zC(t))}const CM=L4,XC=E.forwardRef(({className:t,...e},n)=>a.jsx(DC,{ref:n,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));XC.displayName=DC.displayName;const NM=qf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZC=E.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(OC,{ref:r,className:Pe(NM({variant:e}),t),...n}));ZC.displayName=OC.displayName;const IM=E.forwardRef(({className:t,...e},n)=>a.jsx(FC,{ref:n,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));IM.displayName=FC.displayName;const JC=E.forwardRef(({className:t,...e},n)=>a.jsx(VC,{ref:n,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(ea,{className:"h-4 w-4"})}));JC.displayName=VC.displayName;const eN=E.forwardRef(({className:t,...e},n)=>a.jsx(LC,{ref:n,className:Pe("text-sm font-semibold",t),...e}));eN.displayName=LC.displayName;const tN=E.forwardRef(({className:t,...e},n)=>a.jsx(MC,{ref:n,className:Pe("text-sm opacity-90",t),...e}));tN.displayName=MC.displayName;function kM(){const{toasts:t}=Hn();return a.jsxs(CM,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(ZC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(eN,{children:n}),r&&a.jsx(tN,{children:r})]}),s,a.jsx(JC,{})]},e)}),a.jsx(XC,{})]})}var AM=iv[" useId ".trim().toString()]||(()=>{}),RM=0;function ji(t){const[e,n]=E.useState(AM());return Ut(()=>{n(r=>r??String(RM++))},[t]),e?`radix-${e}`:""}const jM=["top","right","bottom","left"],zi=Math.min,Gn=Math.max,Zh=Math.round,Od=Math.floor,es=t=>({x:t,y:t}),PM={left:"right",right:"left",bottom:"top",top:"bottom"},DM={start:"end",end:"start"};function fy(t,e,n){return Gn(t,zi(e,n))}function Ls(t,e){return typeof t=="function"?t(e):t}function Ms(t){return t.split("-")[0]}function Pl(t){return t.split("-")[1]}function dx(t){return t==="x"?"y":"x"}function hx(t){return t==="y"?"height":"width"}const OM=new Set(["top","bottom"]);function Qr(t){return OM.has(Ms(t))?"y":"x"}function fx(t){return dx(Qr(t))}function LM(t,e,n){n===void 0&&(n=!1);const r=Pl(t),s=fx(t),i=hx(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Jh(o)),[o,Jh(o)]}function MM(t){const e=Jh(t);return[py(t),e,py(e)]}function py(t){return t.replace(/start|end/g,e=>DM[e])}const pE=["left","right"],mE=["right","left"],FM=["top","bottom"],VM=["bottom","top"];function UM(t,e,n){switch(t){case"top":case"bottom":return n?e?mE:pE:e?pE:mE;case"left":case"right":return e?FM:VM;default:return[]}}function zM(t,e,n,r){const s=Pl(t);let i=UM(Ms(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(py)))),i}function Jh(t){return t.replace(/left|right|bottom|top/g,e=>PM[e])}function BM(t){return{top:0,right:0,bottom:0,left:0,...t}}function nN(t){return typeof t!="number"?BM(t):{top:t,right:t,bottom:t,left:t}}function ef(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gE(t,e,n){let{reference:r,floating:s}=t;const i=Qr(e),o=fx(e),l=hx(o),c=Ms(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Pl(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const $M=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=gE(u,r,c),p=r,g={},y=0;for(let m=0;m<l.length;m++){const{name:x,fn:v}=l[m],{x:w,y:_,data:N,reset:C}=await v({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=_??f,g={...g,[x]:{...g[x],...N}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:h,y:f}=gE(u,p,c)),m=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function cu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Ls(e,t),y=nN(g),x=l[p?f==="floating"?"reference":"floating":f],v=ef(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},C=ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:_,strategy:c}):w);return{top:(v.top-C.top+y.top)/N.y,bottom:(C.bottom-v.bottom+y.bottom)/N.y,left:(v.left-C.left+y.left)/N.x,right:(C.right-v.right+y.right)/N.x}}const WM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Ls(t,e)||{};if(u==null)return{};const f=nN(h),p={x:n,y:r},g=fx(s),y=hx(g),m=await o.getDimensions(u),x=g==="y",v=x?"top":"left",w=x?"bottom":"right",_=x?"clientHeight":"clientWidth",N=i.reference[y]+i.reference[g]-p[g]-i.floating[y],C=p[g]-i.reference[g],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=L?L[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(L)))&&(T=l.floating[_]||i.floating[y]);const S=N/2-C/2,P=T/2-m[y]/2-1,k=zi(f[v],P),M=zi(f[w],P),R=k,D=T-m[y]-M,I=T/2-m[y]/2+S,q=fy(R,I,D),oe=!c.arrow&&Pl(s)!=null&&I!==q&&i.reference[y]/2-(I<R?k:M)-m[y]/2<0,Y=oe?I<R?I-R:I-D:0;return{[g]:p[g]+Y,data:{[g]:q,centerOffset:I-q-Y,...oe&&{alignmentOffset:Y}},reset:oe}}}),HM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...x}=Ls(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Ms(s),w=Qr(l),_=Ms(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!m?[Jh(l)]:MM(l)),L=y!=="none";!p&&L&&C.push(...zM(l,m,y,N));const T=[l,...C],S=await cu(e,x),P=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&P.push(S[v]),f){const I=LM(s,o,N);P.push(S[I[0]],S[I[1]])}if(k=[...k,{placement:s,overflows:P}],!P.every(I=>I<=0)){var M,R;const I=(((M=i.flip)==null?void 0:M.index)||0)+1,q=T[I];if(q&&(!(f==="alignment"?w!==Qr(q):!1)||k.every(U=>Qr(U.placement)===w?U.overflows[0]>0:!0)))return{data:{index:I,overflows:k},reset:{placement:q}};let oe=(R=k.filter(Y=>Y.overflows[0]<=0).sort((Y,U)=>Y.overflows[1]-U.overflows[1])[0])==null?void 0:R.placement;if(!oe)switch(g){case"bestFit":{var D;const Y=(D=k.filter(U=>{if(L){const $=Qr(U.placement);return $===w||$==="y"}return!0}).map(U=>[U.placement,U.overflows.filter($=>$>0).reduce(($,J)=>$+J,0)]).sort((U,$)=>U[1]-$[1])[0])==null?void 0:D[0];Y&&(oe=Y);break}case"initialPlacement":oe=l;break}if(s!==oe)return{reset:{placement:oe}}}return{}}}};function yE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vE(t){return jM.some(e=>t[e]>=0)}const qM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ls(t,e);switch(r){case"referenceHidden":{const i=await cu(e,{...s,elementContext:"reference"}),o=yE(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vE(o)}}}case"escaped":{const i=await cu(e,{...s,altBoundary:!0}),o=yE(i,n.floating);return{data:{escapedOffsets:o,escaped:vE(o)}}}default:return{}}}}},rN=new Set(["left","top"]);async function KM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ms(n),l=Pl(n),c=Qr(n)==="y",u=rN.has(o)?-1:1,h=i&&c?-1:1,f=Ls(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(g=l==="end"?y*-1:y),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const GM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await KM(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},QM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...c}=Ls(t,e),u={x:n,y:r},h=await cu(e,c),f=Qr(Ms(s)),p=dx(f);let g=u[p],y=u[f];if(i){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",w=g+h[x],_=g-h[v];g=fy(w,g,_)}if(o){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=y+h[x],_=y-h[v];y=fy(w,y,_)}const m=l.fn({...e,[p]:g,[f]:y});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[p]:i,[f]:o}}}}}},YM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ls(t,e),h={x:n,y:r},f=Qr(s),p=dx(f);let g=h[p],y=h[f];const m=Ls(l,e),x=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const _=p==="y"?"height":"width",N=i.reference[p]-i.floating[_]+x.mainAxis,C=i.reference[p]+i.reference[_]-x.mainAxis;g<N?g=N:g>C&&(g=C)}if(u){var v,w;const _=p==="y"?"width":"height",N=rN.has(Ms(s)),C=i.reference[f]-i.floating[_]+(N&&((v=o.offset)==null?void 0:v[f])||0)+(N?0:x.crossAxis),L=i.reference[f]+i.reference[_]+(N?0:((w=o.offset)==null?void 0:w[f])||0)-(N?x.crossAxis:0);y<C?y=C:y>L&&(y=L)}return{[p]:g,[f]:y}}}},XM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Ls(t,e),h=await cu(e,u),f=Ms(s),p=Pl(s),g=Qr(s)==="y",{width:y,height:m}=i.floating;let x,v;f==="top"||f==="bottom"?(x=f,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,x=p==="end"?"top":"bottom");const w=m-h.top-h.bottom,_=y-h.left-h.right,N=zi(m-h[x],w),C=zi(y-h[v],_),L=!e.middlewareData.shift;let T=N,S=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),L&&!p){const k=Gn(h.left,0),M=Gn(h.right,0),R=Gn(h.top,0),D=Gn(h.bottom,0);g?S=y-2*(k!==0||M!==0?k+M:Gn(h.left,h.right)):T=m-2*(R!==0||D!==0?R+D:Gn(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:T});const P=await o.getDimensions(l.floating);return y!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function Gf(){return typeof window<"u"}function Dl(t){return sN(t)?(t.nodeName||"").toLowerCase():"#document"}function tr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function us(t){var e;return(e=(sN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sN(t){return Gf()?t instanceof Node||t instanceof tr(t).Node:!1}function Or(t){return Gf()?t instanceof Element||t instanceof tr(t).Element:!1}function ls(t){return Gf()?t instanceof HTMLElement||t instanceof tr(t).HTMLElement:!1}function xE(t){return!Gf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof tr(t).ShadowRoot}const ZM=new Set(["inline","contents"]);function Du(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Lr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!ZM.has(s)}const JM=new Set(["table","td","th"]);function e6(t){return JM.has(Dl(t))}const t6=[":popover-open",":modal"];function Qf(t){return t6.some(e=>{try{return t.matches(e)}catch{return!1}})}const n6=["transform","translate","scale","rotate","perspective"],r6=["transform","translate","scale","rotate","perspective","filter"],s6=["paint","layout","strict","content"];function px(t){const e=mx(),n=Or(t)?Lr(t):t;return n6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||r6.some(r=>(n.willChange||"").includes(r))||s6.some(r=>(n.contain||"").includes(r))}function i6(t){let e=Bi(t);for(;ls(e)&&!wl(e);){if(px(e))return e;if(Qf(e))return null;e=Bi(e)}return null}function mx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const o6=new Set(["html","body","#document"]);function wl(t){return o6.has(Dl(t))}function Lr(t){return tr(t).getComputedStyle(t)}function Yf(t){return Or(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Bi(t){if(Dl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xE(t)&&t.host||us(t);return xE(e)?e.host:e}function iN(t){const e=Bi(t);return wl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ls(e)&&Du(e)?e:iN(e)}function uu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=iN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=tr(s);if(i){const l=my(o);return e.concat(o,o.visualViewport||[],Du(s)?s:[],l&&n?uu(l):[])}return e.concat(s,uu(s,[],n))}function my(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function oN(t){const e=Lr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ls(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Zh(n)!==i||Zh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function gx(t){return Or(t)?t:t.contextElement}function Ba(t){const e=gx(t);if(!ls(e))return es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=oN(e);let o=(i?Zh(n.width):n.width)/r,l=(i?Zh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const a6=es(0);function aN(t){const e=tr(t);return!mx()||!e.visualViewport?a6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function l6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==tr(t)?!1:e}function Uo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=gx(t);let o=es(1);e&&(r?Or(r)&&(o=Ba(r)):o=Ba(t));const l=l6(i,n,r)?aN(i):es(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=tr(i),g=r&&Or(r)?tr(r):r;let y=p,m=my(y);for(;m&&r&&g!==y;){const x=Ba(m),v=m.getBoundingClientRect(),w=Lr(m),_=v.left+(m.clientLeft+parseFloat(w.paddingLeft))*x.x,N=v.top+(m.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,h*=x.x,f*=x.y,c+=_,u+=N,y=tr(m),m=my(y)}}return ef({width:h,height:f,x:c,y:u})}function yx(t,e){const n=Yf(t).scrollLeft;return e?e.left+n:Uo(us(t)).left+n}function lN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:yx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function c6(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=us(r),l=e?Qf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=es(1);const h=es(0),f=ls(r);if((f||!f&&!i)&&((Dl(r)!=="body"||Du(o))&&(c=Yf(r)),ls(r))){const g=Uo(r);u=Ba(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!i?lN(o,c,!0):es(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function u6(t){return Array.from(t.getClientRects())}function d6(t){const e=us(t),n=Yf(t),r=t.ownerDocument.body,s=Gn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Gn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+yx(t);const l=-n.scrollTop;return Lr(r).direction==="rtl"&&(o+=Gn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function h6(t,e){const n=tr(t),r=us(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=mx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const f6=new Set(["absolute","fixed"]);function p6(t,e){const n=Uo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ls(t)?Ba(t):es(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function wE(t,e,n){let r;if(e==="viewport")r=h6(t,n);else if(e==="document")r=d6(us(t));else if(Or(e))r=p6(e,n);else{const s=aN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ef(r)}function cN(t,e){const n=Bi(t);return n===e||!Or(n)||wl(n)?!1:Lr(n).position==="fixed"||cN(n,e)}function m6(t,e){const n=e.get(t);if(n)return n;let r=uu(t,[],!1).filter(l=>Or(l)&&Dl(l)!=="body"),s=null;const i=Lr(t).position==="fixed";let o=i?Bi(t):t;for(;Or(o)&&!wl(o);){const l=Lr(o),c=px(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&f6.has(s.position)||Du(o)&&!c&&cN(t,o))?r=r.filter(h=>h!==o):s=l,o=Bi(o)}return e.set(t,r),r}function g6(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Qf(e)?[]:m6(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=wE(e,h,s);return u.top=Gn(f.top,u.top),u.right=zi(f.right,u.right),u.bottom=zi(f.bottom,u.bottom),u.left=Gn(f.left,u.left),u},wE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function y6(t){const{width:e,height:n}=oN(t);return{width:e,height:n}}function v6(t,e,n){const r=ls(e),s=us(e),i=n==="fixed",o=Uo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=es(0);function u(){c.x=yx(s)}if(r||!r&&!i)if((Dl(e)!=="body"||Du(s))&&(l=Yf(e)),r){const g=Uo(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?lN(s,l):es(0),f=o.left+l.scrollLeft-c.x-h.x,p=o.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function Am(t){return Lr(t).position==="static"}function _E(t,e){if(!ls(t)||Lr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return us(t)===n&&(n=n.ownerDocument.body),n}function uN(t,e){const n=tr(t);if(Qf(t))return n;if(!ls(t)){let s=Bi(t);for(;s&&!wl(s);){if(Or(s)&&!Am(s))return s;s=Bi(s)}return n}let r=_E(t,e);for(;r&&e6(r)&&Am(r);)r=_E(r,e);return r&&wl(r)&&Am(r)&&!px(r)?n:r||i6(t)||n}const x6=async function(t){const e=this.getOffsetParent||uN,n=this.getDimensions,r=await n(t.floating);return{reference:v6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function w6(t){return Lr(t).direction==="rtl"}const _6={convertOffsetParentRelativeRectToViewportRelativeRect:c6,getDocumentElement:us,getClippingRect:g6,getOffsetParent:uN,getElementRects:x6,getClientRects:u6,getDimensions:y6,getScale:Ba,isElement:Or,isRTL:w6};function dN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function E6(t,e){let n=null,r;const s=us(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const y=Od(f),m=Od(s.clientWidth-(h+p)),x=Od(s.clientHeight-(f+g)),v=Od(h),_={rootMargin:-y+"px "+-m+"px "+-x+"px "+-v+"px",threshold:Gn(0,zi(1,c))||1};let N=!0;function C(L){const T=L[0].intersectionRatio;if(T!==c){if(!N)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!dN(u,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(t)}return o(!0),i}function b6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=gx(t),h=s||i?[...u?uu(u):[],...uu(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=u&&l?E6(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(v=>{let[w]=v;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let y,m=c?Uo(t):null;c&&x();function x(){const v=Uo(t);m&&!dN(m,v)&&n(),m=v,y=requestAnimationFrame(x)}return n(),()=>{var v;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(v=g)==null||v.disconnect(),g=null,c&&cancelAnimationFrame(y)}}const T6=GM,S6=QM,C6=HM,N6=XM,I6=qM,EE=WM,k6=YM,A6=(t,e,n)=>{const r=new Map,s={platform:_6,...n},i={...s.platform,_c:r};return $M(t,e,{...s,platform:i})};var R6=typeof document<"u",j6=function(){},uh=R6?E.useLayoutEffect:j6;function tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!tf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function hN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bE(t,e){const n=hN(t);return Math.round(e*n)/n}function Rm(t){const e=E.useRef(t);return uh(()=>{e.current=t}),e}function P6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=E.useState(r);tf(p,r)||g(r);const[y,m]=E.useState(null),[x,v]=E.useState(null),w=E.useCallback(U=>{U!==L.current&&(L.current=U,m(U))},[]),_=E.useCallback(U=>{U!==T.current&&(T.current=U,v(U))},[]),N=i||y,C=o||x,L=E.useRef(null),T=E.useRef(null),S=E.useRef(h),P=c!=null,k=Rm(c),M=Rm(s),R=Rm(u),D=E.useCallback(()=>{if(!L.current||!T.current)return;const U={placement:e,strategy:n,middleware:p};M.current&&(U.platform=M.current),A6(L.current,T.current,U).then($=>{const J={...$,isPositioned:R.current!==!1};I.current&&!tf(S.current,J)&&(S.current=J,Jo.flushSync(()=>{f(J)}))})},[p,e,n,M,R]);uh(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const I=E.useRef(!1);uh(()=>(I.current=!0,()=>{I.current=!1}),[]),uh(()=>{if(N&&(L.current=N),C&&(T.current=C),N&&C){if(k.current)return k.current(N,C,D);D()}},[N,C,D,k,P]);const q=E.useMemo(()=>({reference:L,floating:T,setReference:w,setFloating:_}),[w,_]),oe=E.useMemo(()=>({reference:N,floating:C}),[N,C]),Y=E.useMemo(()=>{const U={position:n,left:0,top:0};if(!oe.floating)return U;const $=bE(oe.floating,h.x),J=bE(oe.floating,h.y);return l?{...U,transform:"translate("+$+"px, "+J+"px)",...hN(oe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:J}},[n,l,oe.floating,h.x,h.y]);return E.useMemo(()=>({...h,update:D,refs:q,elements:oe,floatingStyles:Y}),[h,D,q,oe,Y])}const D6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?EE({element:r.current,padding:s}).fn(n):{}:r?EE({element:r,padding:s}).fn(n):{}}}},O6=(t,e)=>({...T6(t),options:[t,e]}),L6=(t,e)=>({...S6(t),options:[t,e]}),M6=(t,e)=>({...k6(t),options:[t,e]}),F6=(t,e)=>({...C6(t),options:[t,e]}),V6=(t,e)=>({...N6(t),options:[t,e]}),U6=(t,e)=>({...I6(t),options:[t,e]}),z6=(t,e)=>({...D6(t),options:[t,e]});var B6="Arrow",fN=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(je.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});fN.displayName=B6;var $6=fN;function pN(t){const[e,n]=E.useState(void 0);return Ut(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var vx="Popper",[mN,Xf]=yr(vx),[W6,gN]=mN(vx),yN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=E.useState(null);return a.jsx(W6,{scope:e,anchor:r,onAnchorChange:s,children:n})};yN.displayName=vx;var vN="PopperAnchor",xN=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=gN(vN,n),o=E.useRef(null),l=Qe(e,o),c=E.useRef(null);return E.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:a.jsx(je.div,{...s,ref:l})});xN.displayName=vN;var xx="PopperContent",[H6,q6]=mN(xx),wN=E.forwardRef((t,e)=>{var ye,de,Ee,Ne,Ie,Re;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...m}=t,x=gN(xx,n),[v,w]=E.useState(null),_=Qe(e,Be=>w(Be)),[N,C]=E.useState(null),L=pN(N),T=(L==null?void 0:L.width)??0,S=(L==null?void 0:L.height)??0,P=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],R=M.length>0,D={padding:k,boundary:M.filter(G6),altBoundary:R},{refs:I,floatingStyles:q,placement:oe,isPositioned:Y,middlewareData:U}=P6({strategy:"fixed",placement:P,whileElementsMounted:(...Be)=>b6(...Be,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[O6({mainAxis:s+S,alignmentAxis:o}),c&&L6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?M6():void 0,...D}),c&&F6({...D}),V6({...D,apply:({elements:Be,rects:j,availableWidth:re,availableHeight:W})=>{const{width:V,height:O}=j.reference,H=Be.floating.style;H.setProperty("--radix-popper-available-width",`${re}px`),H.setProperty("--radix-popper-available-height",`${W}px`),H.setProperty("--radix-popper-anchor-width",`${V}px`),H.setProperty("--radix-popper-anchor-height",`${O}px`)}}),N&&z6({element:N,padding:l}),Q6({arrowWidth:T,arrowHeight:S}),p&&U6({strategy:"referenceHidden",...D})]}),[$,J]=bN(oe),B=Wt(y);Ut(()=>{Y&&(B==null||B())},[Y,B]);const K=(ye=U.arrow)==null?void 0:ye.x,ae=(de=U.arrow)==null?void 0:de.y,ue=((Ee=U.arrow)==null?void 0:Ee.centerOffset)!==0,[le,Te]=E.useState();return Ut(()=>{v&&Te(window.getComputedStyle(v).zIndex)},[v]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:Y?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(Ne=U.transformOrigin)==null?void 0:Ne.x,(Ie=U.transformOrigin)==null?void 0:Ie.y].join(" "),...((Re=U.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(H6,{scope:n,placedSide:$,onArrowChange:C,arrowX:K,arrowY:ae,shouldHideArrow:ue,children:a.jsx(je.div,{"data-side":$,"data-align":J,...m,ref:_,style:{...m.style,animation:Y?void 0:"none"}})})})});wN.displayName=xx;var _N="PopperArrow",K6={top:"bottom",right:"left",bottom:"top",left:"right"},EN=E.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=q6(_N,r),o=K6[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx($6,{...s,ref:n,style:{...s.style,display:"block"}})})});EN.displayName=_N;function G6(t){return t!==null}var Q6=t=>({name:"transformOrigin",options:t,fn(e){var x,v,w;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=bN(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let y="",m="";return u==="bottom"?(y=o?f:`${p}px`,m=`${-c}px`):u==="top"?(y=o?f:`${p}px`,m=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,m=o?f:`${g}px`):u==="left"&&(y=`${r.floating.width+c}px`,m=o?f:`${g}px`),{data:{x:y,y:m}}}});function bN(t){const[e,n="center"]=t.split("-");return[e,n]}var Y6=yN,TN=xN,SN=wN,CN=EN,[Zf,sH]=yr("Tooltip",[Xf]),wx=Xf(),NN="TooltipProvider",X6=700,TE="tooltip.open",[Z6,IN]=Zf(NN),kN=t=>{const{__scopeTooltip:e,delayDuration:n=X6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=E.useRef(!0),l=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(Z6,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:E.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};kN.displayName=NN;var AN="Tooltip",[iH,Jf]=Zf(AN),gy="TooltipTrigger",J6=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Jf(gy,n),i=IN(gy,n),o=wx(n),l=E.useRef(null),c=Qe(e,l,s.onTriggerChange),u=E.useRef(!1),h=E.useRef(!1),f=E.useCallback(()=>u.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(TN,{asChild:!0,...o,children:a.jsx(je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ke(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ke(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ke(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ke(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ke(t.onBlur,s.onClose),onClick:ke(t.onClick,s.onClose)})})});J6.displayName=gy;var e3="TooltipPortal",[oH,t3]=Zf(e3,{forceMount:void 0}),_l="TooltipContent",RN=E.forwardRef((t,e)=>{const n=t3(_l,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Jf(_l,t.__scopeTooltip);return a.jsx(vr,{present:r||o.open,children:o.disableHoverableContent?a.jsx(jN,{side:s,...i,ref:e}):a.jsx(n3,{side:s,...i,ref:e})})}),n3=E.forwardRef((t,e)=>{const n=Jf(_l,t.__scopeTooltip),r=IN(_l,t.__scopeTooltip),s=E.useRef(null),i=Qe(e,s),[o,l]=E.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=E.useCallback(()=>{l(null),f(!1)},[f]),g=E.useCallback((y,m)=>{const x=y.currentTarget,v={x:y.clientX,y:y.clientY},w=a3(v,x.getBoundingClientRect()),_=l3(v,w),N=c3(m.getBoundingClientRect()),C=d3([..._,...N]);l(C),f(!0)},[f]);return E.useEffect(()=>()=>p(),[p]),E.useEffect(()=>{if(c&&h){const y=x=>g(x,h),m=x=>g(x,c);return c.addEventListener("pointerleave",y),h.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),h.removeEventListener("pointerleave",m)}}},[c,h,g,p]),E.useEffect(()=>{if(o){const y=m=>{const x=m.target,v={x:m.clientX,y:m.clientY},w=(c==null?void 0:c.contains(x))||(h==null?void 0:h.contains(x)),_=!u3(v,o);w?p():_&&(p(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,h,o,u,p]),a.jsx(jN,{...t,ref:i})}),[r3,s3]=Zf(AN,{isInside:!1}),i3=mC("TooltipContent"),jN=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Jf(_l,n),u=wx(n),{onClose:h}=c;return E.useEffect(()=>(document.addEventListener(TE,h),()=>document.removeEventListener(TE,h)),[h]),E.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(ju,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(SN,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(i3,{children:r}),a.jsx(r3,{scope:n,isInside:!0,children:a.jsx(v4,{id:c.contentId,role:"tooltip",children:s||r})})]})})});RN.displayName=_l;var PN="TooltipArrow",o3=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=wx(n);return s3(PN,n).isInside?null:a.jsx(CN,{...s,...r,ref:e})});o3.displayName=PN;function a3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function l3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function c3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function u3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,f=c.x,p=c.y;h>r!=p>r&&n<(f-u)*(r-h)/(p-h)+u&&(s=!s)}return s}function d3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),h3(e)}function h3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var f3=kN,DN=RN;const p3=f3,m3=E.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(DN,{ref:r,sideOffset:e,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));m3.displayName=DN.displayName;function Ji(){const[t,e]=E.useState(null),[n,r]=E.useState(!0);E.useEffect(()=>{(()=>{const c=localStorage.getItem("currentUser");if(c)try{const u=JSON.parse(c);return console.log("Using stored user session:",u),e(u),r(!1),!0}catch(u){console.error("Error parsing stored user:",u),localStorage.removeItem("currentUser")}return!1})()||s()},[]);const s=async()=>{try{console.log("Checking auth status with Firebase..."),console.log("❌ No authenticated user found"),e(null),localStorage.removeItem("currentUser")}catch(l){console.error("Error checking auth status:",l),e(null),localStorage.removeItem("currentUser")}finally{r(!1)}};return{userData:t,isLoading:n,isAuthenticated:!!t,login:()=>{window.location.reload()},logout:()=>{console.log("🔓 Logging out user..."),localStorage.removeItem("currentUser"),e(null),window.location.reload()}}}const _x=qf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ge=E.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?QL:"button";return a.jsx(o,{className:Pe(_x({variant:e,size:n,className:t})),ref:i,...s})});ge.displayName="Button";const et=E.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));et.displayName="Input";var g3="Label",ON=E.forwardRef((t,e)=>a.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ON.displayName=g3;var LN=ON;const y3=qf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ve=E.forwardRef(({className:t,...e},n)=>a.jsx(LN,{ref:n,className:Pe(y3(),t),...e}));ve.displayName=LN.displayName;const ze=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ze.displayName="Card";const jt=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));jt.displayName="CardHeader";const Pt=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Pt.displayName="CardTitle";const Ex=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Ex.displayName="CardDescription";const $e=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("p-6 pt-0",t),...e}));$e.displayName="CardContent";const v3=E.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",t),...e}));v3.displayName="CardFooter";const x3=()=>{};var SE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},w3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},FN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new _3;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E3=function(t){const e=MN(t);return FN.encodeByteArray(e,!0)},nf=function(t){return E3(t).replace(/\./g,"")},VN=function(t){try{return FN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=()=>b3().__FIREBASE_DEFAULTS__,S3=()=>{if(typeof process>"u"||typeof SE>"u")return;const t=SE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VN(t[1]);return e&&JSON.parse(e)},ep=()=>{try{return x3()||T3()||S3()||C3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UN=t=>{var e,n;return(n=(e=ep())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zN=t=>{const e=UN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BN=()=>{var t;return(t=ep())==null?void 0:t.config},$N=t=>{var e;return(e=ep())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nf(JSON.stringify(n)),nf(JSON.stringify(o)),""].join(".")}const Dc={};function I3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dc))Dc[e]?t.emulator.push(e):t.prod.push(e);return t}function k3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let CE=!1;function Tx(t,e){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||Dc[t]===e||Dc[t]||CE)return;Dc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=I3().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{CE=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=k3(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),m=n("learnmore"),x=document.getElementById(m)||document.createElement("a"),v=n("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;l(_),h(x,m);const N=u();c(w,v),_.append(w,y,x,N),document.body.appendChild(_)}i?(y.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function R3(){var e;const t=(e=ep())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O3(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function L3(){return!R3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M3(){try{return typeof indexedDB=="object"}catch{return!1}}function F3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="FirebaseError";class ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V3,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?U3(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ds(s,l,r)}}function U3(t,e){return t.replace(z3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const z3=/\{\$([^}]+)}/g;function B3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(NE(i)&&NE(o)){if(!zo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function NE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $3(t,e){const n=new W3(t,e);return n.subscribe.bind(n)}class W3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=jm),s.error===void 0&&(s.error=jm),s.complete===void 0&&(s.complete=jm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new N3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G3(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K3(t){return t===po?void 0:t}function G3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const Y3={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},X3=qe.INFO,Z3={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},J3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Z3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sx{constructor(e){this.name=e,this._logLevel=X3,this._logHandler=J3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const e5=(t,e)=>e.some(n=>t instanceof n);let IE,kE;function t5(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n5(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HN=new WeakMap,yy=new WeakMap,qN=new WeakMap,Pm=new WeakMap,Cx=new WeakMap;function r5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HN.set(n,t)}).catch(()=>{}),Cx.set(e,t),e}function s5(t){if(yy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});yy.set(t,e)}let vy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function i5(t){vy=t(vy)}function o5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dm(this),e,...n);return qN.set(r,e.sort?e.sort():[e]),Pi(r)}:n5().includes(t)?function(...e){return t.apply(Dm(this),e),Pi(HN.get(this))}:function(...e){return Pi(t.apply(Dm(this),e))}}function a5(t){return typeof t=="function"?o5(t):(t instanceof IDBTransaction&&s5(t),e5(t,t5())?new Proxy(t,vy):t)}function Pi(t){if(t instanceof IDBRequest)return r5(t);if(Pm.has(t))return Pm.get(t);const e=a5(t);return e!==t&&(Pm.set(t,e),Cx.set(e,t)),e}const Dm=t=>Cx.get(t);function l5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Pi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pi(o.result),c.oldVersion,c.newVersion,Pi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const c5=["get","getKey","getAll","getAllKeys","count"],u5=["put","add","delete","clear"],Om=new Map;function AE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=u5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||c5.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Om.set(e,i),i}i5(t=>({...t,get:(e,n,r)=>AE(e,n)||t.get(e,n,r),has:(e,n)=>!!AE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",RE="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Sx("@firebase/app"),f5="@firebase/app-compat",p5="@firebase/analytics-compat",m5="@firebase/analytics",g5="@firebase/app-check-compat",y5="@firebase/app-check",v5="@firebase/auth",x5="@firebase/auth-compat",w5="@firebase/database",_5="@firebase/data-connect",E5="@firebase/database-compat",b5="@firebase/functions",T5="@firebase/functions-compat",S5="@firebase/installations",C5="@firebase/installations-compat",N5="@firebase/messaging",I5="@firebase/messaging-compat",k5="@firebase/performance",A5="@firebase/performance-compat",R5="@firebase/remote-config",j5="@firebase/remote-config-compat",P5="@firebase/storage",D5="@firebase/storage-compat",O5="@firebase/firestore",L5="@firebase/ai",M5="@firebase/firestore-compat",F5="firebase",V5="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",U5={[xy]:"fire-core",[f5]:"fire-core-compat",[m5]:"fire-analytics",[p5]:"fire-analytics-compat",[y5]:"fire-app-check",[g5]:"fire-app-check-compat",[v5]:"fire-auth",[x5]:"fire-auth-compat",[w5]:"fire-rtdb",[_5]:"fire-data-connect",[E5]:"fire-rtdb-compat",[b5]:"fire-fn",[T5]:"fire-fn-compat",[S5]:"fire-iid",[C5]:"fire-iid-compat",[N5]:"fire-fcm",[I5]:"fire-fcm-compat",[k5]:"fire-perf",[A5]:"fire-perf-compat",[R5]:"fire-rc",[j5]:"fire-rc-compat",[P5]:"fire-gcs",[D5]:"fire-gcs-compat",[O5]:"fire-fst",[M5]:"fire-fst-compat",[L5]:"fire-vertex","fire-js":"fire-js",[F5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Map,z5=new Map,_y=new Map;function jE(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bo(t){const e=t.name;if(_y.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;_y.set(e,t);for(const n of du.values())jE(n,t);for(const n of z5.values())jE(n,t);return!0}function tp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new Ou("app","Firebase",B5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=V5;function KN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Di.create("bad-app-name",{appName:String(s)});if(n||(n=BN()),!n)throw Di.create("no-options");const i=du.get(s);if(i){if(zo(n,i.options)&&zo(r,i.config))return i;throw Di.create("duplicate-app",{appName:s})}const o=new Q3(s);for(const c of _y.values())o.addComponent(c);const l=new $5(n,r,o);return du.set(s,l),l}function Nx(t=wy){const e=du.get(t);if(!e&&t===wy&&BN())return KN();if(!e)throw Di.create("no-app",{appName:t});return e}function PE(){return Array.from(du.values())}function ts(t,e,n){let r=U5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(o.join(" "));return}Bo(new $i(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="firebase-heartbeat-database",H5=1,hu="firebase-heartbeat-store";let Lm=null;function GN(){return Lm||(Lm=l5(W5,H5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Di.create("idb-open",{originalErrorMessage:t.message})})),Lm}async function q5(t){try{const n=(await GN()).transaction(hu),r=await n.objectStore(hu).get(QN(t));return await n.done,r}catch(e){if(e instanceof ds)Fs.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function DE(t,e){try{const r=(await GN()).transaction(hu,"readwrite");await r.objectStore(hu).put(e,QN(t)),await r.done}catch(n){if(n instanceof ds)Fs.warn(n.message);else{const r=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(r.message)}}}function QN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=1024,G5=30;class Q5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=OE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>G5){const o=Z5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=OE(),{heartbeatsToSend:r,unsentEntries:s}=Y5(this._heartbeatsCache.heartbeats),i=nf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Fs.warn(n),""}}}function OE(){return new Date().toISOString().substring(0,10)}function Y5(t,e=K5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),LE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),LE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class X5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M3()?F3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function LE(t){return nf(JSON.stringify({version:2,heartbeats:t})).length}function Z5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){Bo(new $i("platform-logger",e=>new d5(e),"PRIVATE")),Bo(new $i("heartbeat",e=>new Q5(e),"PRIVATE")),ts(xy,RE,t),ts(xy,RE,"esm2020"),ts("fire-js","")}J5("");function YN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eF=YN,XN=new Ou("auth","Firebase",YN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Sx("@firebase/auth");function tF(t,...e){rf.logLevel<=qe.WARN&&rf.warn(`Auth (${ta}): ${t}`,...e)}function dh(t,...e){rf.logLevel<=qe.ERROR&&rf.error(`Auth (${ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw Ix(t,...e)}function ns(t,...e){return Ix(t,...e)}function ZN(t,e,n){const r={...eF(),[e]:n};return new Ou("auth","Firebase",r).create(e,{appName:t.name})}function Is(t){return ZN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ix(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XN.create(t,...e)}function De(t,e,...n){if(!t)throw Ix(e,...n)}function Ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function Vs(t,e){t||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function nF(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nF()||P3()||"connection"in navigator)?navigator.onLine:!0}function sF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vs(n>e,"Short delay should be less than long delay!"),this.isMobile=A3()||D3()}get(){return rF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e){Vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aF=new Mu(3e4,6e4);function to(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function no(t,e,n,r,s={}){return eI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Lu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return j3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&eo(t.emulatorConfig.host)&&(u.credentials="include"),JN.fetch()(await tI(t,t.config.apiHost,n,l),u)})}async function eI(t,e,n){t._canInitEmulator=!1;const r={...iF,...e};try{const s=new cF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ld(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ZN(t,h,u);Mr(t,h)}}catch(s){if(s instanceof ds)throw s;Mr(t,"network-request-failed",{message:String(s)})}}async function Fu(t,e,n,r,s={}){const i=await no(t,e,n,r,s);return"mfaPendingCredential"in i&&Mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function tI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?kx(t.config,s):`${t.config.apiScheme}://${s}`;return oF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function lF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),aF.get())})}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ns(t,e,r);return s.customData._tokenResponse=n,s}function FE(t){return t!==void 0&&t.enterprise!==void 0}class uF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dF(t,e){return no(t,"GET","/v2/recaptchaConfig",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e){return no(t,"POST","/v1/accounts:delete",e)}async function sf(t,e){return no(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fF(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=Ax(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Oc(Mm(s.auth_time)),issuedAtTime:Oc(Mm(s.iat)),expirationTime:Oc(Mm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function Ax(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=VN(n);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function VE(t){const e=Ax(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ds&&pF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(t){var f;const e=t.auth,n=await t.getIdToken(),r=await fu(t,sf(e,{idToken:n}));De(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?nI(s.providerUserInfo):[],o=yF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function gF(t){const e=Nt(t);await of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(t,e){const n=await eI(t,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await tI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&eo(t.emulatorConfig.host)&&(c.credentials="include"),JN.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xF(t,e){return no(t,"POST","/v2/accounts:revokeToken",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=VE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await vF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $a;return r&&(De(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(De(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new by(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await fu(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fF(this,e)}reload(){return gF(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Is(this.auth));const e=await this.getIdToken();return await fu(this,hF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:y,stsTokenManager:m}=n;De(f&&m,e,"internal-error");const x=$a.fromJSON(this.name,m);De(typeof f=="string",e,"internal-error"),ei(r,e.name),ei(s,e.name),De(typeof p=="boolean",e,"internal-error"),De(typeof g=="boolean",e,"internal-error"),ei(i,e.name),ei(o,e.name),ei(l,e.name),ei(c,e.name),ei(u,e.name),ei(h,e.name);const v=new kr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:h});return y&&Array.isArray(y)&&(v.providerData=y.map(w=>({...w}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new $a;s.updateFromServerResponse(n);const i=new kr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await of(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $a;l.updateFromIdToken(r);const c=new kr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new by(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map;function Cs(t){Vs(t instanceof Function,"Expected a class definition");let e=UE.get(t);return e?(Vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rI.type="NONE";const zE=rI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e,n){return`firebase:${t}:${e}:${n}`}class Wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hh(this.userKey,s.apiKey,i),this.fullPersistenceKey=hh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sf(this.auth,{idToken:e}).catch(()=>{});return n?kr._fromGetAccountInfoResponse(this.auth,n,e):null}return kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wa(Cs(zE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Cs(zE);const o=hh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await sf(e,{idToken:h}).catch(()=>{});if(!p)break;f=await kr._fromGetAccountInfoResponse(e,p,h)}else f=kr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Wa(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Wa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cI(e))return"Blackberry";if(uI(e))return"Webos";if(iI(e))return"Safari";if((e.includes("chrome/")||oI(e))&&!e.includes("edge/"))return"Chrome";if(lI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sI(t=bn()){return/firefox\//i.test(t)}function iI(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oI(t=bn()){return/crios\//i.test(t)}function aI(t=bn()){return/iemobile/i.test(t)}function lI(t=bn()){return/android/i.test(t)}function cI(t=bn()){return/blackberry/i.test(t)}function uI(t=bn()){return/webos/i.test(t)}function Rx(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wF(t=bn()){var e;return Rx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function _F(){return O3()&&document.documentMode===10}function dI(t=bn()){return Rx(t)||lI(t)||uI(t)||cI(t)||/windows phone/i.test(t)||aI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e=[]){let n;switch(t){case"Browser":n=BE(bn());break;case"Worker":n=`${BE(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e={}){return no(t,"GET","/v2/passwordPolicy",to(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=6;class SF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new EF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sf(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await of(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Is(this));const n=e?Nt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bF(this),n=new SF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cs(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[Cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function na(t){return Nt(t)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=$3(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NF(t){np=t}function fI(t){return np.loadJS(t)}function IF(){return np.recaptchaEnterpriseScript}function kF(){return np.gapiScript}function AF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class RF{constructor(){this.enterprise=new jF}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jF{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PF="recaptcha-enterprise",pI="NO_RECAPTCHA";class DF{constructor(e){this.type=PF,this.auth=na(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{dF(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new uF(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;FE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(pI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RF().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&FE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=IF();c.length!==0&&(c+=l),fI(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function WE(t,e,n,r=!1,s=!1){const i=new DF(t);let o;if(s)o=pI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ty(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await WE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await WE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e){const n=tp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(zo(i,e??{}))return s;Mr(s,"already-initialized")}return n.initialize({options:e})}function LF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MF(t,e,n){const r=na(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=mI(e),{host:o,port:l}=FF(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(zo(u,r.config.emulator)&&zo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,eo(o)?(bx(`${i}//${o}${c}`),Tx("Auth",!0)):VF()}function mI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FF(t){const e=mI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:HE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:HE(o)}}}function HE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,n){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function UF(t,e){return no(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e){return Fu(t,"POST","/v1/accounts:signInWithPassword",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BF(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}async function $F(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends jx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new pu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ty(e,n,"signInWithPassword",zF);case"emailLink":return BF(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ty(e,r,"signUpPassword",UF);case"emailLink":return $F(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e){return Fu(t,"POST","/v1/accounts:signInWithIdp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="http://localhost";class $o extends jx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new $o(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ha(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:WF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qF(t){const e=gc(yc(t)).link,n=e?gc(yc(e)).deep_link_id:null,r=gc(yc(t)).deep_link_id;return(r?gc(yc(r)).link:null)||r||n||e||t}class Px{constructor(e){const n=gc(yc(e)),r=n.apiKey??null,s=n.oobCode??null,i=HF(n.mode??null);De(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qF(e);try{return new Px(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return pu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Px.parseLink(n);return De(r,"argument-error"),pu._fromEmailAndCode(e,r.code,r.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends gI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Vu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Vu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Vu{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ui.credential(n,r)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e){return Fu(t,"POST","/v1/accounts:signUp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kr._fromIdTokenResponse(e,r,s),o=qE(r);return new Wo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qE(r);return new Wo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends ds{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new af(e,n,r,s)}}function yI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(t,i,e,r):i})}async function GF(t,e,n=!1){const r=await fu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(Is(r));const s="reauthenticate";try{const i=await fu(t,yI(r,s,e,t),n);De(i.idToken,r,"internal-error");const o=Ax(i.idToken);De(o,r,"internal-error");const{sub:l}=o;return De(t.uid===l,r,"user-mismatch"),Wo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(t,e,n=!1){if(Yn(t.app))return Promise.reject(Is(t));const r="signIn",s=await yI(t,r,e),i=await Wo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function YF(t,e){return vI(na(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(t){const e=na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XF(t,e,n){if(Yn(t.app))return Promise.reject(Is(t));const r=na(t),o=await Ty(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KF).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&xI(t),c}),l=await Wo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function ZF(t,e,n){return Yn(t.app)?Promise.reject(Is(t)):YF(Nt(t),Ol.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xI(t),r})}function JF(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function eV(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function tV(t){return Nt(t).signOut()}const lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=1e3,rV=10;class _I extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_F()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_I.type="LOCAL";const sV=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EI.type="SESSION";const bI=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new rp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await iV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Dx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function aV(t){rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function lV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function uV(){return TI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="firebaseLocalStorageDb",dV=1,cf="firebaseLocalStorage",CI="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sp(t,e){return t.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function hV(){const t=indexedDB.deleteDatabase(SI);return new Uu(t).toPromise()}function Sy(){const t=indexedDB.open(SI,dV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cf,{keyPath:CI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cf)?e(r):(r.close(),await hV(),e(await Sy()))})})}async function KE(t,e,n){const r=sp(t,!0).put({[CI]:e,value:n});return new Uu(r).toPromise()}async function fV(t,e){const n=sp(t,!1).get(e),r=await new Uu(n).toPromise();return r===void 0?null:r.value}function GE(t,e){const n=sp(t,!0).delete(e);return new Uu(n).toPromise()}const pV=800,mV=3;class NI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rp._getInstance(uV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await lV(),!this.activeServiceWorker)return;this.sender=new oV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await KE(e,lf,"1"),await GE(e,lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>KE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=sp(s,!1).getAll();return new Uu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NI.type="LOCAL";const gV=NI;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t,e){return e?Cs(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends jx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vV(t){return vI(t.auth,new Ox(t),t.bypassAuthState)}function xV(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),QF(n,new Ox(t),t.bypassAuthState)}async function wV(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),GF(n,new Ox(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vV;case"linkViaPopup":case"linkViaRedirect":return wV;case"reauthViaPopup":case"reauthViaRedirect":return xV;default:Mr(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Mu(2e3,1e4);class Da extends II{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=Dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_V.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="pendingRedirect",fh=new Map;class bV extends II{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await TV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TV(t,e){const n=NV(e),r=CV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function SV(t,e){fh.set(t._key(),e)}function CV(t){return Cs(t._redirectPersistence)}function NV(t){return hh(EV,t.config.apiKey,t.name)}async function IV(t,e,n=!1){if(Yn(t.app))return Promise.reject(Is(t));const r=na(t),s=yV(r,e),o=await new bV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=10*60*1e3;class AV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ns(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kV&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(e))}saveEventToCache(e){this.cachedEventUids.add(QE(e)),this.lastProcessedEventTime=Date.now()}}function QE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e={}){return no(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DV=/^https?/;async function OV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jV(t);for(const n of e)try{if(LV(n))return}catch{}Mr(t,"unauthorized-domain")}function LV(t){const e=Ey(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DV.test(n))return!1;if(PV.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new Mu(3e4,6e4);function YE(){const t=rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FV(t){return new Promise((e,n)=>{var s,i,o;function r(){YE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YE(),n(ns(t,"network-request-failed"))},timeout:MV.get()})}if((i=(s=rs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=rs().gapi)!=null&&o.load)r();else{const l=AF("iframefcb");return rs()[l]=()=>{gapi.load?r():n(ns(t,"network-request-failed"))},fI(`${kF()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ph=null,e})}let ph=null;function VV(t){return ph=ph||FV(t),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=new Mu(5e3,15e3),zV="__/auth/iframe",BV="emulator/auth/iframe",$V={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HV(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kx(e,BV):`https://${t.config.authDomain}/${zV}`,r={apiKey:e.apiKey,appName:t.name,v:ta},s=WV.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Lu(r).slice(1)}`}async function qV(t){const e=await VV(t),n=rs().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:HV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$V,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ns(t,"network-request-failed"),l=rs().setTimeout(()=>{i(o)},UV.get());function c(){rs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GV=500,QV=600,YV="_blank",XV="http://localhost";class XE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZV(t,e,n,r=GV,s=QV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...KV,width:r.toString(),height:s.toString(),top:i,left:o},u=bn().toLowerCase();n&&(l=oI(u)?YV:n),sI(u)&&(e=e||XV,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(wF(u)&&l!=="_self")return JV(e||"",l),new XE(null);const f=window.open(e||"",l,h);De(f,t,"popup-blocked");try{f.focus()}catch{}return new XE(f)}function JV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="__/auth/handler",tU="emulator/auth/handler",nU=encodeURIComponent("fac");async function ZE(t,e,n,r,s,i){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ta,eventId:s};if(e instanceof gI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",B3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Vu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${nU}=${encodeURIComponent(c)}`:"";return`${rU(t)}?${Lu(l).slice(1)}${u}`}function rU({config:t}){return t.emulator?kx(t,tU):`https://${t.authDomain}/${eU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class sU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bI,this._completeRedirectFn=IV,this._overrideRedirectResult=SV}async _openPopup(e,n,r,s){var o;Vs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await ZE(e,n,r,Ey(),s);return ZV(e,i,Dx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ZE(e,n,r,Ey(),s);return aV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Vs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qV(e),r=new AV(e);return n.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Fm];i!==void 0&&n(!!i),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dI()||iI()||Rx()}}const iU=sU;var JE="@firebase/auth",eb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lU(t){Bo(new $i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;De(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hI(t)},u=new CF(r,s,i,c);return LF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bo(new $i("auth-internal",e=>{const n=na(e.getProvider("auth").getImmediate());return(r=>new oU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(JE,eb,aU(t)),ts(JE,eb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=5*60,uU=$N("authIdTokenMaxAge")||cU;let tb=null;const dU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uU)return;const s=n==null?void 0:n.token;tb!==s&&(tb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hU(t=Nx()){const e=tp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OF(t,{popupRedirectResolver:iU,persistence:[gV,sV,bI]}),r=$N("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dU(i.toString());eV(n,o,()=>o(n.currentUser)),JF(n,l=>o(l))}}const s=UN("auth");return s&&MF(n,`http://${s}`),n}function fU(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}NF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ns("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lU("Browser");var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,AI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,S){function P(){}P.prototype=S.prototype,T.D=S.prototype,T.prototype=new P,T.prototype.constructor=T,T.C=function(k,M,R){for(var D=Array(arguments.length-2),I=2;I<arguments.length;I++)D[I-2]=arguments[I];return S.prototype[M].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,S,P){P||(P=0);var k=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)k[M]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(M=0;16>M;++M)k[M]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=T.g[0],P=T.g[1],M=T.g[2];var R=T.g[3],D=S+(R^P&(M^R))+k[0]+3614090360&4294967295;S=P+(D<<7&4294967295|D>>>25),D=R+(M^S&(P^M))+k[1]+3905402710&4294967295,R=S+(D<<12&4294967295|D>>>20),D=M+(P^R&(S^P))+k[2]+606105819&4294967295,M=R+(D<<17&4294967295|D>>>15),D=P+(S^M&(R^S))+k[3]+3250441966&4294967295,P=M+(D<<22&4294967295|D>>>10),D=S+(R^P&(M^R))+k[4]+4118548399&4294967295,S=P+(D<<7&4294967295|D>>>25),D=R+(M^S&(P^M))+k[5]+1200080426&4294967295,R=S+(D<<12&4294967295|D>>>20),D=M+(P^R&(S^P))+k[6]+2821735955&4294967295,M=R+(D<<17&4294967295|D>>>15),D=P+(S^M&(R^S))+k[7]+4249261313&4294967295,P=M+(D<<22&4294967295|D>>>10),D=S+(R^P&(M^R))+k[8]+1770035416&4294967295,S=P+(D<<7&4294967295|D>>>25),D=R+(M^S&(P^M))+k[9]+2336552879&4294967295,R=S+(D<<12&4294967295|D>>>20),D=M+(P^R&(S^P))+k[10]+4294925233&4294967295,M=R+(D<<17&4294967295|D>>>15),D=P+(S^M&(R^S))+k[11]+2304563134&4294967295,P=M+(D<<22&4294967295|D>>>10),D=S+(R^P&(M^R))+k[12]+1804603682&4294967295,S=P+(D<<7&4294967295|D>>>25),D=R+(M^S&(P^M))+k[13]+4254626195&4294967295,R=S+(D<<12&4294967295|D>>>20),D=M+(P^R&(S^P))+k[14]+2792965006&4294967295,M=R+(D<<17&4294967295|D>>>15),D=P+(S^M&(R^S))+k[15]+1236535329&4294967295,P=M+(D<<22&4294967295|D>>>10),D=S+(M^R&(P^M))+k[1]+4129170786&4294967295,S=P+(D<<5&4294967295|D>>>27),D=R+(P^M&(S^P))+k[6]+3225465664&4294967295,R=S+(D<<9&4294967295|D>>>23),D=M+(S^P&(R^S))+k[11]+643717713&4294967295,M=R+(D<<14&4294967295|D>>>18),D=P+(R^S&(M^R))+k[0]+3921069994&4294967295,P=M+(D<<20&4294967295|D>>>12),D=S+(M^R&(P^M))+k[5]+3593408605&4294967295,S=P+(D<<5&4294967295|D>>>27),D=R+(P^M&(S^P))+k[10]+38016083&4294967295,R=S+(D<<9&4294967295|D>>>23),D=M+(S^P&(R^S))+k[15]+3634488961&4294967295,M=R+(D<<14&4294967295|D>>>18),D=P+(R^S&(M^R))+k[4]+3889429448&4294967295,P=M+(D<<20&4294967295|D>>>12),D=S+(M^R&(P^M))+k[9]+568446438&4294967295,S=P+(D<<5&4294967295|D>>>27),D=R+(P^M&(S^P))+k[14]+3275163606&4294967295,R=S+(D<<9&4294967295|D>>>23),D=M+(S^P&(R^S))+k[3]+4107603335&4294967295,M=R+(D<<14&4294967295|D>>>18),D=P+(R^S&(M^R))+k[8]+1163531501&4294967295,P=M+(D<<20&4294967295|D>>>12),D=S+(M^R&(P^M))+k[13]+2850285829&4294967295,S=P+(D<<5&4294967295|D>>>27),D=R+(P^M&(S^P))+k[2]+4243563512&4294967295,R=S+(D<<9&4294967295|D>>>23),D=M+(S^P&(R^S))+k[7]+1735328473&4294967295,M=R+(D<<14&4294967295|D>>>18),D=P+(R^S&(M^R))+k[12]+2368359562&4294967295,P=M+(D<<20&4294967295|D>>>12),D=S+(P^M^R)+k[5]+4294588738&4294967295,S=P+(D<<4&4294967295|D>>>28),D=R+(S^P^M)+k[8]+2272392833&4294967295,R=S+(D<<11&4294967295|D>>>21),D=M+(R^S^P)+k[11]+1839030562&4294967295,M=R+(D<<16&4294967295|D>>>16),D=P+(M^R^S)+k[14]+4259657740&4294967295,P=M+(D<<23&4294967295|D>>>9),D=S+(P^M^R)+k[1]+2763975236&4294967295,S=P+(D<<4&4294967295|D>>>28),D=R+(S^P^M)+k[4]+1272893353&4294967295,R=S+(D<<11&4294967295|D>>>21),D=M+(R^S^P)+k[7]+4139469664&4294967295,M=R+(D<<16&4294967295|D>>>16),D=P+(M^R^S)+k[10]+3200236656&4294967295,P=M+(D<<23&4294967295|D>>>9),D=S+(P^M^R)+k[13]+681279174&4294967295,S=P+(D<<4&4294967295|D>>>28),D=R+(S^P^M)+k[0]+3936430074&4294967295,R=S+(D<<11&4294967295|D>>>21),D=M+(R^S^P)+k[3]+3572445317&4294967295,M=R+(D<<16&4294967295|D>>>16),D=P+(M^R^S)+k[6]+76029189&4294967295,P=M+(D<<23&4294967295|D>>>9),D=S+(P^M^R)+k[9]+3654602809&4294967295,S=P+(D<<4&4294967295|D>>>28),D=R+(S^P^M)+k[12]+3873151461&4294967295,R=S+(D<<11&4294967295|D>>>21),D=M+(R^S^P)+k[15]+530742520&4294967295,M=R+(D<<16&4294967295|D>>>16),D=P+(M^R^S)+k[2]+3299628645&4294967295,P=M+(D<<23&4294967295|D>>>9),D=S+(M^(P|~R))+k[0]+4096336452&4294967295,S=P+(D<<6&4294967295|D>>>26),D=R+(P^(S|~M))+k[7]+1126891415&4294967295,R=S+(D<<10&4294967295|D>>>22),D=M+(S^(R|~P))+k[14]+2878612391&4294967295,M=R+(D<<15&4294967295|D>>>17),D=P+(R^(M|~S))+k[5]+4237533241&4294967295,P=M+(D<<21&4294967295|D>>>11),D=S+(M^(P|~R))+k[12]+1700485571&4294967295,S=P+(D<<6&4294967295|D>>>26),D=R+(P^(S|~M))+k[3]+2399980690&4294967295,R=S+(D<<10&4294967295|D>>>22),D=M+(S^(R|~P))+k[10]+4293915773&4294967295,M=R+(D<<15&4294967295|D>>>17),D=P+(R^(M|~S))+k[1]+2240044497&4294967295,P=M+(D<<21&4294967295|D>>>11),D=S+(M^(P|~R))+k[8]+1873313359&4294967295,S=P+(D<<6&4294967295|D>>>26),D=R+(P^(S|~M))+k[15]+4264355552&4294967295,R=S+(D<<10&4294967295|D>>>22),D=M+(S^(R|~P))+k[6]+2734768916&4294967295,M=R+(D<<15&4294967295|D>>>17),D=P+(R^(M|~S))+k[13]+1309151649&4294967295,P=M+(D<<21&4294967295|D>>>11),D=S+(M^(P|~R))+k[4]+4149444226&4294967295,S=P+(D<<6&4294967295|D>>>26),D=R+(P^(S|~M))+k[11]+3174756917&4294967295,R=S+(D<<10&4294967295|D>>>22),D=M+(S^(R|~P))+k[2]+718787259&4294967295,M=R+(D<<15&4294967295|D>>>17),D=P+(R^(M|~S))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,S){S===void 0&&(S=T.length);for(var P=S-this.blockSize,k=this.B,M=this.h,R=0;R<S;){if(M==0)for(;R<=P;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<S;)if(k[M++]=T.charCodeAt(R++),M==this.blockSize){s(this,k),M=0;break}}else for(;R<S;)if(k[M++]=T[R++],M==this.blockSize){s(this,k),M=0;break}}this.h=M,this.o+=S},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;var P=8*this.o;for(S=T.length-8;S<T.length;++S)T[S]=P&255,P/=256;for(this.u(T),T=Array(16),S=P=0;4>S;++S)for(var k=0;32>k;k+=8)T[P++]=this.g[S]>>>k&255;return T};function i(T,S){var P=l;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=S(T)}function o(T,S){this.h=S;for(var P=[],k=!0,M=T.length-1;0<=M;M--){var R=T[M]|0;k&&R==S||(P[M]=R,k=!1)}this.g=P}var l={};function c(T){return-128<=T&&128>T?i(T,function(S){return new o([S|0],0>S?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return x(u(-T));for(var S=[],P=1,k=0;T>=P;k++)S[k]=T/P|0,P*=4294967296;return new o(S,0)}function h(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return x(h(T.substring(1),S));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(S,8)),k=f,M=0;M<T.length;M+=8){var R=Math.min(8,T.length-M),D=parseInt(T.substring(M,M+R),S);8>R?(R=u(Math.pow(S,R)),k=k.j(R).add(u(D))):(k=k.j(P),k=k.add(u(D)))}return k}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(m(this))return-x(this).m();for(var T=0,S=1,P=0;P<this.g.length;P++){var k=this.i(P);T+=(0<=k?k:4294967296+k)*S,S*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(m(this))return"-"+x(this).toString(T);for(var S=u(Math.pow(T,6)),P=this,k="";;){var M=N(P,S).g;P=v(P,M.j(S));var R=((0<P.g.length?P.g[0]:P.h)>>>0).toString(T);if(P=M,y(P))return R+k;for(;6>R.length;)R="0"+R;k=R+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function m(T){return T.h==-1}t.l=function(T){return T=v(this,T),m(T)?-1:y(T)?0:1};function x(T){for(var S=T.g.length,P=[],k=0;k<S;k++)P[k]=~T.g[k];return new o(P,~T.h).add(p)}t.abs=function(){return m(this)?x(this):this},t.add=function(T){for(var S=Math.max(this.g.length,T.g.length),P=[],k=0,M=0;M<=S;M++){var R=k+(this.i(M)&65535)+(T.i(M)&65535),D=(R>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);k=D>>>16,R&=65535,D&=65535,P[M]=D<<16|R}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(T,S){return T.add(x(S))}t.j=function(T){if(y(this)||y(T))return f;if(m(this))return m(T)?x(this).j(x(T)):x(x(this).j(T));if(m(T))return x(this.j(x(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var S=this.g.length+T.g.length,P=[],k=0;k<2*S;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<T.g.length;M++){var R=this.i(k)>>>16,D=this.i(k)&65535,I=T.i(M)>>>16,q=T.i(M)&65535;P[2*k+2*M]+=D*q,w(P,2*k+2*M),P[2*k+2*M+1]+=R*q,w(P,2*k+2*M+1),P[2*k+2*M+1]+=D*I,w(P,2*k+2*M+1),P[2*k+2*M+2]+=R*I,w(P,2*k+2*M+2)}for(k=0;k<S;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=S;k<2*S;k++)P[k]=0;return new o(P,0)};function w(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function _(T,S){this.g=T,this.h=S}function N(T,S){if(y(S))throw Error("division by zero");if(y(T))return new _(f,f);if(m(T))return S=N(x(T),S),new _(x(S.g),x(S.h));if(m(S))return S=N(T,x(S)),new _(x(S.g),S.h);if(30<T.g.length){if(m(T)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var P=p,k=S;0>=k.l(T);)P=C(P),k=C(k);var M=L(P,1),R=L(k,1);for(k=L(k,2),P=L(P,2);!y(k);){var D=R.add(k);0>=D.l(T)&&(M=M.add(P),R=D),k=L(k,1),P=L(P,1)}return S=v(T,M.j(S)),new _(M,S)}for(M=f;0<=T.l(S);){for(P=Math.max(1,Math.floor(T.m()/S.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),R=u(P),D=R.j(S);m(D)||0<D.l(T);)P-=k,R=u(P),D=R.j(S);y(R)&&(R=p),M=M.add(R),T=v(T,D)}return new _(M,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var S=Math.max(this.g.length,T.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)&T.i(k);return new o(P,this.h&T.h)},t.or=function(T){for(var S=Math.max(this.g.length,T.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)|T.i(k);return new o(P,this.h|T.h)},t.xor=function(T){for(var S=Math.max(this.g.length,T.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)^T.i(k);return new o(P,this.h^T.h)};function C(T){for(var S=T.g.length+1,P=[],k=0;k<S;k++)P[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(P,T.h)}function L(T,S){var P=S>>5;S%=32;for(var k=T.g.length-P,M=[],R=0;R<k;R++)M[R]=0<S?T.i(R+P)>>>S|T.i(R+P+1)<<32-S:T.i(R+P);return new o(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Oi=o}).apply(typeof nb<"u"?nb:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RI,vc,jI,mh,Cy,PI,DI,OI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,A){return d==Array.prototype||d==Object.prototype||(d[b]=A.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var b=0;b<d.length;++b){var A=d[b];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(d,b){if(b)e:{var A=r;d=d.split(".");for(var F=0;F<d.length-1;F++){var X=d[F];if(!(X in A))break e;A=A[X]}d=d[d.length-1],F=A[d],b=b(F),b!=F&&b!=null&&e(A,d,{configurable:!0,writable:!0,value:b})}}function i(d,b){d instanceof String&&(d+="");var A=0,F=!1,X={next:function(){if(!F&&A<d.length){var ne=A++;return{value:b(ne,d[ne]),done:!1}}return F=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}s("Array.prototype.values",function(d){return d||function(){return i(this,function(b,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function u(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function h(d,b,A){return d.call.apply(d.bind,arguments)}function f(d,b,A){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,F),d.apply(b,X)}}return function(){return d.apply(b,arguments)}}function p(d,b,A){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,b){var A=Array.prototype.slice.call(arguments,1);return function(){var F=A.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function y(d,b){function A(){}A.prototype=b.prototype,d.aa=b.prototype,d.prototype=new A,d.prototype.constructor=d,d.Qb=function(F,X,ne){for(var xe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)xe[ut-2]=arguments[ut];return b.prototype[X].apply(F,xe)}}function m(d){const b=d.length;if(0<b){const A=Array(b);for(let F=0;F<b;F++)A[F]=d[F];return A}return[]}function x(d,b){for(let A=1;A<arguments.length;A++){const F=arguments[A];if(c(F)){const X=d.length||0,ne=F.length||0;d.length=X+ne;for(let xe=0;xe<ne;xe++)d[X+xe]=F[xe]}else d.push(F)}}class v{constructor(b,A){this.i=b,this.j=A,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function w(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function N(d){return N[" "](d),d}N[" "]=function(){};var C=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function L(d,b,A){for(const F in d)b.call(A,d[F],F,d)}function T(d,b){for(const A in d)b.call(void 0,d[A],A,d)}function S(d){const b={};for(const A in d)b[A]=d[A];return b}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,b){let A,F;for(let X=1;X<arguments.length;X++){F=arguments[X];for(A in F)d[A]=F[A];for(let ne=0;ne<P.length;ne++)A=P[ne],Object.prototype.hasOwnProperty.call(F,A)&&(d[A]=F[A])}}function M(d){var b=1;d=d.split(":");const A=[];for(;0<b&&d.length;)A.push(d.shift()),b--;return d.length&&A.push(d.join(":")),A}function R(d){l.setTimeout(()=>{throw d},0)}function D(){var d=$;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class I{constructor(){this.h=this.g=null}add(b,A){const F=q.get();F.set(b,A),this.h?this.h.next=F:this.g=F,this.h=F}}var q=new v(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(b,A){this.h=b,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,U=!1,$=new I,J=()=>{const d=l.Promise.resolve(void 0);Y=()=>{d.then(B)}};var B=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(A){R(A)}var b=q;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}U=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};l.addEventListener("test",A,b),l.removeEventListener("test",A,b)}catch{}return d}();function le(d,b){if(ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var A=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(C){e:{try{N(b.nodeName);var X=!0;break e}catch{}X=!1}X||(b=null)}}else A=="mouseover"?b=d.fromElement:A=="mouseout"&&(b=d.toElement);this.relatedTarget=b,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&le.aa.h.call(this)}}y(le,ae);var Te={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),de=0;function Ee(d,b,A,F,X){this.listener=d,this.proxy=null,this.src=b,this.type=A,this.capture=!!F,this.ha=X,this.key=++de,this.da=this.fa=!1}function Ne(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ie(d){this.src=d,this.g={},this.h=0}Ie.prototype.add=function(d,b,A,F,X){var ne=d.toString();d=this.g[ne],d||(d=this.g[ne]=[],this.h++);var xe=Be(d,b,F,X);return-1<xe?(b=d[xe],A||(b.fa=!1)):(b=new Ee(b,this.src,ne,!!F,X),b.fa=A,d.push(b)),b};function Re(d,b){var A=b.type;if(A in d.g){var F=d.g[A],X=Array.prototype.indexOf.call(F,b,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(F,X,1),ne&&(Ne(b),d.g[A].length==0&&(delete d.g[A],d.h--))}}function Be(d,b,A,F){for(var X=0;X<d.length;++X){var ne=d[X];if(!ne.da&&ne.listener==b&&ne.capture==!!A&&ne.ha==F)return X}return-1}var j="closure_lm_"+(1e6*Math.random()|0),re={};function W(d,b,A,F,X){if(Array.isArray(b)){for(var ne=0;ne<b.length;ne++)W(d,b[ne],A,F,X);return null}return A=Z(A),d&&d[ye]?d.K(b,A,u(F)?!!F.capture:!1,X):V(d,b,A,!1,F,X)}function V(d,b,A,F,X,ne){if(!b)throw Error("Invalid event type");var xe=u(X)?!!X.capture:!!X,ut=te(d);if(ut||(d[j]=ut=new Ie(d)),A=ut.add(b,A,F,xe,ne),A.proxy)return A;if(F=O(),A.proxy=F,F.src=d,F.listener=A,d.addEventListener)ue||(X=xe),X===void 0&&(X=!1),d.addEventListener(b.toString(),F,X);else if(d.attachEvent)d.attachEvent(se(b.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return A}function O(){function d(A){return b.call(d.src,d.listener,A)}const b=z;return d}function H(d,b,A,F,X){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)H(d,b[ne],A,F,X);else F=u(F)?!!F.capture:!!F,A=Z(A),d&&d[ye]?(d=d.i,b=String(b).toString(),b in d.g&&(ne=d.g[b],A=Be(ne,A,F,X),-1<A&&(Ne(ne[A]),Array.prototype.splice.call(ne,A,1),ne.length==0&&(delete d.g[b],d.h--)))):d&&(d=te(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Be(b,A,F,X)),(A=-1<d?b[d]:null)&&ee(A))}function ee(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[ye])Re(b.i,d);else{var A=d.type,F=d.proxy;b.removeEventListener?b.removeEventListener(A,F,d.capture):b.detachEvent?b.detachEvent(se(A),F):b.addListener&&b.removeListener&&b.removeListener(F),(A=te(b))?(Re(A,d),A.h==0&&(A.src=null,b[j]=null)):Ne(d)}}}function se(d){return d in re?re[d]:re[d]="on"+d}function z(d,b){if(d.da)d=!0;else{b=new le(b,this);var A=d.listener,F=d.ha||d.src;d.fa&&ee(d),d=A.call(F,b)}return d}function te(d){return d=d[j],d instanceof Ie?d:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(d){return typeof d=="function"?d:(d[pe]||(d[pe]=function(b){return d.handleEvent(b)}),d[pe])}function me(){K.call(this),this.i=new Ie(this),this.M=this,this.F=null}y(me,K),me.prototype[ye]=!0,me.prototype.removeEventListener=function(d,b,A,F){H(this,d,b,A,F)};function G(d,b){var A,F=d.F;if(F)for(A=[];F;F=F.F)A.push(F);if(d=d.M,F=b.type||b,typeof b=="string")b=new ae(b,d);else if(b instanceof ae)b.target=b.target||d;else{var X=b;b=new ae(F,d),k(b,X)}if(X=!0,A)for(var ne=A.length-1;0<=ne;ne--){var xe=b.g=A[ne];X=he(xe,F,!0,b)&&X}if(xe=b.g=d,X=he(xe,F,!0,b)&&X,X=he(xe,F,!1,b)&&X,A)for(ne=0;ne<A.length;ne++)xe=b.g=A[ne],X=he(xe,F,!1,b)&&X}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var A=d.g[b],F=0;F<A.length;F++)Ne(A[F]);delete d.g[b],d.h--}}this.F=null},me.prototype.K=function(d,b,A,F){return this.i.add(String(d),b,!1,A,F)},me.prototype.L=function(d,b,A,F){return this.i.add(String(d),b,!0,A,F)};function he(d,b,A,F){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var X=!0,ne=0;ne<b.length;++ne){var xe=b[ne];if(xe&&!xe.da&&xe.capture==A){var ut=xe.listener,nn=xe.ha||xe.src;xe.fa&&Re(d.i,xe),X=ut.call(nn,F)!==!1&&X}}return X&&!F.defaultPrevented}function Ve(d,b,A){if(typeof d=="function")A&&(d=p(d,A));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:l.setTimeout(d,b||0)}function yt(d){d.g=Ve(()=>{d.g=null,d.i&&(d.i=!1,yt(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class ft extends K{constructor(b,A){super(),this.m=b,this.l=A,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(d){K.call(this),this.h=d,this.g={}}y(pt,K);var ot=[];function jn(d){L(d.g,function(b,A){this.g.hasOwnProperty(A)&&ee(b)},d),d.g={}}pt.prototype.N=function(){pt.aa.N.call(this),jn(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=l.JSON.stringify,Pn=l.JSON.parse,fs=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Bl(){}Bl.prototype.h=null;function Yu(d){return d.h||(d.h=d.i())}function Xu(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ps(){ae.call(this,"d")}y(ps,ae);function qs(){ae.call(this,"c")}y(qs,ae);var ao={},$w=null;function Zu(){return $w=$w||new me}ao.La="serverreachability";function Ww(d){ae.call(this,ao.La,d)}y(Ww,ae);function $l(d){const b=Zu();G(b,new Ww(b))}ao.STAT_EVENT="statevent";function Hw(d,b){ae.call(this,ao.STAT_EVENT,d),this.stat=b}y(Hw,ae);function Tn(d){const b=Zu();G(b,new Hw(b,d))}ao.Ma="timingevent";function qw(d,b){ae.call(this,ao.Ma,d),this.size=b}y(qw,ae);function Wl(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},b)}function Hl(){this.g=!0}Hl.prototype.xa=function(){this.g=!1};function Dj(d,b,A,F,X,ne){d.info(function(){if(d.g)if(ne)for(var xe="",ut=ne.split("&"),nn=0;nn<ut.length;nn++){var nt=ut[nn].split("=");if(1<nt.length){var fn=nt[0];nt=nt[1];var pn=fn.split("_");xe=2<=pn.length&&pn[1]=="type"?xe+(fn+"="+nt+"&"):xe+(fn+"=redacted&")}}else xe=null;else xe=ne;return"XMLHTTP REQ ("+F+") [attempt "+X+"]: "+b+`
`+A+`
`+xe})}function Oj(d,b,A,F,X,ne,xe){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+X+"]: "+b+`
`+A+`
`+ne+" "+xe})}function la(d,b,A,F){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Mj(d,A)+(F?" "+F:"")})}function Lj(d,b){d.info(function(){return"TIMEOUT: "+b})}Hl.prototype.info=function(){};function Mj(d,b){if(!d.g)return b;if(!b)return null;try{var A=JSON.parse(b);if(A){for(d=0;d<A.length;d++)if(Array.isArray(A[d])){var F=A[d];if(!(2>F.length)){var X=F[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var xe=1;xe<X.length;xe++)X[xe]=""}}}}return wr(A)}catch{return b}}var Ju={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Up;function ed(){}y(ed,Bl),ed.prototype.g=function(){return new XMLHttpRequest},ed.prototype.i=function(){return{}},Up=new ed;function Ks(d,b,A,F){this.j=d,this.i=b,this.l=A,this.R=F||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gw}function Gw(){this.i=null,this.g="",this.h=!1}var Qw={},zp={};function Bp(d,b,A){d.L=1,d.v=sd(ms(b)),d.m=A,d.P=!0,Yw(d,null)}function Yw(d,b){d.F=Date.now(),td(d),d.A=ms(d.v);var A=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),u0(A.i,"t",F),d.C=0,A=d.j.J,d.h=new Gw,d.g=I0(d.j,A?b:null,!d.m),0<d.O&&(d.M=new ft(p(d.Y,d,d.g),d.O)),b=d.U,A=d.g,F=d.ca;var X="readystatechange";Array.isArray(X)||(X&&(ot[0]=X.toString()),X=ot);for(var ne=0;ne<X.length;ne++){var xe=W(A,X[ne],F||b.handleEvent,!1,b.h||b);if(!xe)break;b.g[xe.key]=xe}b=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),$l(),Dj(d.i,d.u,d.A,d.l,d.R,d.m)}Ks.prototype.ca=function(d){d=d.target;const b=this.M;b&&gs(d)==3?b.j():this.Y(d)},Ks.prototype.Y=function(d){try{if(d==this.g)e:{const pn=gs(this.g);var b=this.g.Ba();const da=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||y0(this.g)))){this.J||pn!=4||b==7||(b==8||0>=da?$l(3):$l(2)),$p(this);var A=this.g.Z();this.X=A;t:if(Xw(this)){var F=y0(this.g);d="";var X=F.length,ne=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),ql(this);var xe="";break t}this.h.i=new l.TextDecoder}for(b=0;b<X;b++)this.h.h=!0,d+=this.h.i.decode(F[b],{stream:!(ne&&b==X-1)});F.length=0,this.h.g+=d,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=A==200,Oj(this.i,this.u,this.A,this.l,this.R,pn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,nn=this.g;if((ut=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ut)){var nt=ut;break t}}nt=null}if(A=nt)la(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wp(this,A);else{this.o=!1,this.s=3,Tn(12),lo(this),ql(this);break e}}if(this.P){A=!0;let _r;for(;!this.J&&this.C<xe.length;)if(_r=Fj(this,xe),_r==zp){pn==4&&(this.s=4,Tn(14),A=!1),la(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==Qw){this.s=4,Tn(15),la(this.i,this.l,xe,"[Invalid Chunk]"),A=!1;break}else la(this.i,this.l,_r,null),Wp(this,_r);if(Xw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||xe.length!=0||this.h.h||(this.s=1,Tn(16),A=!1),this.o=this.o&&A,!A)la(this.i,this.l,xe,"[Invalid Chunked Response]"),lo(this),ql(this);else if(0<xe.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Yp(fn),fn.M=!0,Tn(11))}}else la(this.i,this.l,xe,null),Wp(this,xe);pn==4&&lo(this),this.o&&!this.J&&(pn==4?T0(this.j,this):(this.o=!1,td(this)))}else tP(this.g),A==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Tn(12)):(this.s=0,Tn(13)),lo(this),ql(this)}}}catch{}finally{}};function Xw(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Fj(d,b){var A=d.C,F=b.indexOf(`
`,A);return F==-1?zp:(A=Number(b.substring(A,F)),isNaN(A)?Qw:(F+=1,F+A>b.length?zp:(b=b.slice(F,F+A),d.C=F+A,b)))}Ks.prototype.cancel=function(){this.J=!0,lo(this)};function td(d){d.S=Date.now()+d.I,Zw(d,d.I)}function Zw(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Wl(p(d.ba,d),b)}function $p(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Ks.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Lj(this.i,this.A),this.L!=2&&($l(),Tn(17)),lo(this),this.s=2,ql(this)):Zw(this,this.S-d)};function ql(d){d.j.G==0||d.J||T0(d.j,d)}function lo(d){$p(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,jn(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function Wp(d,b){try{var A=d.j;if(A.G!=0&&(A.g==d||Hp(A.h,d))){if(!d.K&&Hp(A.h,d)&&A.G==3){try{var F=A.Da.g.parse(b)}catch{F=null}if(Array.isArray(F)&&F.length==3){var X=F;if(X[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<d.F)ud(A),ld(A);else break e;Qp(A),Tn(18)}}else A.za=X[1],0<A.za-A.T&&37500>X[2]&&A.F&&A.v==0&&!A.C&&(A.C=Wl(p(A.Za,A),6e3));if(1>=t0(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else uo(A,11)}else if((d.K||A.g==d)&&ud(A),!w(b))for(X=A.Da.g.parse(b),b=0;b<X.length;b++){let nt=X[b];if(A.T=nt[0],nt=nt[1],A.G==2)if(nt[0]=="c"){A.K=nt[1],A.ia=nt[2];const fn=nt[3];fn!=null&&(A.la=fn,A.j.info("VER="+A.la));const pn=nt[4];pn!=null&&(A.Aa=pn,A.j.info("SVER="+A.Aa));const da=nt[5];da!=null&&typeof da=="number"&&0<da&&(F=1.5*da,A.L=F,A.j.info("backChannelRequestTimeoutMs_="+F)),F=A;const _r=d.g;if(_r){const hd=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hd){var ne=F.h;ne.g||hd.indexOf("spdy")==-1&&hd.indexOf("quic")==-1&&hd.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(qp(ne,ne.h),ne.h=null))}if(F.D){const Xp=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;Xp&&(F.ya=Xp,vt(F.I,F.D,Xp))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-d.F,A.j.info("Handshake RTT: "+A.R+"ms")),F=A;var xe=d;if(F.qa=N0(F,F.J?F.ia:null,F.W),xe.K){n0(F.h,xe);var ut=xe,nn=F.L;nn&&(ut.I=nn),ut.B&&($p(ut),td(ut)),F.g=xe}else E0(F);0<A.i.length&&cd(A)}else nt[0]!="stop"&&nt[0]!="close"||uo(A,7);else A.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?uo(A,7):Gp(A):nt[0]!="noop"&&A.l&&A.l.ta(nt),A.v=0)}}$l(4)}catch{}}var Vj=class{constructor(d,b){this.g=d,this.map=b}};function Jw(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function t0(d){return d.h?1:d.g?d.g.size:0}function Hp(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function qp(d,b){d.g?d.g.add(b):d.h=b}function n0(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Jw.prototype.cancel=function(){if(this.i=r0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function r0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const A of d.g.values())b=b.concat(A.D);return b}return m(d.i)}function Uj(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var b=[],A=d.length,F=0;F<A;F++)b.push(d[F]);return b}b=[],A=0;for(F in d)b[A++]=d[F];return b}function zj(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var b=[];d=d.length;for(var A=0;A<d;A++)b.push(A);return b}b=[],A=0;for(const F in d)b[A++]=F;return b}}}function s0(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var A=zj(d),F=Uj(d),X=F.length,ne=0;ne<X;ne++)b.call(void 0,F[ne],A&&A[ne],d)}var i0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bj(d,b){if(d){d=d.split("&");for(var A=0;A<d.length;A++){var F=d[A].indexOf("="),X=null;if(0<=F){var ne=d[A].substring(0,F);X=d[A].substring(F+1)}else ne=d[A];b(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function co(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof co){this.h=d.h,nd(this,d.j),this.o=d.o,this.g=d.g,rd(this,d.s),this.l=d.l;var b=d.i,A=new Ql;A.i=b.i,b.g&&(A.g=new Map(b.g),A.h=b.h),o0(this,A),this.m=d.m}else d&&(b=String(d).match(i0))?(this.h=!1,nd(this,b[1]||"",!0),this.o=Kl(b[2]||""),this.g=Kl(b[3]||"",!0),rd(this,b[4]),this.l=Kl(b[5]||"",!0),o0(this,b[6]||"",!0),this.m=Kl(b[7]||"")):(this.h=!1,this.i=new Ql(null,this.h))}co.prototype.toString=function(){var d=[],b=this.j;b&&d.push(Gl(b,a0,!0),":");var A=this.g;return(A||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Gl(b,a0,!0),"@"),d.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&d.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(Gl(A,A.charAt(0)=="/"?Hj:Wj,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",Gl(A,Kj)),d.join("")};function ms(d){return new co(d)}function nd(d,b,A){d.j=A?Kl(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function rd(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function o0(d,b,A){b instanceof Ql?(d.i=b,Gj(d.i,d.h)):(A||(b=Gl(b,qj)),d.i=new Ql(b,d.h))}function vt(d,b,A){d.i.set(b,A)}function sd(d){return vt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Kl(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Gl(d,b,A){return typeof d=="string"?(d=encodeURI(d).replace(b,$j),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $j(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var a0=/[#\/\?@]/g,Wj=/[#\?:]/g,Hj=/[#\?]/g,qj=/[#\?@]/g,Kj=/#/g;function Ql(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Gs(d){d.g||(d.g=new Map,d.h=0,d.i&&Bj(d.i,function(b,A){d.add(decodeURIComponent(b.replace(/\+/g," ")),A)}))}t=Ql.prototype,t.add=function(d,b){Gs(this),this.i=null,d=ca(this,d);var A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(b),this.h+=1,this};function l0(d,b){Gs(d),b=ca(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function c0(d,b){return Gs(d),b=ca(d,b),d.g.has(b)}t.forEach=function(d,b){Gs(this),this.g.forEach(function(A,F){A.forEach(function(X){d.call(b,X,F,this)},this)},this)},t.na=function(){Gs(this);const d=Array.from(this.g.values()),b=Array.from(this.g.keys()),A=[];for(let F=0;F<b.length;F++){const X=d[F];for(let ne=0;ne<X.length;ne++)A.push(b[F])}return A},t.V=function(d){Gs(this);let b=[];if(typeof d=="string")c0(this,d)&&(b=b.concat(this.g.get(ca(this,d))));else{d=Array.from(this.g.values());for(let A=0;A<d.length;A++)b=b.concat(d[A])}return b},t.set=function(d,b){return Gs(this),this.i=null,d=ca(this,d),c0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},t.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function u0(d,b,A){l0(d,b),0<A.length&&(d.i=null,d.g.set(ca(d,b),m(A)),d.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(var A=0;A<b.length;A++){var F=b[A];const ne=encodeURIComponent(String(F)),xe=this.V(F);for(F=0;F<xe.length;F++){var X=ne;xe[F]!==""&&(X+="="+encodeURIComponent(String(xe[F]))),d.push(X)}}return this.i=d.join("&")};function ca(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Gj(d,b){b&&!d.j&&(Gs(d),d.i=null,d.g.forEach(function(A,F){var X=F.toLowerCase();F!=X&&(l0(this,F),u0(this,X,A))},d)),d.j=b}function Qj(d,b){const A=new Hl;if(l.Image){const F=new Image;F.onload=g(Qs,A,"TestLoadImage: loaded",!0,b,F),F.onerror=g(Qs,A,"TestLoadImage: error",!1,b,F),F.onabort=g(Qs,A,"TestLoadImage: abort",!1,b,F),F.ontimeout=g(Qs,A,"TestLoadImage: timeout",!1,b,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else b(!1)}function Yj(d,b){const A=new Hl,F=new AbortController,X=setTimeout(()=>{F.abort(),Qs(A,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:F.signal}).then(ne=>{clearTimeout(X),ne.ok?Qs(A,"TestPingServer: ok",!0,b):Qs(A,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),Qs(A,"TestPingServer: error",!1,b)})}function Qs(d,b,A,F,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),F(A)}catch{}}function Xj(){this.g=new fs}function Zj(d,b,A){const F=A||"";try{s0(d,function(X,ne){let xe=X;u(X)&&(xe=wr(X)),b.push(F+ne+"="+encodeURIComponent(xe))})}catch(X){throw b.push(F+"type="+encodeURIComponent("_badmap")),X}}function id(d){this.l=d.Ub||null,this.j=d.eb||!1}y(id,Bl),id.prototype.g=function(){return new od(this.l,this.j)},id.prototype.i=function(d){return function(){return d}}({});function od(d,b){me.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(od,me),t=od.prototype,t.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,Xl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||l).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Xl(this)),this.g&&(this.readyState=3,Xl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Yl(this):Xl(this),this.readyState==3&&d0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Yl(this))},t.Qa=function(d){this.g&&(this.response=d,Yl(this))},t.ga=function(){this.g&&Yl(this)};function Yl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Xl(d)}t.setRequestHeader=function(d,b){this.u.append(d,b)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var A=b.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=b.next();return d.join(`\r
`)};function Xl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function h0(d){let b="";return L(d,function(A,F){b+=F,b+=":",b+=A,b+=`\r
`}),b}function Kp(d,b,A){e:{for(F in A){var F=!1;break e}F=!0}F||(A=h0(A),typeof d=="string"?A!=null&&encodeURIComponent(String(A)):vt(d,b,A))}function kt(d){me.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(kt,me);var Jj=/^https?$/i,eP=["POST","PUT"];t=kt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,b,A,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Up.g(),this.v=this.o?Yu(this.o):Yu(Up),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ne){f0(this,ne);return}if(d=A||"",A=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var X in F)A.set(X,F[X]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ne of F.keys())A.set(ne,F.get(ne));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(eP,b,void 0))||F||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,xe]of A)this.g.setRequestHeader(ne,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g0(this),this.u=!0,this.g.send(d),this.u=!1}catch(ne){f0(this,ne)}};function f0(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,p0(d),ad(d)}function p0(d){d.A||(d.A=!0,G(d,"complete"),G(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,G(this,"complete"),G(this,"abort"),ad(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ad(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?m0(this):this.bb())},t.bb=function(){m0(this)};function m0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||gs(d)!=4||d.Z()!=2)){if(d.u&&gs(d)==4)Ve(d.Ea,0,d);else if(G(d,"readystatechange"),gs(d)==4){d.h=!1;try{const xe=d.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var A;if(!(A=b)){var F;if(F=xe===0){var X=String(d.D).match(i0)[1]||null;!X&&l.self&&l.self.location&&(X=l.self.location.protocol.slice(0,-1)),F=!Jj.test(X?X.toLowerCase():"")}A=F}if(A)G(d,"complete"),G(d,"success");else{d.m=6;try{var ne=2<gs(d)?d.g.statusText:""}catch{ne=""}d.l=ne+" ["+d.Z()+"]",p0(d)}}finally{ad(d)}}}}function ad(d,b){if(d.g){g0(d);const A=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||G(d,"ready");try{A.onreadystatechange=F}catch{}}}function g0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function gs(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Pn(b)}};function y0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function tP(d){const b={};d=(d.g&&2<=gs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(w(d[F]))continue;var A=M(d[F]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=b[X]||[];b[X]=ne,ne.push(A)}T(b,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zl(d,b,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||b}function v0(d){this.Aa=0,this.i=[],this.j=new Hl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zl("baseRetryDelayMs",5e3,d),this.cb=Zl("retryDelaySeedMs",1e4,d),this.Wa=Zl("forwardChannelMaxRetries",2,d),this.wa=Zl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Jw(d&&d.concurrentRequestLimit),this.Da=new Xj,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v0.prototype,t.la=8,t.G=1,t.connect=function(d,b,A,F){Tn(0),this.W=d,this.H=b||{},A&&F!==void 0&&(this.H.OSID=A,this.H.OAID=F),this.F=this.X,this.I=N0(this,null,this.W),cd(this)};function Gp(d){if(x0(d),d.G==3){var b=d.U++,A=ms(d.I);if(vt(A,"SID",d.K),vt(A,"RID",b),vt(A,"TYPE","terminate"),Jl(d,A),b=new Ks(d,d.j,b),b.L=2,b.v=sd(ms(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(b.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=b.v,A=!0),A||(b.g=I0(b.j,null),b.g.ea(b.v)),b.F=Date.now(),td(b)}C0(d)}function ld(d){d.g&&(Yp(d),d.g.cancel(),d.g=null)}function x0(d){ld(d),d.u&&(l.clearTimeout(d.u),d.u=null),ud(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function cd(d){if(!e0(d.h)&&!d.s){d.s=!0;var b=d.Ga;Y||J(),U||(Y(),U=!0),$.add(b,d),d.B=0}}function nP(d,b){return t0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Wl(p(d.Ga,d,b),S0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const X=new Ks(this,this.j,d);let ne=this.o;if(this.S&&(ne?(ne=S(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var b=0,A=0;A<this.i.length;A++){t:{var F=this.i[A];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(b+=F,4096<b){b=A;break e}if(b===4096||A===this.i.length-1){b=A+1;break e}}b=1e3}else b=1e3;b=_0(this,X,b),A=ms(this.I),vt(A,"RID",d),vt(A,"CVER",22),this.D&&vt(A,"X-HTTP-Session-Id",this.D),Jl(this,A),ne&&(this.O?b="headers="+encodeURIComponent(String(h0(ne)))+"&"+b:this.m&&Kp(A,this.m,ne)),qp(this.h,X),this.Ua&&vt(A,"TYPE","init"),this.P?(vt(A,"$req",b),vt(A,"SID","null"),X.T=!0,Bp(X,A,null)):Bp(X,A,b),this.G=2}}else this.G==3&&(d?w0(this,d):this.i.length==0||e0(this.h)||w0(this))};function w0(d,b){var A;b?A=b.l:A=d.U++;const F=ms(d.I);vt(F,"SID",d.K),vt(F,"RID",A),vt(F,"AID",d.T),Jl(d,F),d.m&&d.o&&Kp(F,d.m,d.o),A=new Ks(d,d.j,A,d.B+1),d.m===null&&(A.H=d.o),b&&(d.i=b.D.concat(d.i)),b=_0(d,A,1e3),A.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),qp(d.h,A),Bp(A,F,b)}function Jl(d,b){d.H&&L(d.H,function(A,F){vt(b,F,A)}),d.l&&s0({},function(A,F){vt(b,F,A)})}function _0(d,b,A){A=Math.min(d.i.length,A);var F=d.l?p(d.l.Na,d.l,d):null;e:{var X=d.i;let ne=-1;for(;;){const xe=["count="+A];ne==-1?0<A?(ne=X[0].g,xe.push("ofs="+ne)):ne=0:xe.push("ofs="+ne);let ut=!0;for(let nn=0;nn<A;nn++){let nt=X[nn].g;const fn=X[nn].map;if(nt-=ne,0>nt)ne=Math.max(0,X[nn].g-100),ut=!1;else try{Zj(fn,xe,"req"+nt+"_")}catch{F&&F(fn)}}if(ut){F=xe.join("&");break e}}}return d=d.i.splice(0,A),b.D=d,F}function E0(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;Y||J(),U||(Y(),U=!0),$.add(b,d),d.v=0}}function Qp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Wl(p(d.Fa,d),S0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,b0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Wl(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tn(10),ld(this),b0(this))};function Yp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function b0(d){d.g=new Ks(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=ms(d.qa);vt(b,"RID","rpc"),vt(b,"SID",d.K),vt(b,"AID",d.T),vt(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&vt(b,"TO",d.ja),vt(b,"TYPE","xmlhttp"),Jl(d,b),d.m&&d.o&&Kp(b,d.m,d.o),d.L&&(d.g.I=d.L);var A=d.g;d=d.ia,A.L=1,A.v=sd(ms(b)),A.m=null,A.P=!0,Yw(A,d)}t.Za=function(){this.C!=null&&(this.C=null,ld(this),Qp(this),Tn(19))};function ud(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function T0(d,b){var A=null;if(d.g==b){ud(d),Yp(d),d.g=null;var F=2}else if(Hp(d.h,b))A=b.D,n0(d.h,b),F=1;else return;if(d.G!=0){if(b.o)if(F==1){A=b.m?b.m.length:0,b=Date.now()-b.F;var X=d.B;F=Zu(),G(F,new qw(F,A)),cd(d)}else E0(d);else if(X=b.s,X==3||X==0&&0<b.X||!(F==1&&nP(d,b)||F==2&&Qp(d)))switch(A&&0<A.length&&(b=d.h,b.i=b.i.concat(A)),X){case 1:uo(d,5);break;case 4:uo(d,10);break;case 3:uo(d,6);break;default:uo(d,2)}}}function S0(d,b){let A=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(A*=2),A*b}function uo(d,b){if(d.j.info("Error code "+b),b==2){var A=p(d.fb,d),F=d.Xa;const X=!F;F=new co(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||nd(F,"https"),sd(F),X?Qj(F.toString(),A):Yj(F.toString(),A)}else Tn(2);d.G=0,d.l&&d.l.sa(b),C0(d),x0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function C0(d){if(d.G=0,d.ka=[],d.l){const b=r0(d.h);(b.length!=0||d.i.length!=0)&&(x(d.ka,b),x(d.ka,d.i),d.h.i.length=0,m(d.i),d.i.length=0),d.l.ra()}}function N0(d,b,A){var F=A instanceof co?ms(A):new co(A);if(F.g!="")b&&(F.g=b+"."+F.g),rd(F,F.s);else{var X=l.location;F=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;var ne=new co(null);F&&nd(ne,F),b&&(ne.g=b),X&&rd(ne,X),A&&(ne.l=A),F=ne}return A=d.D,b=d.ya,A&&b&&vt(F,A,b),vt(F,"VER",d.la),Jl(d,F),F}function I0(d,b,A){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new kt(new id({eb:A})):new kt(d.pa),b.Ha(d.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function k0(){}t=k0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dd(){}dd.prototype.g=function(d,b){return new qn(d,b)};function qn(d,b){me.call(this),this.g=new v0(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!w(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!w(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new ua(this)}y(qn,me),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Gp(this.g)},qn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.u&&(A={},A.__data__=wr(d),d=A);b.i.push(new Vj(b.Ya++,d)),b.G==3&&cd(b)},qn.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,qn.aa.N.call(this)};function A0(d){ps.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const A in b){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}y(A0,ps);function R0(){qs.call(this),this.status=1}y(R0,qs);function ua(d){this.g=d}y(ua,k0),ua.prototype.ua=function(){G(this.g,"a")},ua.prototype.ta=function(d){G(this.g,new A0(d))},ua.prototype.sa=function(d){G(this.g,new R0)},ua.prototype.ra=function(){G(this.g,"b")},dd.prototype.createWebChannel=dd.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,OI=function(){return new dd},DI=function(){return Zu()},PI=ao,Cy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ju.NO_ERROR=0,Ju.TIMEOUT=8,Ju.HTTP_ERROR=6,mh=Ju,Kw.COMPLETE="complete",jI=Kw,Xu.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",me.prototype.listen=me.prototype.K,vc=Xu,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,RI=kt}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const rb="@firebase/firestore",sb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Sx("@firebase/firestore");function ga(){return Ho.logLevel}function be(t,...e){if(Ho.logLevel<=qe.DEBUG){const n=e.map(Lx);Ho.debug(`Firestore (${Ll}): ${t}`,...n)}}function Us(t,...e){if(Ho.logLevel<=qe.ERROR){const n=e.map(Lx);Ho.error(`Firestore (${Ll}): ${t}`,...n)}}function El(t,...e){if(Ho.logLevel<=qe.WARN){const n=e.map(Lx);Ho.warn(`Firestore (${Ll}): ${t}`,...n)}}function Lx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LI(t,r,n)}function LI(t,e,n){let r=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Us(r),new Error(r)}function it(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||LI(e,s,r)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class mU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gU{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ks,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ks)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new MI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class yU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const r=i=>{i.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ib(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ib(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=wU(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function Ny(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Vm(s)===Vm(i)?Ke(s,i):Vm(s)?1:-1}return Ke(t.length,e.length)}const _U=55296,EU=57343;function Vm(t){const e=t.charCodeAt(0);return e>=_U&&e<=EU}function bl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="__name__";class $r{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=$r.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ke(e.length,n.length)}static compareSegments(e,n){const r=$r.isNumericId(e),s=$r.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?$r.extractNumericId(e).compare($r.extractNumericId(n)):Ny(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class mt extends $r{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const bU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends $r{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return bU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ob}static keyField(){return new ln([ob])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new _e(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new _e(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(mt.fromString(e))}static fromName(e){return new Ae(mt.fromString(e).popFirst(5))}static empty(){return new Ae(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e,n){if(!n)throw new _e(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TU(t,e,n,r){if(e===!0&&r===!0)throw new _e(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ab(t){if(!Ae.isDocumentKey(t))throw new _e(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lb(t){if(Ae.isDocumentKey(t))throw new _e(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function Fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ip(t);throw new _e(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function zu(t,e){if(!VI(t))throw new _e(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new _e(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=-62135596800,ub=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ub);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cb)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ub}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:qt("string",rt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new rt(0,0))}static max(){return new Me(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function SU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Wi(s,Ae.empty(),e)}function CU(t){return new Wi(t.readTime,t.key,mu)}class Wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wi(Me.min(),Ae.empty(),mu)}static max(){return new Wi(Me.max(),Ae.empty(),mu)}}function NU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==IU)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,r)=>{n(e)})}static reject(e){return new ce((n,r)=>{r(e)})}static waitFor(e){return new ce((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next(s=>s?ce.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ce((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new ce((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function AU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}op.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=-1;function ap(t){return t==null}function uf(t){return t===0&&1/t==-1/0}function RU(t){return typeof t=="number"&&Number.isInteger(t)&&!uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="";function jU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=db(e)),e=PU(t.get(n),e);return db(e)}function PU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case UI:n+="";break;default:n+=i}}return n}function db(t){return t+UI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??sn.RED,this.left=s??sn.EMPTY,this.right=i??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new sn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return sn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new Xt(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BI("Invalid base64 string: "+i):i}}(e);return new hn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const DU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(it(!!t,39018),typeof t=="string"){let e=0;const n=DU.exec(t);if(it(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qi(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="server_timestamp",WI="__type__",HI="__previous_value__",qI="__local_write_time__";function Vx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WI])==null?void 0:r.stringValue)===$I}function lp(t){const e=t.mapValue.fields[HI];return Vx(e)?lp(e):e}function gu(t){const e=Hi(t.mapValue.fields[qI].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const df="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||df}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="__type__",LU="__max__",Vd={mapValue:{}},GI="__vector__",hf="value";function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vx(t)?4:FU(t)?9007199254740991:MU(t)?10:11:Oe(28295,{value:t})}function cs(t,e){if(t===e)return!0;const n=Ki(t);if(n!==Ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gu(t).isEqual(gu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hi(s.timestampValue),l=Hi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qi(s.bytesValue).isEqual(qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Lt(s.geoPointValue.latitude)===Lt(i.geoPointValue.latitude)&&Lt(s.geoPointValue.longitude)===Lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Lt(s.integerValue)===Lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Lt(s.doubleValue),l=Lt(i.doubleValue);return o===l?uf(o)===uf(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return bl(t.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(hb(o)!==hb(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!cs(o[c],l[c])))return!1;return!0}(t,e);default:return Oe(52216,{left:t})}}function vu(t,e){return(t.values||[]).find(n=>cs(n,e))!==void 0}function Tl(t,e){if(t===e)return 0;const n=Ki(t),r=Ki(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Lt(i.integerValue||i.doubleValue),c=Lt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return pb(t.timestampValue,e.timestampValue);case 4:return pb(gu(t),gu(e));case 5:return Ny(t.stringValue,e.stringValue);case 6:return function(i,o){const l=qi(i),c=qi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ke(l[u],c[u]);if(h!==0)return h}return Ke(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ke(Lt(i.latitude),Lt(o.latitude));return l!==0?l:Ke(Lt(i.longitude),Lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,y,m;const l=i.fields||{},c=o.fields||{},u=(p=l[hf])==null?void 0:p.arrayValue,h=(g=c[hf])==null?void 0:g.arrayValue,f=Ke(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((m=h==null?void 0:h.values)==null?void 0:m.length)||0);return f!==0?f:mb(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Vd.mapValue&&o===Vd.mapValue)return 0;if(i===Vd.mapValue)return 1;if(o===Vd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Ny(c[f],h[f]);if(p!==0)return p;const g=Tl(l[c[f]],u[h[f]]);if(g!==0)return g}return Ke(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function pb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Hi(t),r=Hi(e),s=Ke(n.seconds,r.seconds);return s!==0?s:Ke(n.nanos,r.nanos)}function mb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Tl(n[s],r[s]);if(i)return i}return Ke(n.length,r.length)}function Sl(t){return Iy(t)}function Iy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Iy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Iy(n.fields[o])}`;return s+"}"}(t.mapValue):Oe(61005,{value:t})}function gh(t){switch(Ki(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lp(t);return e?16+gh(e):16;case 5:return 2*t.stringValue.length;case 6:return qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+gh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ro(r.fields,(i,o)=>{s+=i.length+gh(o)}),s}(t.mapValue);default:throw Oe(13486,{value:t})}}function gb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ky(t){return!!t&&"integerValue"in t}function Ux(t){return!!t&&"arrayValue"in t}function yb(t){return!!t&&"nullValue"in t}function vb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yh(t){return!!t&&"mapValue"in t}function MU(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[KI])==null?void 0:r.stringValue)===GI}function Lc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lc(t.arrayValue.values[n]);return e}return{...t}}function FU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(n)}setAll(e){let n=ln.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Lc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ro(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vn(Lc(this.value))}}function QI(t){const e=[];return ro(t.fields,(n,r)=>{const s=new ln([n]);if(yh(r)){const i=QI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wn(e,0,Me.min(),Me.min(),Me.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,s){return new wn(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new wn(e,2,n,Me.min(),Me.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Me.min(),Me.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function xb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=Tl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function VU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{}class Ht extends YI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zU(e,n,r):n==="array-contains"?new WU(e,r):n==="in"?new HU(e,r):n==="not-in"?new qU(e,r):n==="array-contains-any"?new KU(e,r):new Ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BU(e,r):new $U(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&Ki(this.value)===Ki(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends YI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vr(e,n)}matches(e){return XI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XI(t){return t.op==="and"}function ZI(t){return UU(t)&&XI(t)}function UU(t){for(const e of t.filters)if(e instanceof Vr)return!1;return!0}function Ay(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+Sl(t.value);if(ZI(t))return t.filters.map(e=>Ay(e)).join(",");{const e=t.filters.map(n=>Ay(n)).join(",");return`${t.op}(${e})`}}function JI(t,e){return t instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&cs(r.value,s.value)}(t,e):t instanceof Vr?function(r,s){return s instanceof Vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&JI(o,s.filters[l]),!0):!1}(t,e):void Oe(19439)}function ek(t){return t instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Sl(n.value)}`}(t):t instanceof Vr?function(n){return n.op.toString()+" {"+n.getFilters().map(ek).join(" ,")+"}"}(t):"Filter"}class zU extends Ht{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class BU extends Ht{constructor(e,n){super(e,"in",n),this.keys=tk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $U extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=tk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class WU extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ux(n)&&vu(n.arrayValue,this.value)}}class HU extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class qU extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vu(this.value.arrayValue,n)}}class KU extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ux(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function _b(t,e=null,n=[],r=[],s=null,i=null,o=null){return new GU(t,e,n,r,s,i,o)}function zx(t){const e=Fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ay(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sl(r)).join(",")),e.Te=n}return e.Te}function Bx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wb(t.startAt,e.startAt)&&wb(t.endAt,e.endAt)}function Ry(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QU(t,e,n,r,s,i,o,l){return new Vl(t,e,n,r,s,i,o,l)}function $x(t){return new Vl(t)}function Eb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nk(t){return t.collectionGroup!==null}function Mc(t){const e=Fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Xt(ln.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new xu(i,r))}),n.has(ln.keyField().canonicalString())||e.Ie.push(new xu(ln.keyField(),r))}return e.Ie}function ss(t){const e=Fe(t);return e.Ee||(e.Ee=YU(e,Mc(t))),e.Ee}function YU(t,e){if(t.limitType==="F")return _b(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xu(s.field,i)});const n=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;return _b(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jy(t,e){const n=t.filters.concat([e]);return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Py(t,e,n){return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return Bx(ss(t),ss(e))&&t.limitType===e.limitType}function rk(t){return`${zx(ss(t))}|lt:${t.limitType}`}function ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ek(s)).join(", ")}]`),ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Sl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Sl(s)).join(",")),`Target(${r})`}(ss(t))}; limitType=${t.limitType})`}function up(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=xb(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Mc(r),s)||r.endAt&&!function(o,l,c){const u=xb(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Mc(r),s))}(t,e)}function XU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sk(t){return(e,n)=>{let r=!1;for(const s of Mc(t)){const i=ZU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZU(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Tl(c,u):Oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return zI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new It(Ae.comparator);function zs(){return JU}const ik=new It(Ae.comparator);function xc(...t){let e=ik;for(const n of t)e=e.insert(n.key,n);return e}function ok(t){let e=ik;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vo(){return Fc()}function ak(){return Fc()}function Fc(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const e8=new It(Ae.comparator),t8=new Xt(Ae.comparator);function Ge(...t){let e=t8;for(const n of t)e=e.add(n);return e}const n8=new Xt(Ke);function r8(){return n8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function lk(t){return{integerValue:""+t}}function s8(t,e){return RU(e)?lk(e):Wx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this._=void 0}}function i8(t,e,n){return t instanceof pf?function(s,i){const o={fields:{[WI]:{stringValue:$I},[qI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vx(i)&&(i=lp(i)),i&&(o.fields[HI]=i),{mapValue:o}}(n,e):t instanceof wu?uk(t,e):t instanceof _u?dk(t,e):function(s,i){const o=ck(s,i),l=bb(o)+bb(s.Ae);return ky(o)&&ky(s.Ae)?lk(l):Wx(s.serializer,l)}(t,e)}function o8(t,e,n){return t instanceof wu?uk(t,e):t instanceof _u?dk(t,e):n}function ck(t,e){return t instanceof mf?function(r){return ky(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pf extends dp{}class wu extends dp{constructor(e){super(),this.elements=e}}function uk(t,e){const n=hk(e);for(const r of t.elements)n.some(s=>cs(s,r))||n.push(r);return{arrayValue:{values:n}}}class _u extends dp{constructor(e){super(),this.elements=e}}function dk(t,e){let n=hk(e);for(const r of t.elements)n=n.filter(s=>!cs(s,r));return{arrayValue:{values:n}}}class mf extends dp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bb(t){return Lt(t.integerValue||t.doubleValue)}function hk(t){return Ux(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wu&&s instanceof wu||r instanceof _u&&s instanceof _u?bl(r.elements,s.elements,cs):r instanceof mf&&s instanceof mf?cs(r.Ae,s.Ae):r instanceof pf&&s instanceof pf}(t.transform,e.transform)}class l8{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hp{}function fk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fp(t.key,Wn.none()):new Bu(t.key,t.data,Wn.none());{const n=t.data,r=Vn.empty();let s=new Xt(ln.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new so(t.key,r,new Zn(s.toArray()),Wn.none())}}function c8(t,e,n){t instanceof Bu?function(s,i,o){const l=s.value.clone(),c=Sb(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof so?function(s,i,o){if(!vh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Sb(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(pk(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vc(t,e,n,r){return t instanceof Bu?function(i,o,l,c){if(!vh(i.precondition,o))return l;const u=i.value.clone(),h=Cb(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof so?function(i,o,l,c){if(!vh(i.precondition,o))return l;const u=Cb(i.fieldTransforms,c,o),h=o.data;return h.setAll(pk(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return vh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function u8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ck(r.transform,s||null);i!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,i))}return n||null}function Tb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&bl(r,s,(i,o)=>a8(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends hp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class so extends hp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sb(t,e,n){const r=new Map;it(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,o8(o,l,n[s]))}return r}function Cb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,i8(i,o,e))}return r}class fp extends hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d8 extends hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&c8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ak();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=fk(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,(n,r)=>Tb(n,r))&&bl(this.baseMutations,e.baseMutations,(n,r)=>Tb(n,r))}}class Hx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return e8}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Hx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Je;function m8(t){switch(t){case ie.OK:return Oe(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function mk(t){if(t===void 0)return Us("GRPC error has no .code"),ie.UNKNOWN;switch(t){case zt.OK:return ie.OK;case zt.CANCELLED:return ie.CANCELLED;case zt.UNKNOWN:return ie.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ie.INTERNAL;case zt.UNAVAILABLE:return ie.UNAVAILABLE;case zt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case zt.NOT_FOUND:return ie.NOT_FOUND;case zt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case zt.ABORTED:return ie.ABORTED;case zt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case zt.DATA_LOSS:return ie.DATA_LOSS;default:return Oe(39323,{code:t})}}(Je=zt||(zt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=new Oi([4294967295,4294967295],0);function Nb(t){const e=g8().encode(t),n=new AI;return n.update(e),new Uint8Array(n.digest())}function Ib(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Oi([n,r],0),new Oi([s,i],0)]}class qx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(r<0)throw new wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Oi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Oi.fromNumber(r)));return s.compare(y8)===1&&(s=new Oi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nb(e),[r,s]=Ib(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Nb(e),[r,s]=Ib(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pp(Me.min(),s,new It(Ke),zs(),Ge())}}class $u{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $u(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class gk{constructor(e,n){this.targetId=e,this.Ce=n}}class yk{constructor(e,n,r=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class kb{constructor(){this.ve=0,this.Fe=Ab(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:i})}}),new $u(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ab()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v8{constructor(e){this.Ge=e,this.ze=new Map,this.je=zs(),this.Je=Ud(),this.He=Ud(),this.Ye=new It(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ry(i))if(r===0){const o=new Ae(i.path);this.et(n,o,wn.newNoDocument(o,Me.min()))}else it(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=qi(r).toUint8Array()}catch(c){if(c instanceof BI)return El("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new qx(o,s,i)}catch(c){return El(c instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Ry(l.target)){const c=new Ae(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,wn.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ge();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new pp(e,n,this.Ye,this.je,r);return this.je=zs(),this.Je=Ud(),this.He=Ud(),this.Ye=new It(Ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xt(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xt(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ud(){return new It(Ae.comparator)}function Ab(){return new It(Ae.comparator)}const x8={asc:"ASCENDING",desc:"DESCENDING"},w8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_8={and:"AND",or:"OR"};class E8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dy(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function gf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b8(t,e){return gf(t,e.toTimestamp())}function is(t){return it(!!t,49232),Me.fromTimestamp(function(n){const r=Hi(n);return new rt(r.seconds,r.nanos)}(t))}function Kx(t,e){return Oy(t,e).canonicalString()}function Oy(t,e){const n=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xk(t){const e=mt.fromString(t);return it(Tk(e),10190,{key:e.toString()}),e}function Ly(t,e){return Kx(t.databaseId,e.path)}function Um(t,e){const n=xk(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(_k(n))}function wk(t,e){return Kx(t.databaseId,e)}function T8(t){const e=xk(t);return e.length===4?mt.emptyPath():_k(e)}function My(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _k(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rb(t,e,n){return{name:Ly(t,e),fields:n.value.mapValue.fields}}function S8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Oe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(it(h===void 0||typeof h=="string",58123),hn.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),hn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?ie.UNKNOWN:mk(u.code);return new _e(h,u.message||"")}(o);n=new yk(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Um(t,r.document.name),i=is(r.document.updateTime),o=r.document.createTime?is(r.document.createTime):Me.min(),l=new Vn({mapValue:{fields:r.document.fields}}),c=wn.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new xh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Um(t,r.document),i=r.readTime?is(r.readTime):Me.min(),o=wn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Um(t,r.document),i=r.removedTargetIds||[];n=new xh([],i,s,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new p8(s,i),l=r.targetId;n=new gk(l,o)}}return n}function C8(t,e){let n;if(e instanceof Bu)n={update:Rb(t,e.key,e.value)};else if(e instanceof fp)n={delete:Ly(t,e.key)};else if(e instanceof so)n={update:Rb(t,e.key,e.data),updateMask:O8(e.fieldMask)};else{if(!(e instanceof d8))return Oe(16599,{Vt:e.type});n={verify:Ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof pf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _u)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mf)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:b8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Oe(27497)}(t,e.precondition)),n}function N8(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?is(s.updateTime):is(i);return o.isEqual(Me.min())&&(o=is(i)),new l8(o,s.transformResults||[])}(n,e))):[]}function I8(t,e){return{documents:[wk(t,e.path)]}}function k8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wk(t,s);const i=function(u){if(u.length!==0)return bk(Vr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:va(p.field),direction:j8(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Dy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function A8(t){let e=T8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){it(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Ek(f);return p instanceof Vr&&ZI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new xu(xa(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,ap(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new ff(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new ff(g,p)}(n.endAt)),QU(e,s,o,i,l,"F",c,u)}function R8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ek(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xa(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xa(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xa(n.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xa(n.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ht.create(xa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vr.create(n.compositeFilter.filters.map(r=>Ek(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(n.compositeFilter.op))}(t):Oe(30097,{filter:t})}function j8(t){return x8[t]}function P8(t){return w8[t]}function D8(t){return _8[t]}function va(t){return{fieldPath:t.canonicalString()}}function xa(t){return ln.fromServerFormat(t.fieldPath)}function bk(t){return t instanceof Ht?function(n){if(n.op==="=="){if(vb(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NAN"}};if(yb(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vb(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NAN"}};if(yb(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(n.field),op:P8(n.op),value:n.value}}}(t):t instanceof Vr?function(n){const r=n.getFilters().map(s=>bk(s));return r.length===1?r[0]:{compositeFilter:{op:D8(n.op),filters:r}}}(t):Oe(54877,{filter:t})}function O8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,s,i=Me.min(),o=Me.min(),l=hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.yt=e}}function M8(t){const e=A8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Py(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.Cn=new V8}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Wi.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class V8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xt(mt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sk=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(Sk,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="LruGarbageCollector",U8=1048576;function Db([t,e],[n,r]){const s=Ke(t,n);return s===0?Ke(e,r):s}class z8{constructor(e){this.Ir=e,this.buffer=new Xt(Db),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Db(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class B8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(Pb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fl(n)?be(Pb,"Ignoring IndexedDB error during garbage collection: ",n):await Ml(n)}await this.Vr(3e5)})}}class $8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(op.ce);const r=new z8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(jb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ga()<=qe.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function W8(t,e){return new $8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vc(r.mutation,s,Zn.empty(),rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const s=vo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=xc();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=zs();const o=Fc(),l=function(){return Fc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof so)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Vc(h.mutation,u,h.mutation.getFieldMask(),rt.now())):o.set(u.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new q8(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Fc();let s=new It((o,l)=>o-l),i=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Zn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ge()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=ak();h.forEach(p=>{if(!i.has(p)){const g=fk(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ce.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ce.resolve(vo());let l=mu,c=i;return o.next(u=>ce.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?ce.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ge())).next(h=>({batchId:l,changes:ok(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let s=xc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=xc();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,c=>{const u=function(f,p){return new Vl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,wn.newInvalidDocument(h)))});let l=xc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Vc(h.mutation,u,Zn.empty(),rt.now()),up(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:is(s.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:M8(s.bundledQuery),readTime:is(s.readTime)}}(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this.overlays=new It(Ae.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vo();return ce.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),ce.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const s=vo(),i=n.length+1,o=new Ae(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new It((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=vo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=vo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return ce.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new f8(n,r));let i=this.qr.get(n);i===void 0&&(i=Ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.Qr=new Xt(Jt.$r),this.Ur=new Xt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ae(new mt([])),r=new Jt(n,e),s=new Jt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new mt([])),r=new Jt(n,e),s=new Jt(n,e+1);let i=Ge();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(Jt.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new h8(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Jt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Fx:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),s=new Jt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Ke);return n.forEach(s=>{const i=new Jt(s,0),o=new Jt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ae.isDocumentKey(i)||(i=i.child(""));const o=new Jt(new Ae(i),0);let l=new Xt(Ke);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),ce.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){it(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ce.forEach(n.mutations,s=>{const i=new Jt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Jt(n,0),s=this.Zr.firstAfterOrEqual(r);return ce.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.ri=e,this.docs=function(){return new It(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=zs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zs();const o=n.path,l=new Ae(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||NU(CU(h),r)<=0||(s.has(h.key)||up(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Oe(9500)}ii(e,n){return ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new J8(this)}getSize(e){return ce.resolve(this.size)}}class J8 extends H8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.persistence=e,this.si=new ra(n=>zx(n),Bx),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Gx,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ce.waitFor(i).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ce.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n){this.ui={},this.overlays={},this.ci=new op(0),this.li=!1,this.li=!0,this.hi=new Y8,this.referenceDelegate=e(this),this.Pi=new ez(this),this.indexManager=new F8,this.remoteDocumentCache=function(s){return new Z8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new L8(n),this.Ii=new G8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new X8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const s=new tz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return ce.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class tz extends kU{constructor(e){super(),this.currentSequenceNumber=e}}class Qx{constructor(e){this.persistence=e,this.Ri=new Gx,this.Vi=null}static mi(e){return new Qx(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,r=>{const s=Ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yf{constructor(e,n){this.persistence=e,this.pi=new ra(r=>jU(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=W8(this,n)}static mi(e,n){return new yf(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ce.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?ce.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Me.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gh(e.data.value)),n}br(e,n,r){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ce.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ge(),s=Ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Yx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return L3()?8:AU(bn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new nz;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ga()<=qe.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(ga()<=qe.DEBUG&&be("QueryEngine","Query:",ya(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ga()<=qe.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):ce.resolve())}ys(e,n){if(Eb(n))return ce.resolve(null);let r=ss(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Py(n,null,"F"),r=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ge(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Py(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return Eb(n)||s.isEqual(Me.min())?ce.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?ce.resolve(null):(ga()<=qe.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ya(n)),this.vs(e,o,n,SU(s,mu)).next(l=>l))})}Ds(e,n){let r=new Xt(sk(e));return n.forEach((s,i)=>{up(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ga()<=qe.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ya(n)),this.ps.getDocumentsMatchingQuery(e,n,Wi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LocalStore",sz=3e8;class iz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new It(Ke),this.xs=new ra(i=>zx(i),Bx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function oz(t,e,n,r){return new iz(t,e,n,r)}async function Nk(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ge();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function az(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=ce.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(c,y)).next(m=>{const x=u.docVersions.get(y);it(x!==null,48541),m.version.compareTo(x)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),h.addEntry(m)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ge();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ik(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function lz(t,e){const n=Fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(hn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(m,x,v){return m.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=sz?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=zs(),u=Ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(cz(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return ce.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function cz(t,e,n){let r=Ge(),s=Ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):be(Xx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function uz(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Fx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dz(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,ce.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Fy(t,e,n){const r=Fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Fl(o))throw o;be(Xx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ob(t,e,n){const r=Fe(t);let s=Me.min(),i=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Fe(c),p=f.xs.get(h);return p!==void 0?ce.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,ss(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Me.min(),n?i:Ge())).next(l=>(hz(r,XU(e),l),{documents:l,Qs:i})))}function hz(t,e,n){let r=t.Os.get(e)||Me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Lb{constructor(){this.activeTargetIds=r8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fz{constructor(){this.Mo=new Lb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Lb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(Mb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(Mb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd=null;function Vy(){return zd===null?zd=function(){return 268435456+Math.round(2147483648*Math.random())}():zd++,"0x"+zd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",mz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===df?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Vy(),l=this.zo(e,n.toUriEncodedString());be(zm,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=eo(u);return this.Jo(e,l,c,r,h).then(f=>(be(zm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw El(zm,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=mz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class vz extends gz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Vy();return new Promise((l,c)=>{const u=new RI;u.setWithCredentials(!0),u.listenOnce(jI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mh.NO_ERROR:const f=u.getResponseJson();be(yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case mh.TIMEOUT:be(yn,`RPC '${e}' ${o} timed out`),c(new _e(ie.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const p=u.getStatus();if(be(yn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const m=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(w)>=0?w:ie.UNKNOWN}(y.status);c(new _e(m,y.message))}else c(new _e(ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new _e(ie.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{be(yn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);be(yn,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Vy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OI(),l=DI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");be(yn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const y=new yz({Yo:x=>{g?be(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(be(yn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),be(yn,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Zo:()=>f.close()}),m=(x,v,w)=>{x.listen(v,_=>{try{w(_)}catch(N){setTimeout(()=>{throw N},0)}})};return m(f,vc.EventType.OPEN,()=>{g||(be(yn,`RPC '${e}' stream ${s} transport opened.`),y.o_())}),m(f,vc.EventType.CLOSE,()=>{g||(g=!0,be(yn,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(f))}),m(f,vc.EventType.ERROR,x=>{g||(g=!0,El(yn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),y.a_(new _e(ie.UNAVAILABLE,"The operation could not be completed")))}),m(f,vc.EventType.MESSAGE,x=>{var v;if(!g){const w=x.data[0];it(!!w,16349);const _=w,N=(_==null?void 0:_.error)||((v=_[0])==null?void 0:v.error);if(N){be(yn,`RPC '${e}' stream ${s} received error:`,N);const C=N.status;let L=function(P){const k=zt[P];if(k!==void 0)return mk(k)}(C),T=N.message;L===void 0&&(L=ie.INTERNAL,T="Unknown error status: "+C+" with message "+N.message),g=!0,y.a_(new _e(L,T)),f.close()}else be(yn,`RPC '${e}' stream ${s} received:`,w),y.u_(w)}}),m(l,PI.STAT_EVENT,x=>{x.stat===Cy.PROXY?be(yn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Cy.NOPROXY&&be(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){return new E8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="PersistentStream";class Ak{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Us(n.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new _e(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(Vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(be(Vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xz extends Ak{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=S8(this.serializer,e),r=function(i){if(!("targetChange"in i))return Me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?is(o.readTime):Me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=My(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ry(c)?{documents:I8(i,c)}:{query:k8(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=vk(i,o.resumeToken);const u=Dy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Me.min())>0){l.readTime=gf(i,o.snapshotVersion.toTimestamp());const u=Dy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=R8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=My(this.serializer),n.removeTarget=e,this.q_(n)}}class wz extends Ak{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=N8(e.writeResults,e.commitTime),r=is(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=My(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>C8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{}class Ez extends _z{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Oy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(ie.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Oy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ie.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Us(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="RemoteStore";class Tz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{sa(this)&&(be(qo,"Restarting streams for network reachability change."),await async function(c){const u=Fe(c);u.Ea.add(4),await Wu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gp(u)}(this))})}),this.Ra=new bz(r,s)}}async function gp(t){if(sa(t))for(const e of t.da)await e(!0)}async function Wu(t){for(const e of t.da)await e(!1)}function Rk(t,e){const n=Fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tw(n)?ew(n):Ul(n).O_()&&Jx(n,e))}function Zx(t,e){const n=Fe(t),r=Ul(n);n.Ia.delete(e),r.O_()&&jk(n,e),n.Ia.size===0&&(r.O_()?r.L_():sa(n)&&n.Ra.set("Unknown"))}function Jx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ul(t).Y_(e)}function jk(t,e){t.Va.Ue(e),Ul(t).Z_(e)}function ew(t){t.Va=new v8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ul(t).start(),t.Ra.ua()}function tw(t){return sa(t)&&!Ul(t).x_()&&t.Ia.size>0}function sa(t){return Fe(t).Ea.size===0}function Pk(t){t.Va=void 0}async function Sz(t){t.Ra.set("Online")}async function Cz(t){t.Ia.forEach((e,n)=>{Jx(t,e)})}async function Nz(t,e){Pk(t),tw(t)?(t.Ra.ha(e),ew(t)):t.Ra.set("Unknown")}async function Iz(t,e,n){if(t.Ra.set("Online"),e instanceof yk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){be(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vf(t,r)}else if(e instanceof xh?t.Va.Ze(e):e instanceof gk?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const r=await Ik(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),jk(i,c);const f=new Ei(h.target,c,u,h.sequenceNumber);Jx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){be(qo,"Failed to raise snapshot:",r),await vf(t,r)}}async function vf(t,e,n){if(!Fl(e))throw e;t.Ea.add(1),await Wu(t),t.Ra.set("Offline"),n||(n=()=>Ik(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(qo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gp(t)})}function Dk(t,e){return e().catch(n=>vf(t,n,e))}async function yp(t){const e=Fe(t),n=Gi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fx;for(;kz(e);)try{const s=await uz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Az(e,s)}catch(s){await vf(e,s)}Ok(e)&&Lk(e)}function kz(t){return sa(t)&&t.Ta.length<10}function Az(t,e){t.Ta.push(e);const n=Gi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ok(t){return sa(t)&&!Gi(t).x_()&&t.Ta.length>0}function Lk(t){Gi(t).start()}async function Rz(t){Gi(t).ra()}async function jz(t){const e=Gi(t);for(const n of t.Ta)e.ea(n.mutations)}async function Pz(t,e,n){const r=t.Ta.shift(),s=Hx.from(r,e,n);await Dk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yp(t)}async function Dz(t,e){e&&Gi(t).X_&&await async function(r,s){if(function(o){return m8(o)&&o!==ie.ABORTED}(s.code)){const i=r.Ta.shift();Gi(r).B_(),await Dk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yp(r)}}(t,e),Ok(t)&&Lk(t)}async function Ub(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),be(qo,"RemoteStore received new credentials");const r=sa(n);n.Ea.add(3),await Wu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gp(n)}async function Oz(t,e){const n=Fe(t);e?(n.Ea.delete(2),await gp(n)):e||(n.Ea.add(2),await Wu(n),n.Ra.set("Unknown"))}function Ul(t){return t.ma||(t.ma=function(n,r,s){const i=Fe(n);return i.sa(),new xz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Sz.bind(null,t),t_:Cz.bind(null,t),r_:Nz.bind(null,t),H_:Iz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),tw(t)?ew(t):t.Ra.set("Unknown")):(await t.ma.stop(),Pk(t))})),t.ma}function Gi(t){return t.fa||(t.fa=function(n,r,s){const i=Fe(n);return i.sa(),new wz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Rz.bind(null,t),r_:Dz.bind(null,t),ta:jz.bind(null,t),na:Pz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yp(t)):(await t.fa.stop(),t.Ta.length>0&&(be(qo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new nw(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rw(t,e){if(Us("AsyncQueue",`${e}: ${t}`),Fl(t))return new _e(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=xc(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.ga=new It(Ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Nl(e,n,qa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Mz{constructor(){this.queries=Bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Fe(n),i=s.queries;s.queries=Bb(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new _e(ie.ABORTED,"Firestore shutting down"))}}function Bb(){return new ra(t=>rk(t),cp)}async function Mk(t,e){const n=Fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Lz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=rw(o,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&sw(n)}async function Fk(t,e){const n=Fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fz(t,e){const n=Fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&sw(n)}function Vz(t,e,n){const r=Fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function sw(t){t.Ca.forEach(e=>{e.next()})}var Uy,$b;($b=Uy||(Uy={})).Ma="default",$b.Cache="cache";class Vk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.key=e}}class zk{constructor(e){this.key=e}}class Uz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=sk(e),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=up(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),m=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;p&&g?p.data.isEqual(g.data)?y!==m&&(r.track({type:3,doc:g}),x=!0):this.su(p,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),x=!0):p&&!g&&(r.track({type:1,doc:p}),x=!0,(c||u)&&(l=!0)),x&&(g?(o=o.add(g),i=m?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,y){const m=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:x})}};return m(g)-m(y)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Nl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new zk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Uk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iw="SyncEngine";class zz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Bz{constructor(e){this.key=e,this.hu=!1}}class $z{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ra(l=>rk(l),cp),this.Iu=new Map,this.Eu=new Set,this.du=new It(Ae.comparator),this.Au=new Map,this.Ru=new Gx,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wz(t,e,n=!0){const r=Kk(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Bk(r,e,n,!0),s}async function Hz(t,e){const n=Kk(t);await Bk(n,e,!0,!1)}async function Bk(t,e,n,r){const s=await dz(t.localStore,ss(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await qz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Rk(t.remoteStore,s),l}async function qz(t,e,n,r,s){t.pu=(f,p,g)=>async function(m,x,v,w){let _=x.view.ru(v);_.Cs&&(_=await Ob(m.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,_)));const N=w&&w.targetChanges.get(x.targetId),C=w&&w.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(_,m.isPrimaryClient,N,C);return Hb(m,x.targetId,L.au),L.snapshot}(t,f,p,g);const i=await Ob(t.localStore,e,!0),o=new Uz(e,i.Qs),l=o.ru(i.documents),c=$u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Hb(t,n,u.au);const h=new zz(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Kz(t,e,n){const r=Fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!cp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zx(r.remoteStore,s.targetId),zy(r,s.targetId)}).catch(Ml)):(zy(r,s.targetId),await Fy(r.localStore,s.targetId,!0))}async function Gz(t,e){const n=Fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zx(n.remoteStore,r.targetId))}async function Qz(t,e,n){const r=n9(t);try{const s=await function(o,l){const c=Fe(o),u=rt.now(),h=l.reduce((g,y)=>g.add(y.key),Ge());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=zs(),m=Ge();return c.Ns.getEntries(g,h).next(x=>{y=x,y.forEach((v,w)=>{w.isValidDocument()||(m=m.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(x=>{f=x;const v=[];for(const w of l){const _=u8(w,f.get(w.key).overlayedDocument);_!=null&&v.push(new so(w.key,_,QI(_.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,v,l)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(f,m);return c.documentOverlayCache.saveOverlays(g,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:ok(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new It(Ke)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Hu(r,s.changes),await yp(r.remoteStore)}catch(s){const i=rw(s,"Failed to persist write");n.reject(i)}}async function $k(t,e){const n=Fe(t);try{const r=await lz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?it(o.hu,14607):s.removedDocuments.size>0&&(it(o.hu,42227),o.hu=!1))}),await Hu(n,r,e)}catch(r){await Ml(r)}}function Wb(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Fe(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&sw(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yz(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new It(Ae.comparator);o=o.insert(i,wn.newNoDocument(i,Me.min()));const l=Ge().add(i),c=new pp(Me.min(),new Map,new It(Ke),o,l);await $k(r,c),r.du=r.du.remove(i),r.Au.delete(e),ow(r)}else await Fy(r.localStore,e,!1).then(()=>zy(r,e,n)).catch(Ml)}async function Xz(t,e){const n=Fe(t),r=e.batch.batchId;try{const s=await az(n.localStore,e);Hk(n,r,null),Wk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(n,s)}catch(s){await Ml(s)}}async function Zz(t,e,n){const r=Fe(t);try{const s=await function(o,l){const c=Fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(it(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);Hk(r,e,n),Wk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hu(r,s)}catch(s){await Ml(s)}}function Wk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Hk(t,e,n){const r=Fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||qk(t,r)})}function qk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Zx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ow(t))}function Hb(t,e,n){for(const r of n)r instanceof Uk?(t.Ru.addReference(r.key,e),Jz(t,r)):r instanceof zk?(be(iw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||qk(t,r.key)):Oe(19791,{wu:r})}function Jz(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(be(iw,"New document in limbo: "+n),t.Eu.add(r),ow(t))}function ow(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(mt.fromString(e)),r=t.fu.next();t.Au.set(r,new Bz(n)),t.du=t.du.insert(n,r),Rk(t.remoteStore,new Ei(ss($x(n.path)),r,"TargetPurposeLimboResolution",op.ce))}}async function Hu(t,e,n){const r=Fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Yx.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=Fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ce.forEach(u,p=>ce.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>ce.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Fl(f))throw f;be(Xx,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),y=g.snapshotVersion,m=g.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(p,m)}}}(r.localStore,i))}async function e9(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){be(iw,"User change. New user:",e.toKey());const r=await Nk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new _e(ie.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(n,r.Ls)}}function t9(t,e){const n=Fe(t),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let s=Ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Kk(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$k.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yz.bind(null,e),e.Pu.H_=Fz.bind(null,e.eventManager),e.Pu.yu=Vz.bind(null,e.eventManager),e}function n9(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zz.bind(null,e),e}class xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oz(this.persistence,new rz,e.initialUser,this.serializer)}Cu(e){return new Ck(Qx.mi,this.serializer)}Du(e){return new fz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xf.provider={build:()=>new xf};class r9 extends xf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){it(this.persistence.referenceDelegate instanceof yf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new B8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new Ck(r=>yf.mi(r,n),this.serializer)}}class By{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),await Oz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mz}()}createDatastore(e){const n=mp(e.databaseInfo.databaseId),r=function(i){return new vz(i)}(e.databaseInfo);return function(i,o,l,c){return new Ez(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Tz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wb(this.syncEngine,n,0),function(){return Fb.v()?new Fb:new pz}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new $z(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Fe(s);be(qo,"RemoteStore shutting down."),i.Ea.add(5),await Wu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}By.provider={build:()=>new By};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="FirestoreClient";class s9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=Mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{be(Qi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(be(Qi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $m(t,e){t.asyncQueue.verifyOperationInProgress(),be(Qi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Nk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await i9(t);be(Qi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ub(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ub(e.remoteStore,s)),t._onlineComponents=e}async function i9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(Qi,"Using user provided OfflineComponentProvider");try{await $m(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;El("Error using user provided cache. Falling back to memory cache: "+n),await $m(t,new xf)}}else be(Qi,"Using default OfflineComponentProvider"),await $m(t,new r9(void 0));return t._offlineComponents}async function Qk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(Qi,"Using user provided OnlineComponentProvider"),await qb(t,t._uninitializedComponentsProvider._online)):(be(Qi,"Using default OnlineComponentProvider"),await qb(t,new By))),t._onlineComponents}function o9(t){return Qk(t).then(e=>e.syncEngine)}async function Yk(t){const e=await Qk(t),n=e.eventManager;return n.onListen=Wz.bind(null,e.syncEngine),n.onUnlisten=Kz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gz.bind(null,e.syncEngine),n}function a9(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new Gk({next:p=>{h.Nu(),o.enqueueAndForget(()=>Fk(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new _e(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new _e(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Vk($x(l.path),h,{includeMetadataChanges:!0,qa:!0});return Mk(i,f)}(await Yk(t),t.asyncQueue,e,n,r)),r.promise}function l9(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new Gk({next:p=>{h.Nu(),o.enqueueAndForget(()=>Fk(i,f)),p.fromCache&&c.source==="server"?u.reject(new _e(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Vk(l,h,{includeMetadataChanges:!0,qa:!0});return Mk(i,f)}(await Yk(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="firestore.googleapis.com",Gb=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zk,this.ssl=Gb}else this.host=e.host,this.ssl=e.ssl??Gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U8)throw new _e(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pU;switch(r.type){case"firstParty":return new vU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kb.get(n);r&&(be("ComponentProvider","Removing Datastore"),Kb.delete(n),r.terminate())}(this),Promise.resolve()}}function c9(t,e,n,r={}){var u;t=Fr(t,vp);const s=eo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(bx(`https://${l}`),Tx("Firestore",!0)),i.host!==Zk&&i.host!==l&&El("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!zo(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=vn.MOCK_USER;else{h=WN(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new _e(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vn(p)}t._authCredentials=new mU(new MI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zu(n,Vt._jsonSchema))return new Vt(e,r||null,new Ae(mt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:qt("string",Vt._jsonSchemaVersion),referencePath:qt("string")};class Li extends ia{constructor(e,n,r){super(e,n,$x(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Ae(e))}withConverter(e){return new Li(this.firestore,e,this._path)}}function bt(t,e,...n){if(t=Nt(t),FI("collection","path",e),t instanceof vp){const r=mt.fromString(e,...n);return lb(r),new Li(t,null,r)}{if(!(t instanceof Vt||t instanceof Li))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return lb(r),new Li(t.firestore,null,r)}}function Kt(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=Mx.newId()),FI("doc","path",e),t instanceof vp){const r=mt.fromString(e,...n);return ab(r),new Vt(t,null,new Ae(r))}{if(!(t instanceof Vt||t instanceof Li))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return ab(r),new Vt(t.firestore,t instanceof Li?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="AsyncQueue";class Xb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kk(this,"async_queue_retry"),this._c=()=>{const r=Bm();r&&be(Yb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fl(e))throw e;be(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Us("INTERNAL UNHANDLED ERROR: ",Zb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=nw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Oe(47125,{Pc:Zb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class oa extends vp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xb(e),this._firestoreClient=void 0,await e}}}function u9(t,e){const n=typeof t=="object"?t:Nx(),r=typeof t=="string"?t:df,s=tp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zN("firestore");i&&c9(s,...i)}return s}function xp(t){if(t._terminated)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d9(t),t._firestoreClient}function d9(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new OU(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new s9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(hn.fromBase64String(e))}catch(n){throw new _e(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ur(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:qt("string",ur._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(zu(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:qt("string",os._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:as._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,as._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new as(e.vectorValues);throw new _e(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}as._jsonSchemaVersion="firestore/vectorValue/1.0",as._jsonSchema={type:qt("string",as._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=/^__.*__$/;class f9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new so(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}class Jk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new so(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:t})}}class lw{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eA(this.Ac)&&h9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class p9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mp(e)}Cc(e,n,r,s=!1){return new lw({Ac:e,methodName:n,Dc:r,path:ln.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wp(t){const e=t._freezeSettings(),n=mp(t._databaseId);return new p9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tA(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);cw("Data must be an object, but it was:",o,r);const l=sA(r,o);let c,u;if(i.merge)c=new Zn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=$y(e,f,n);if(!o.contains(p))throw new _e(ie.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);oA(h,p)||h.push(p)}c=new Zn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new f9(new Vn(l),c,u)}class _p extends aw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _p}}function nA(t,e,n,r){const s=t.Cc(1,e,n);cw("Data must be an object, but it was:",s,r);const i=[],o=Vn.empty();ro(r,(c,u)=>{const h=uw(e,c,n);u=Nt(u);const f=s.yc(h);if(u instanceof _p)i.push(h);else{const p=Ku(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Zn(i);return new Jk(o,l,s.fieldTransforms)}function rA(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[$y(e,r,n)],c=[s];if(i.length%2!=0)throw new _e(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push($y(e,i[p])),c.push(i[p+1]);const u=[],h=Vn.empty();for(let p=l.length-1;p>=0;--p)if(!oA(u,l[p])){const g=l[p];let y=c[p];y=Nt(y);const m=o.yc(g);if(y instanceof _p)u.push(g);else{const x=Ku(y,m);x!=null&&(u.push(g),h.set(g,x))}}const f=new Zn(u);return new Jk(h,f,o.fieldTransforms)}function m9(t,e,n,r=!1){return Ku(n,t.Cc(r?4:3,e))}function Ku(t,e){if(iA(t=Nt(t)))return cw("Unsupported field value:",e,t),sA(t,e);if(t instanceof aw)return function(r,s){if(!eA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Ku(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s8(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=rt.fromDate(r);return{timestampValue:gf(s.serializer,i)}}if(r instanceof rt){const i=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gf(s.serializer,i)}}if(r instanceof os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:vk(s.serializer,r._byteString)};if(r instanceof Vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof as)return function(o,l){return{mapValue:{fields:{[KI]:{stringValue:GI},[hf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Wx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ip(r)}`)}(t,e)}function sA(t,e){const n={};return zI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,(r,s)=>{const i=Ku(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof os||t instanceof ur||t instanceof Vt||t instanceof aw||t instanceof as)}function cw(t,e,n){if(!iA(n)||!VI(n)){const r=ip(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $y(t,e,n){if((e=Nt(e))instanceof qu)return e._internalPath;if(typeof e=="string")return uw(t,e);throw wf("Field path arguments must be of type string or ",t,!1,void 0,n)}const g9=new RegExp("[~\\*/\\[\\]]");function uw(t,e,n){if(e.search(g9)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qu(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new _e(ie.INVALID_ARGUMENT,l+t+c)}function oA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ep("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y9 extends aA{data(){return super.data()}}function Ep(t,e){return typeof e=="string"?uw(t,e):e instanceof qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dw{}class lA extends dw{}function As(t,e,...n){let r=[];e instanceof dw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof hw).length,l=i.filter(c=>c instanceof bp).length;if(o>1||o>0&&l>0)throw new _e(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bp extends lA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bp(e,n,r)}_apply(e){const n=this._parse(e);return uA(e._query,n),new ia(e.firestore,e.converter,jy(e._query,n))}_parse(e){const n=wp(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){e1(f,h);const y=[];for(const m of f)y.push(Jb(c,i,m));p={arrayValue:{values:y}}}else p=Jb(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||e1(f,h),p=m9(l,o,f,h==="in"||h==="not-in");return Ht.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rs(t,e,n){const r=e,s=Ep("where",t);return bp._create(s,r,n)}class hw extends dw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)uA(o,c),o=jy(o,c)}(e._query,n),new ia(e.firestore,e.converter,jy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fw extends lA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fw(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(i,o)}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Vl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function cA(t,e="asc"){const n=e,r=Ep("orderBy",t);return fw._create(r,n)}function Jb(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new _e(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nk(e)&&n.indexOf("/")!==-1)throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!Ae.isDocumentKey(r))throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gb(t,new Ae(r))}if(n instanceof Vt)return gb(t,n._key);throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(n)}.`)}function e1(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uA(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x9{convertValue(e,n="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ro(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[hf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Lt(o.doubleValue));return new as(n)}convertGeoPoint(e){return new os(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);it(Tk(r),9688,{name:e});const s=new yu(r.get(1),r.get(3)),i=new Ae(r.popFirst(5));return s.isEqual(n)||Us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ko extends aA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ko._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",ko._jsonSchema={type:qt("string",ko._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class wh extends ko{data(e={}){return super.data(e)}}class Ka{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new _c(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wh(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new wh(s._firestore,s._userDataWriter,l.doc.key,l.doc,new _c(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new wh(s._firestore,s._userDataWriter,l.doc.key,l.doc,new _c(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:w9(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){t=Fr(t,Vt);const e=Fr(t.firestore,oa);return a9(xp(e),t._key).then(n=>_9(e,t,n))}Ka._jsonSchemaVersion="firestore/querySnapshot/1.0",Ka._jsonSchema={type:qt("string",Ka._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class hA extends x9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function un(t){t=Fr(t,ia);const e=Fr(t.firestore,oa),n=xp(e),r=new hA(e);return v9(t._query),l9(n,t._query).then(s=>new Ka(e,r,t,s))}function $s(t,e,n){t=Fr(t,Vt);const r=Fr(t.firestore,oa),s=dA(t.converter,e,n);return Tp(r,[tA(wp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wn.none())])}function aa(t,e,n,...r){t=Fr(t,Vt);const s=Fr(t.firestore,oa),i=wp(s);let o;return o=typeof(e=Nt(e))=="string"||e instanceof qu?rA(i,"updateDoc",t._key,e,n,r):nA(i,"updateDoc",t._key,e),Tp(s,[o.toMutation(t._key,Wn.exists(!0))])}function fA(t){return Tp(Fr(t.firestore,oa),[new fp(t._key,Wn.none())])}function Tp(t,e){return function(r,s){const i=new ks;return r.asyncQueue.enqueueAndForget(async()=>Qz(await o9(r),s,i)),i.promise}(xp(t),e)}function _9(t,e,n){const r=n.docs.get(e._key),s=new hA(t);return new ko(t,s,e._key,r,new _c(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wp(e)}set(e,n,r){this._verifyNotCommitted();const s=Wm(e,this._firestore),i=dA(s.converter,n,r),o=tA(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Wn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Wm(e,this._firestore);let o;return o=typeof(n=Nt(n))=="string"||n instanceof qu?rA(this._dataReader,"WriteBatch.update",i._key,n,r,s):nA(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wm(e,this._firestore);return this._mutations=this._mutations.concat(new fp(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wm(t,e){if((t=Nt(t)).firestore!==e)throw new _e(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t){return xp(t=Fr(t,oa)),new E9(t,e=>Tp(t,e))}(function(e,n=!0){(function(s){Ll=s})(ta),Bo(new $i("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new oa(new gU(r.getProvider("auth-internal")),new xU(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ts(rb,sb,e),ts(rb,sb,"esm2020")})();var b9="firebase",T9="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(b9,T9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebasestorage.googleapis.com",mA="storageBucket",S9=2*60*1e3,C9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends ds{constructor(e,n,r=0){super(Hm(e),`Firebase Storage: ${n} (${Hm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Hm(t){return"storage/"+t}function mw(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,t)}function N9(t){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function I9(t){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,t)}function A9(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function R9(t){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function j9(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function P9(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function D9(t){return new Ot(Dt.INVALID_URL,"Invalid URL '"+t+"'.")}function O9(t){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function L9(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mA+"' property when initializing the app?")}function M9(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function F9(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function V9(t){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wy(t){return new Ot(Dt.INVALID_ARGUMENT,t)}function gA(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function U9(t){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uc(t,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uc(t){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw O9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},m=n===pA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${m}/${s}/${x}`,"i"),_=[{regex:l,indices:c,postModify:i},{regex:g,indices:y,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<_.length;N++){const C=_[N],L=C.regex.exec(e);if(L){const T=L[C.indices.bucket];let S=L[C.indices.path];S||(S=""),r=new Jn(T,S),C.postModify(r);break}}if(r==null)throw D9(e);return r}}class z9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...x){u||(u=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(g,c())},x)}function p(){i&&clearTimeout(i)}function g(x,...v){if(u){p();return}if(x){p(),h.call(null,x,...v);return}if(c()||o){p(),h.call(null,x,...v);return}r<64&&(r*=2);let _;l===1?(l=2,_=0):_=(r+Math.random())*1e3,f(_)}let y=!1;function m(x){y||(y=!0,p(),!u&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,m(!0)},n),m}function $9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){return t!==void 0}function H9(t){return typeof t=="object"&&!Array.isArray(t)}function gw(t){return typeof t=="string"||t instanceof String}function t1(t){return yw()&&t instanceof Blob}function yw(){return typeof Blob<"u"}function n1(t,e,n,r){if(r<e)throw Wy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Wy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function yA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ao;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ao||(Ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n,r,s,i,o,l,c,u,h,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,m)=>{this.resolve_=y,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ao.NO_ERROR,c=i.getStatus();if(!l||q9(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ao.ABORT;r(!1,new Bd(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Bd(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());W9(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=mw();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?gA():P9();o(c)}else{const c=j9();o(c)}};this.canceled_?n(!1,new Bd(!1,null,!0)):this.backoffId_=B9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function G9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Y9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function X9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Z9(t,e,n,r,s,i,o=!0,l=!1){const c=yA(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return Y9(h,e),G9(h,n),Q9(h,i),X9(h,r),new K9(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eB(...t){const e=J9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(yw())return new Blob(t);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tB(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){if(typeof atob>"u")throw V9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qm{constructor(e,n){this.data=e,this.contentType=n||null}}function rB(t,e){switch(t){case Yr.RAW:return new qm(vA(e));case Yr.BASE64:case Yr.BASE64URL:return new qm(xA(t,e));case Yr.DATA_URL:return new qm(iB(e),oB(e))}throw mw()}function vA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sB(t){let e;try{e=decodeURIComponent(t)}catch{throw Uc(Yr.DATA_URL,"Malformed data URL.")}return vA(e)}function xA(t,e){switch(t){case Yr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Uc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Yr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Uc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nB(e)}catch(s){throw s.message.includes("polyfill")?s:Uc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class wA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Uc(Yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=aB(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iB(t){const e=new wA(t);return e.base64?xA(Yr.BASE64,e.rest):sB(e.rest)}function oB(t){return new wA(t).contentType}function aB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){let r=0,s="";t1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(t1(this.data_)){const r=this.data_,s=tB(r,e,n);return s===null?null:new di(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new di(r,!0)}}static getBlob(...e){if(yw()){const n=e.map(r=>r instanceof di?r.data_:r);return new di(eB.apply(null,n))}else{const n=e.map(o=>gw(o)?rB(Yr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new di(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){let e;try{e=JSON.parse(t)}catch{return null}return H9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cB(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function EA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){return e}class Sn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uB}}let $d=null;function dB(t){return!gw(t)||t.length<2?t:EA(t)}function bA(){if($d)return $d;const t=[];t.push(new Sn("bucket")),t.push(new Sn("generation")),t.push(new Sn("metageneration")),t.push(new Sn("name","fullPath",!0));function e(i,o){return dB(o)}const n=new Sn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Sn("size");return s.xform=r,t.push(s),t.push(new Sn("timeCreated")),t.push(new Sn("updated")),t.push(new Sn("md5Hash",null,!0)),t.push(new Sn("cacheControl",null,!0)),t.push(new Sn("contentDisposition",null,!0)),t.push(new Sn("contentEncoding",null,!0)),t.push(new Sn("contentLanguage",null,!0)),t.push(new Sn("contentType",null,!0)),t.push(new Sn("metadata","customMetadata",!0)),$d=t,$d}function hB(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function fB(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return hB(r,t),r}function TA(t,e,n){const r=_A(e);return r===null?null:fB(t,r,n)}function pB(t,e,n,r){const s=_A(e);if(s===null||!gw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),g=vw(p,n,r),y=yA({alt:"media",token:u});return g+y})[0]}function mB(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class SA{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){if(!t)throw mw()}function gB(t,e){function n(r,s){const i=TA(t,s,e);return CA(i!==null),i}return n}function yB(t,e){function n(r,s){const i=TA(t,s,e);return CA(i!==null),pB(i,s,t.host,t._protocol)}return n}function NA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=A9():s=k9():n.getStatus()===402?s=I9(t.bucket):n.getStatus()===403?s=R9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function vB(t){const e=NA(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=N9(t.path)),i.serverResponse=s.serverResponse,i}return n}function xB(t,e,n){const r=e.fullServerUrl(),s=vw(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new SA(s,i,yB(t,n),o);return l.errorHandler=vB(e),l}function wB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _B(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=wB(null,e)),r}function EB(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let N=0;N<2;N++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=_B(e,r,s),h=mB(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",g=di.getBlob(f,r,p);if(g===null)throw M9();const y={name:u.fullPath},m=vw(i,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,w=new SA(m,x,gB(t,n),v);return w.urlParams=y,w.headers=o,w.body=g.uploadData(),w.errorHandler=NA(e),w}class bB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw uc("cannot .send() more than once");if(eo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TB extends bB{initXhr(){this.xhr_.responseType="text"}}function IA(){return new TB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ko(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EA(this._location.path)}get storage(){return this._service}get parent(){const e=lB(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Ko(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw U9(e)}}function SB(t,e,n){t._throwIfRoot("uploadBytes");const r=EB(t.storage,t._location,bA(),new di(e,!0),n);return t.storage.makeRequestWithTokens(r,IA).then(s=>({metadata:s,ref:t}))}function CB(t){t._throwIfRoot("getDownloadURL");const e=xB(t.storage,t._location,bA());return t.storage.makeRequestWithTokens(e,IA).then(n=>{if(n===null)throw F9();return n})}function NB(t,e){const n=cB(t._location.path,e),r=new Jn(t._location.bucket,n);return new Ko(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(t){return/^[A-Za-z]+:\/\//.test(t)}function kB(t,e){return new Ko(t,e)}function kA(t,e){if(t instanceof xw){const n=t;if(n._bucket==null)throw L9();const r=new Ko(n,n._bucket);return e!=null?kA(r,e):r}else return e!==void 0?NB(t,e):t}function AB(t,e){if(e&&IB(e)){if(t instanceof xw)return kB(t,e);throw Wy("To use ref(service, url), the first argument must be a Storage instance.")}else return kA(t,e)}function r1(t,e){const n=e==null?void 0:e[mA];return n==null?null:Jn.makeFromBucketSpec(n,t)}function RB(t,e,n,r={}){t.host=`${e}:${n}`;const s=eo(e);s&&(bx(`https://${t.host}/b`),Tx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:WN(i,t.app.options.projectId))}class xw{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=pA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S9,this._maxUploadRetryTime=C9,this._requests=new Set,s!=null?this._bucket=Jn.makeFromBucketSpec(s,this._host):this._bucket=r1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=r1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){n1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){n1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ko(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new z9(gA());{const o=Z9(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const s1="@firebase/storage",i1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="storage";function jB(t,e,n){return t=Nt(t),SB(t,e,n)}function PB(t){return t=Nt(t),CB(t)}function DB(t,e){return t=Nt(t),AB(t,e)}function OB(t=Nx(),e){t=Nt(t);const r=tp(t,AA).getImmediate({identifier:e}),s=zN("storage");return s&&LB(r,...s),r}function LB(t,e,n,r={}){RB(t,e,n,r)}function MB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xw(n,r,s,e,ta)}function FB(){Bo(new $i(AA,MB,"PUBLIC").setMultipleInstances(!0)),ts(s1,i1,""),ts(s1,i1,"esm2020")}FB();const ir={apiKey:"AIzaSyChkqfXWJqQr3wbN8jL3qAkmKQEz5Mdr7o",authDomain:"oil-delivery-6bcc4.firebaseapp.com",projectId:"oil-delivery-6bcc4",storageBucket:"oil-delivery-6bcc4.firebasestorage.app",messagingSenderId:"136339484143",appId:"1:136339484143:web:7b9c14cd8f5a5c8d5e7b8f",measurementId:"G-KM58SN9WYL"};let Sp;try{if(!ir.apiKey||!ir.projectId||!ir.appId)throw console.error("Missing Firebase configuration:",{hasApiKey:!!ir.apiKey,hasProjectId:!!ir.projectId,hasAppId:!!ir.appId}),new Error("Firebase configuration is incomplete");Sp=PE().length===0?KN(ir):PE()[0],console.log("Firebase initialized successfully with project:",ir.projectId),console.log("Firebase config used:",{projectId:ir.projectId,authDomain:ir.authDomain,hasApiKey:!!ir.apiKey,hasAppId:!!ir.appId})}catch(t){throw console.error("Firebase initialization error:",t),document.body.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: linear-gradient(to bottom right, #3b82f6, #8b5cf6);
      font-family: system-ui, -apple-system, sans-serif;
    ">
      <div style="
        background: white; 
        padding: 2rem; 
        border-radius: 0.5rem; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
        max-width: 400px;
      ">
        <h1 style="color: #dc2626; margin: 0 0 1rem 0;">Configuration Error</h1>
        <p style="color: #374151; margin: 0 0 1rem 0;">
          Firebase configuration is missing or invalid. Please check the deployment setup.
        </p>
        <p style="color: #6b7280; font-size: 0.875rem; margin: 0;">
          Contact administrator for assistance.
        </p>
      </div>
    </div>
  `,t}const Cp=hU(Sp),We=u9(Sp),VB=OB(Sp),UB=async(t,e=.8,n=1200)=>new Promise(r=>{const s=document.createElement("canvas"),i=s.getContext("2d"),o=new Image;o.onload=()=>{let{width:l,height:c}=o;l>n&&(c=c*n/l,l=n),s.width=l,s.height=c,i.drawImage(o,0,0,l,c),s.toBlob(u=>{u&&r(u)},"image/jpeg",e)},o.src=URL.createObjectURL(t)}),RA=async(t,e="photos")=>{try{const n=await UB(t,.8,1200),s=`${new Date().toISOString().replace(/[:.]/g,"-")}-${Math.random().toString(36).substr(2,9)}.jpg`,i=`${e}/${s}`,o=DB(VB,i);console.log("Uploading compressed photo to Firebase Storage...");const l=await jB(o,n),c=await PB(l.ref);return console.log("Compressed photo uploaded successfully:",c),c}catch(n){throw console.error("Error uploading photo to Firebase Storage:",n),new Error("Failed to upload photo. Please try again.")}};new Es;const zB=async()=>{try{await tV(Cp)}catch(t){throw console.error("Error signing out:",t),t}},BB=async t=>{try{const e=bt(We,"complaints"),n=As(e,Rs("reportedBy","==",t),cA("createdAt","desc"));return(await un(n)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt||new Date,updatedAt:s.data().updatedAt||new Date,resolvedAt:s.data().resolvedAt||null}))}catch(e){return console.error("Error getting user complaints:",e),[]}},$B=async()=>{try{return[]}catch(t){return console.error("Error getting all deliveries:",t),[]}},jA=async()=>{try{const t=bt(We,"complaints");return(await un(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date,resolvedAt:((i=n.data().resolvedAt)==null?void 0:i.toDate())||null}})}catch(t){return console.error("Error getting all complaints:",t),[]}},PA=async t=>{try{const e=Kt(bt(We,"complaints")),n={...t,id:e.id,createdAt:new Date,updatedAt:new Date};return await $s(e,n),n}catch(e){throw console.error("Error saving complaint:",e),e}},o1=async(t,e)=>{try{const n=Kt(We,"complaints",t);await aa(n,{...e,updatedAt:new Date})}catch(n){throw console.error("Error updating complaint:",n),n}},Np=async()=>{try{const t=bt(We,"users");return(await un(t)).docs.map(n=>n.data())}catch(t){return console.error("Error getting all users:",t),[]}},WB=async t=>{try{const n=(await XF(Cp,t.email,t.password)).user;return await $s(Kt(We,"users",n.uid),{uid:n.uid,email:n.email,role:"driver",displayName:t.displayName,photoURL:n.photoURL,createdAt:new Date,lastLoginAt:new Date,active:!0,empNo:t.empNo,driverLicenceNo:t.driverLicenceNo,tankerLicenceNo:t.tankerLicenceNo||t.driverLicenceNo,licenceExpiryDate:t.licenceExpiryDate}),n}catch(e){throw console.error("Error creating driver account:",e),e.code==="auth/email-already-in-use"?new Error("Email is already registered. Please use a different email address."):e.code==="auth/weak-password"?new Error("Password is too weak. Please choose a stronger password."):e.code==="auth/invalid-email"?new Error("Invalid email address format."):e}},HB=async t=>{try{const e=Kt(bt(We,"branches")),n={...t,id:e.id,active:!0,createdAt:new Date};return await $s(e,n),n}catch(e){throw console.error("Error saving branch:",e),e}},DA=async()=>{try{const t=bt(We,"branches");return(await un(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting all branches:",t),[]}},qB=async(t,e)=>{try{const n=Kt(We,"branches",t);await aa(n,e)}catch(n){throw console.error("Error updating branch:",n),n}},KB=async t=>{try{const e=pw(We),n=Kt(We,"branches",t);e.delete(n);const r=As(bt(We,"transactions"),Rs("branchId","==",t));(await un(r)).docs.forEach(l=>{e.delete(l.ref)});const i=As(bt(We,"deliveries"),Rs("branchId","==",t));(await un(i)).docs.forEach(l=>{e.delete(l.ref)}),await e.commit(),console.log(`Branch ${t} and all related records deleted successfully`)}catch(e){throw console.error("Error deleting branch with cascading delete:",e),e}},GB=async t=>{try{const e=Kt(bt(We,"oilTypes")),n={...t,id:e.id,active:!0,createdAt:new Date};return await $s(e,n),n}catch(e){throw console.error("Error saving oil type:",e),e}},OA=async()=>{try{const t=bt(We,"oilTypes");return(await un(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting all oil types:",t),[]}},QB=async(t,e)=>{try{const n=Kt(We,"oilTypes",t);await aa(n,e)}catch(n){throw console.error("Error updating oil type:",n),n}},YB=async t=>{try{const e=pw(We),n=Kt(We,"oilTypes",t);e.delete(n);const r=As(bt(We,"transactions"),Rs("oilTypeId","==",t));(await un(r)).docs.forEach(u=>{e.delete(u.ref)});const i=As(bt(We,"loadSessions"),Rs("oilTypeId","==",t));(await un(i)).docs.forEach(u=>{e.delete(u.ref)});const l=As(bt(We,"deliveries"),Rs("oilTypeId","==",t));(await un(l)).docs.forEach(u=>{e.delete(u.ref)}),await e.commit(),console.log(`Oil type ${t} and all related records deleted successfully`)}catch(e){throw console.error("Error deleting oil type with cascading delete:",e),e}},a1=async(t,e)=>{try{const n=Kt(We,"users",t);await aa(n,e)}catch(n){throw console.error("Error updating driver:",n),n}},XB=async t=>{try{const e=Kt(We,"users",t);await fA(e)}catch(e){throw console.error("Error deleting driver:",e),e}},ww=async t=>{try{if(console.log("Creating task with data:",t),!t.title||!t.dueDate)throw new Error("Title and due date are required");const e=Kt(bt(We,"tasks")),n={title:t.title,description:t.description||"",priority:t.priority||"medium",status:"pending",assignedTo:t.assignedTo||null,id:e.id,createdAt:rt.now(),updatedAt:rt.now(),dueDate:rt.fromDate(t.dueDate)};return console.log("Saving task to Firestore:",n),await $s(e,n),console.log("Task saved successfully"),{...n,createdAt:n.createdAt.toDate(),updatedAt:n.updatedAt.toDate(),dueDate:n.dueDate.toDate()}}catch(e){throw console.error("Error saving task:",e),e}},LA=async()=>{try{const t=bt(We,"tasks"),e=As(t,cA("createdAt","desc"));return(await un(e)).docs.map(r=>{var i,o,l;const s=r.data();return{...s,id:r.id,createdAt:((i=s.createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.updatedAt)==null?void 0:o.toDate())||new Date,dueDate:((l=s.dueDate)==null?void 0:l.toDate())||new Date}})}catch(t){return console.error("Error getting all tasks:",t),[]}},MA=async(t,e)=>{try{const n=Kt(We,"tasks",t),r={...e,updatedAt:rt.now()};e.dueDate&&e.dueDate instanceof Date&&(r.dueDate=rt.fromDate(e.dueDate)),await aa(n,r)}catch(n){throw console.error("Error updating task:",n),n}},FA=async t=>{try{const e=Kt(We,"tasks",t);await fA(e)}catch(e){throw console.error("Error deleting task:",e),e}},Hy=()=>{var t;return((t=Cp.currentUser)==null?void 0:t.uid)||"anonymous"},ZB=async t=>{try{const e=Kt(bt(We,"loadSessions")),n=`LS_${Date.now()}_${Math.random().toString(36).substr(2,4).toUpperCase()}`,r={...t,id:e.id,loadSessionId:n,status:"active",createdAt:new Date,timestamp:new Date,createdBy:Hy(),remainingLiters:t.totalLoadedLiters,loadCount:1};return await $s(e,r),await VA({type:"loading",loadSessionId:n,oilTypeId:t.oilTypeId,oilTypeName:t.oilTypeName,quantity:t.totalLoadedLiters,location:t.loadLocationId,meterReading:t.loadMeterReading,photos:{meterReadingPhoto:t.meterReadingPhoto},timestamp:new Date,driverUid:Hy()}),console.log("New load session created in Firestore:",r),r}catch(e){throw console.error("Error creating load session:",e),e}},VA=async t=>{try{const e=Kt(bt(We,"transactions")),n={...t,id:e.id,timestamp:new Date,createdAt:new Date};return await $s(e,n),console.log("Transaction saved to Firestore:",n),n}catch(e){throw console.error("Error saving transaction:",e),e}},JB=async t=>{try{let e="";if(t.branchId)try{const h=await _f(Kt(We,"branches",t.branchId));if(h.exists()){const f=h.data();e=f.address||f.location||""}}catch(h){console.error("Error fetching branch address:",h)}const n=bt(We,"transactions"),r=As(n,Rs("loadSessionId","==",t.loadSessionId)),s=await un(r);let i=0;s.docs.forEach(h=>{const f=h.data();f.type==="supply"&&(i+=f.quantity||0)});const o=Kt(We,"loadSessions",t.loadSessionId),l=await _f(o);if(l.exists()){const f=l.data().totalLoadedLiters||0,p=f-i,g=p<=0?"completed":"active";await aa(o,{remainingLiters:p,status:g,lastSupplyAt:new Date,totalSupplied:i,...p<=0&&{completedAt:new Date}}),console.log(`Load session ${t.loadSessionId} updated: ${f}L loaded - ${i}L supplied = ${p}L remaining, status: ${g}`)}const c=Kt(bt(We,"deliveries")),u={...t,branchAddress:e,id:c.id,completedAt:new Date,timestamp:new Date,status:"completed"};return await $s(c,u),await VA({type:"supply",loadSessionId:t.loadSessionId,deliveryOrderId:t.deliveryOrderId,branchId:t.branchId,branchName:t.branchName,branchAddress:e,oilTypeId:t.oilTypeId,oilTypeName:t.oilTypeName,quantity:t.deliveredLiters,startMeterReading:t.startMeterReading,endMeterReading:t.endMeterReading,photos:t.photos,timestamp:new Date,driverUid:Hy()}),console.log("Delivery completed and saved to Firestore:",u),u}catch(e){throw console.error("Error completing delivery:",e),e}},Ip=async()=>{try{const t=bt(We,"transactions");return(await un(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),timestamp:((r=n.data().timestamp)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date}}).sort((n,r)=>{var s,i;return new Date((s=r.timestamp)!=null&&s.toDate?r.timestamp.toDate():r.timestamp).getTime()-new Date((i=n.timestamp)!=null&&i.toDate?n.timestamp.toDate():n.timestamp).getTime()})}catch(t){return console.error("Error getting all transactions:",t),[]}},_w=async()=>{try{const t=bt(We,"oilTypes");return(await un(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting oil types:",t),[]}},Ew=async()=>{try{const t=bt(We,"branches");return(await un(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting branches:",t),[]}},e$=async()=>{try{const t=["users","deliveries","complaints","branches","oilTypes","tasks","loadSessions","transactions"],e=await Promise.all(t.map(async s=>{const i=await un(bt(We,s));return{collection:s,count:i.docs.length}})),n=e.reduce((s,i)=>s+i.count,0),r=`${(n*2).toFixed(1)} KB`;return{collections:e,totalDocuments:n,estimatedSize:r}}catch(t){return console.error("Error getting Firestore usage:",t),{collections:[],totalDocuments:0,estimatedSize:"0 KB"}}},t$=async(t,e,n)=>{try{const r=bt(We,t),s=As(r,Rs("createdAt",">=",e),Rs("createdAt","<=",n)),i=await un(s);let o=0;const l=pw(We);return i.docs.forEach(c=>{l.delete(c.ref),o++}),await l.commit(),o}catch(r){throw console.error("Error deleting records by date range:",r),r}},n$="v1.3.0";function r$(){const[t,e]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),{toast:o}=Hn(),l=async()=>{if(!t||!n){o({title:"Missing Information",description:"Please enter both email and password",variant:"destructive"});return}i(!0);try{const h=(await ZF(Cp,t,n)).user,f=Kt(We,"users",h.uid);if((await _f(f)).exists())await aa(f,{lastLoginAt:new Date});else{const x=t==="asif.s@ekkanoo.com.bh"||t==="asif1001@gmail.com";await $s(f,{uid:h.uid,email:h.email,role:x?"admin":"driver",displayName:h.displayName||t.split("@")[0],active:!0,lastLoginAt:new Date,createdAt:new Date})}const y=(await _f(f)).data(),m={uid:h.uid,email:h.email,role:(y==null?void 0:y.role)||"driver",displayName:(y==null?void 0:y.displayName)||h.displayName||t.split("@")[0],active:(y==null?void 0:y.active)||!0};localStorage.setItem("currentUser",JSON.stringify(m)),o({title:"Welcome!",description:`Successfully signed in as ${m.role}`}),setTimeout(()=>{window.location.href=window.location.origin+window.location.pathname},100)}catch(u){console.error("Login error:",u);let h="Login failed. Please check your credentials.";switch(u.code){case"auth/invalid-email":h="Please enter a valid email address.";break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":h="Invalid email or password. Please try again.";break;case"auth/too-many-requests":h="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":h="Network error. Please check your connection.";break;default:h="Login failed. Please try again."}o({title:"Login Failed",description:h,variant:"destructive"})}finally{i(!1)}},c=u=>{u.key==="Enter"&&l()};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-600 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"bg-white rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4 shadow-xl p-2",children:a.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"OILDELIVERY"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"Professional Oil Delivery Management"})]}),a.jsx(ze,{className:"shadow-2xl border-0",children:a.jsxs($e,{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"mb-6 text-center",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Sign In"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your credentials to access your account"})]}),a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email Address"}),a.jsx(et,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:u=>e(u.target.value),onKeyPress:c,className:"h-11 sm:h-12 text-base border-2 border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 placeholder:text-gray-500","data-testid":"input-email",autoComplete:"email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"password",className:"text-sm font-semibold text-gray-700",children:"Password"}),a.jsx(et,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:u=>r(u.target.value),onKeyPress:c,className:"h-11 sm:h-12 text-base border-2 border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 placeholder:text-gray-500","data-testid":"input-password",autoComplete:"current-password"})]}),a.jsx(ge,{onClick:l,disabled:s,className:"w-full h-11 sm:h-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-base rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] mt-6","data-testid":"button-login",children:s?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"}),a.jsx("div",{className:"text-center mt-4 text-xs text-gray-500",children:a.jsx("p",{children:"Use your registered email and password to access OILDELIVERY"})})]})]})}),a.jsxs("div",{className:"text-center mt-6 text-blue-100 text-xs",children:[a.jsx("p",{children:"OILDELIVERY - Secure Oil Delivery Management System"}),a.jsxs("p",{className:"mt-2 opacity-75",children:["Version ",n$]})]})]})})}function s$(){return qS.useSyncExternalStore(i$,()=>!0,()=>!1)}function i$(){return()=>{}}var bw="Avatar",[o$,cH]=yr(bw),[a$,UA]=o$(bw),zA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=E.useState("idle");return a.jsx(a$,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(je.span,{...r,ref:e})})});zA.displayName=bw;var BA="AvatarImage",$A=E.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=UA(BA,n),l=l$(r,i),c=Wt(u=>{s(u),o.onImageLoadingStatusChange(u)});return Ut(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(je.img,{...i,ref:e,src:r}):null});$A.displayName=BA;var WA="AvatarFallback",HA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=UA(WA,n),[o,l]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(je.span,{...s,ref:e}):null});HA.displayName=WA;function l1(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function l$(t,{referrerPolicy:e,crossOrigin:n}){const r=s$(),s=E.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=E.useState(()=>l1(i,t));return Ut(()=>{l(l1(i,t))},[i,t]),Ut(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}var qA=zA,KA=$A,GA=HA;const QA=E.forwardRef(({className:t,...e},n)=>a.jsx(qA,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));QA.displayName=qA.displayName;const YA=E.forwardRef(({className:t,...e},n)=>a.jsx(KA,{ref:n,className:Pe("aspect-square h-full w-full",t),...e}));YA.displayName=KA.displayName;const XA=E.forwardRef(({className:t,...e},n)=>a.jsx(GA,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));XA.displayName=GA.displayName;function c$(){var r,s;const{user:t,isLoading:e}=Ji(),n=async()=>{try{await zB()}catch(i){console.error("Logout error:",i)}};return e?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Dashboard"}),a.jsxs(ge,{onClick:n,variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-800","data-testid":"button-logout",children:[a.jsx(lx,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),a.jsxs("main",{className:"p-4 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"User","!"]}),a.jsx("p",{className:"text-gray-600",children:"Manage your profile and settings"})]}),a.jsxs(ze,{className:"mb-6",children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(cx,{className:"w-5 h-5"}),"Profile Information"]})}),a.jsxs($e,{children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsxs(QA,{className:"w-16 h-16",children:[a.jsx(YA,{src:(t==null?void 0:t.photoURL)||void 0,alt:"Profile"}),a.jsx(XA,{className:"bg-blue-100 text-blue-600",children:((r=t==null?void 0:t.displayName)==null?void 0:r.charAt(0))||"U"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800","data-testid":"text-user-name",children:(t==null?void 0:t.displayName)||"Anonymous User"}),a.jsx("p",{className:"text-gray-600 text-sm","data-testid":"text-user-email",children:t==null?void 0:t.email}),a.jsxs("p",{className:"text-gray-500 text-xs",children:["Member since: ",(s=t==null?void 0:t.metadata)!=null&&s.creationTime?new Date(t.metadata.creationTime).toLocaleDateString():"Unknown"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs(ge,{variant:"outline",className:"flex items-center justify-center","data-testid":"button-edit-profile",children:[a.jsx(uE,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),a.jsxs(ge,{variant:"outline",className:"flex items-center justify-center","data-testid":"button-upload-photo",children:[a.jsx(ou,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})]})]})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsx(Pt,{children:"Quick Actions"})}),a.jsx($e,{children:a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx(ge,{variant:"ghost",className:"justify-start h-auto p-4 border border-gray-200 hover:bg-gray-50","data-testid":"button-settings",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(uE,{className:"w-5 h-5 mr-3 text-blue-500"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Account Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your account preferences"})]})]})}),a.jsx(ge,{variant:"ghost",className:"justify-start h-auto p-4 border border-gray-200 hover:bg-gray-50","data-testid":"button-upload-images",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ou,{className:"w-5 h-5 mr-3 text-green-500"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Upload Images"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your photos with Cloudinary"})]})]})})]})})]})]})]})}var Km="focusScope.autoFocusOnMount",Gm="focusScope.autoFocusOnUnmount",c1={bubbles:!1,cancelable:!0},u$="FocusScope",Tw=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=E.useState(null),u=Wt(s),h=Wt(i),f=E.useRef(null),p=Qe(e,m=>c(m)),g=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let m=function(_){if(g.paused||!l)return;const N=_.target;l.contains(N)?f.current=N:ri(f.current,{select:!0})},x=function(_){if(g.paused||!l)return;const N=_.relatedTarget;N!==null&&(l.contains(N)||ri(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&ri(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",x);const w=new MutationObserver(v);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",x),w.disconnect()}}},[r,l,g.paused]),E.useEffect(()=>{if(l){d1.add(g);const m=document.activeElement;if(!l.contains(m)){const v=new CustomEvent(Km,c1);l.addEventListener(Km,u),l.dispatchEvent(v),v.defaultPrevented||(d$(g$(ZA(l)),{select:!0}),document.activeElement===m&&ri(l))}return()=>{l.removeEventListener(Km,u),setTimeout(()=>{const v=new CustomEvent(Gm,c1);l.addEventListener(Gm,h),l.dispatchEvent(v),v.defaultPrevented||ri(m??document.body,{select:!0}),l.removeEventListener(Gm,h),d1.remove(g)},0)}}},[l,u,h,g]);const y=E.useCallback(m=>{if(!n&&!r||g.paused)return;const x=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(x&&v){const w=m.currentTarget,[_,N]=h$(w);_&&N?!m.shiftKey&&v===N?(m.preventDefault(),n&&ri(_,{select:!0})):m.shiftKey&&v===_&&(m.preventDefault(),n&&ri(N,{select:!0})):v===w&&m.preventDefault()}},[n,r,g.paused]);return a.jsx(je.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});Tw.displayName=u$;function d$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ri(r,{select:e}),document.activeElement!==n)return}function h$(t){const e=ZA(t),n=u1(e,t),r=u1(e.reverse(),t);return[n,r]}function ZA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function u1(t,e){for(const n of t)if(!f$(n,{upTo:e}))return n}function f$(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function p$(t){return t instanceof HTMLInputElement&&"select"in t}function ri(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&p$(t)&&e&&t.select()}}var d1=m$();function m$(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=h1(t,e),t.unshift(e)},remove(e){var n;t=h1(t,e),(n=t[0])==null||n.resume()}}}function h1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function g$(t){return t.filter(e=>e.tagName!=="A")}var Qm=0;function JA(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??f1()),document.body.insertAdjacentElement("beforeend",t[1]??f1()),Qm++,()=>{Qm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qm--}},[])}function f1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Gr=function(){return Gr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gr.apply(this,arguments)};function eR(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function y$(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var _h="right-scroll-bar-position",Eh="width-before-scroll-bar",v$="with-scroll-bars-hidden",x$="--removed-body-scroll-bar-size";function Ym(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function w$(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var _$=typeof window<"u"?E.useLayoutEffect:E.useEffect,p1=new WeakMap;function E$(t,e){var n=w$(null,function(r){return t.forEach(function(s){return Ym(s,r)})});return _$(function(){var r=p1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Ym(l,null)}),i.forEach(function(l){s.has(l)||Ym(l,o)})}p1.set(n,t)},[t]),n}function b$(t){return t}function T$(t,e){e===void 0&&(e=b$);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function S$(t){t===void 0&&(t={});var e=T$(null);return e.options=Gr({async:!0,ssr:!1},t),e}var tR=function(t){var e=t.sideCar,n=eR(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Gr({},n))};tR.isSideCarExport=!0;function C$(t,e){return t.useMedium(e),tR}var nR=S$(),Xm=function(){},kp=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:Xm,onWheelCapture:Xm,onTouchMoveCapture:Xm}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noRelative,y=t.noIsolation,m=t.inert,x=t.allowPinchZoom,v=t.as,w=v===void 0?"div":v,_=t.gapMode,N=eR(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,L=E$([n,e]),T=Gr(Gr({},N),s);return E.createElement(E.Fragment,null,h&&E.createElement(C,{sideCar:nR,removeScrollBar:u,shards:f,noRelative:g,noIsolation:y,inert:m,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:_}),o?E.cloneElement(E.Children.only(l),Gr(Gr({},T),{ref:L})):E.createElement(w,Gr({},T,{className:c,ref:L}),l))});kp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kp.classNames={fullWidth:Eh,zeroRight:_h};var N$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function I$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=N$();return e&&t.setAttribute("nonce",e),t}function k$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function A$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var R$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=I$())&&(k$(e,n),A$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},j$=function(){var t=R$();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},rR=function(){var t=j$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},P$={left:0,top:0,right:0,gap:0},Zm=function(t){return parseInt(t||"",10)||0},D$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Zm(n),Zm(r),Zm(s)]},O$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return P$;var e=D$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},L$=rR(),Ga="data-scroll-locked",M$=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(v$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ga,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_h,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Eh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(_h," .").concat(_h,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Eh," .").concat(Eh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ga,`] {
    `).concat(x$,": ").concat(l,`px;
  }
`)},m1=function(){var t=parseInt(document.body.getAttribute(Ga)||"0",10);return isFinite(t)?t:0},F$=function(){E.useEffect(function(){return document.body.setAttribute(Ga,(m1()+1).toString()),function(){var t=m1()-1;t<=0?document.body.removeAttribute(Ga):document.body.setAttribute(Ga,t.toString())}},[])},V$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;F$();var i=E.useMemo(function(){return O$(s)},[s]);return E.createElement(L$,{styles:M$(i,!e,s,n?"":"!important")})},qy=!1;if(typeof window<"u")try{var Wd=Object.defineProperty({},"passive",{get:function(){return qy=!0,!0}});window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{qy=!1}var fa=qy?{passive:!1}:!1,U$=function(t){return t.tagName==="TEXTAREA"},sR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!U$(t)&&n[e]==="visible")},z$=function(t){return sR(t,"overflowY")},B$=function(t){return sR(t,"overflowX")},g1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=iR(t,r);if(s){var i=oR(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},W$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},iR=function(t,e){return t==="v"?z$(e):B$(e)},oR=function(t,e){return t==="v"?$$(e):W$(e)},H$=function(t,e){return t==="h"&&e==="rtl"?-1:1},q$=function(t,e,n,r,s){var i=H$(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{if(!l)break;var g=oR(t,l),y=g[0],m=g[1],x=g[2],v=m-x-i*y;(y||v)&&iR(t,l)&&(f+=v,p+=y);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(u=!0),u},Hd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},y1=function(t){return[t.deltaX,t.deltaY]},v1=function(t){return t&&"current"in t?t.current:t},K$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},G$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Q$=0,pa=[];function Y$(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(Q$++)[0],i=E.useState(rR)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=y$([t.lockRef.current],(t.shards||[]).map(v1),!0).filter(Boolean);return m.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=E.useCallback(function(m,x){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=Hd(m),w=n.current,_="deltaX"in m?m.deltaX:w[0]-v[0],N="deltaY"in m?m.deltaY:w[1]-v[1],C,L=m.target,T=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in m&&T==="h"&&L.type==="range")return!1;var S=g1(T,L);if(!S)return!0;if(S?C=T:(C=T==="v"?"h":"v",S=g1(T,L)),!S)return!1;if(!r.current&&"changedTouches"in m&&(_||N)&&(r.current=C),!C)return!0;var P=r.current||C;return q$(P,x,m,P==="h"?_:N)},[]),c=E.useCallback(function(m){var x=m;if(!(!pa.length||pa[pa.length-1]!==i)){var v="deltaY"in x?y1(x):Hd(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&K$(C.delta,v)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(v1).filter(Boolean).filter(function(C){return C.contains(x.target)}),N=_.length>0?l(x,_[0]):!o.current.noIsolation;N&&x.cancelable&&x.preventDefault()}}},[]),u=E.useCallback(function(m,x,v,w){var _={name:m,delta:x,target:v,should:w,shadowParent:X$(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(N){return N!==_})},1)},[]),h=E.useCallback(function(m){n.current=Hd(m),r.current=void 0},[]),f=E.useCallback(function(m){u(m.type,y1(m),m.target,l(m,t.lockRef.current))},[]),p=E.useCallback(function(m){u(m.type,Hd(m),m.target,l(m,t.lockRef.current))},[]);E.useEffect(function(){return pa.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,fa),document.addEventListener("touchmove",c,fa),document.addEventListener("touchstart",h,fa),function(){pa=pa.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,fa),document.removeEventListener("touchmove",c,fa),document.removeEventListener("touchstart",h,fa)}},[]);var g=t.removeScrollBar,y=t.inert;return E.createElement(E.Fragment,null,y?E.createElement(i,{styles:G$(s)}):null,g?E.createElement(V$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function X$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Z$=C$(nR,Y$);var Sw=E.forwardRef(function(t,e){return E.createElement(kp,Gr({},t,{ref:e,sideCar:Z$}))});Sw.classNames=kp.classNames;var J$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ma=new WeakMap,qd=new WeakMap,Kd={},Jm=0,aR=function(t){return t&&(t.host||aR(t.parentNode))},e7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=aR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},t7=function(t,e,n,r){var s=e7(e,Array.isArray(t)?t:[t]);Kd[n]||(Kd[n]=new WeakMap);var i=Kd[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),y=g!==null&&g!=="false",m=(ma.get(p)||0)+1,x=(i.get(p)||0)+1;ma.set(p,m),i.set(p,x),o.push(p),m===1&&y&&qd.set(p,!0),x===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),l.clear(),Jm++,function(){o.forEach(function(f){var p=ma.get(f)-1,g=i.get(f)-1;ma.set(f,p),i.set(f,g),p||(qd.has(f)||f.removeAttribute(r),qd.delete(f)),g||f.removeAttribute(n)}),Jm--,Jm||(ma=new WeakMap,ma=new WeakMap,qd=new WeakMap,Kd={})}},lR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=J$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),t7(r,s,n,"aria-hidden")):function(){return null}},Ap="Dialog",[cR,uR]=yr(Ap),[n7,Ur]=cR(Ap),dR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=E.useRef(null),c=E.useRef(null),[u,h]=Mo({prop:r,defaultProp:s??!1,onChange:i,caller:Ap});return a.jsx(n7,{scope:e,triggerRef:l,contentRef:c,contentId:ji(),titleId:ji(),descriptionId:ji(),open:u,onOpenChange:h,onOpenToggle:E.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};dR.displayName=Ap;var hR="DialogTrigger",fR=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ur(hR,n),i=Qe(e,s.triggerRef);return a.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Iw(s.open),...r,ref:i,onClick:ke(t.onClick,s.onOpenToggle)})});fR.displayName=hR;var Cw="DialogPortal",[r7,pR]=cR(Cw,{forceMount:void 0}),mR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ur(Cw,e);return a.jsx(r7,{scope:e,forceMount:n,children:E.Children.map(r,o=>a.jsx(vr,{present:n||i.open,children:a.jsx($f,{asChild:!0,container:s,children:o})}))})};mR.displayName=Cw;var Ef="DialogOverlay",gR=E.forwardRef((t,e)=>{const n=pR(Ef,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ur(Ef,t.__scopeDialog);return i.modal?a.jsx(vr,{present:r||i.open,children:a.jsx(i7,{...s,ref:e})}):null});gR.displayName=Ef;var s7=vl("DialogOverlay.RemoveScroll"),i7=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ur(Ef,n);return a.jsx(Sw,{as:s7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(je.div,{"data-state":Iw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Go="DialogContent",yR=E.forwardRef((t,e)=>{const n=pR(Go,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ur(Go,t.__scopeDialog);return a.jsx(vr,{present:r||i.open,children:i.modal?a.jsx(o7,{...s,ref:e}):a.jsx(a7,{...s,ref:e})})});yR.displayName=Go;var o7=E.forwardRef((t,e)=>{const n=Ur(Go,t.__scopeDialog),r=E.useRef(null),s=Qe(e,n.contentRef,r);return E.useEffect(()=>{const i=r.current;if(i)return lR(i)},[]),a.jsx(vR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ke(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ke(t.onFocusOutside,i=>i.preventDefault())})}),a7=E.forwardRef((t,e)=>{const n=Ur(Go,t.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return a.jsx(vR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),vR=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Ur(Go,n),c=E.useRef(null),u=Qe(e,c);return JA(),a.jsxs(a.Fragment,{children:[a.jsx(Tw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ju,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Iw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(c7,{titleId:l.titleId}),a.jsx(d7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Nw="DialogTitle",xR=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ur(Nw,n);return a.jsx(je.h2,{id:s.titleId,...r,ref:e})});xR.displayName=Nw;var wR="DialogDescription",_R=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ur(wR,n);return a.jsx(je.p,{id:s.descriptionId,...r,ref:e})});_R.displayName=wR;var ER="DialogClose",bR=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ur(ER,n);return a.jsx(je.button,{type:"button",...r,ref:e,onClick:ke(t.onClick,()=>s.onOpenChange(!1))})});bR.displayName=ER;function Iw(t){return t?"open":"closed"}var TR="DialogTitleWarning",[l7,SR]=KL(TR,{contentName:Go,titleName:Nw,docsSlug:"dialog"}),c7=({titleId:t})=>{const e=SR(TR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},u7="DialogDescriptionWarning",d7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${SR(u7).contentName}}.`;return E.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},CR=dR,NR=fR,IR=mR,kw=gR,Aw=yR,Rw=xR,jw=_R,Pw=bR;const Qt=CR,Gu=NR,h7=IR,kR=E.forwardRef(({className:t,...e},n)=>a.jsx(kw,{ref:n,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));kR.displayName=kw.displayName;const Bt=E.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(h7,{children:[a.jsx(kR,{}),a.jsxs(Aw,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(Pw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bt.displayName=Aw.displayName;const gr=({className:t,...e})=>a.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});gr.displayName="DialogHeader";const AR=({className:t,...e})=>a.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});AR.displayName="DialogFooter";const _n=E.forwardRef(({className:t,...e},n)=>a.jsx(Rw,{ref:n,className:Pe("text-lg font-semibold leading-none tracking-tight",t),...e}));_n.displayName=Rw.displayName;const Ar=E.forwardRef(({className:t,...e},n)=>a.jsx(jw,{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Ar.displayName=jw.displayName;const Qa=E.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Qa.displayName="Textarea";function Ky(t,[e,n]){return Math.min(n,Math.max(e,t))}var f7=E.createContext(void 0);function Rp(t){const e=E.useContext(f7);return t||e||"ltr"}function RR(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var p7=[" ","Enter","ArrowUp","ArrowDown"],m7=[" ","Enter"],Qo="Select",[jp,Pp,g7]=rx(Qo),[zl,uH]=yr(Qo,[g7,Xf]),Dp=Xf(),[y7,io]=zl(Qo),[v7,x7]=zl(Qo),jR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:y}=t,m=Dp(e),[x,v]=E.useState(null),[w,_]=E.useState(null),[N,C]=E.useState(!1),L=Rp(u),[T,S]=Mo({prop:r,defaultProp:s??!1,onChange:i,caller:Qo}),[P,k]=Mo({prop:o,defaultProp:l,onChange:c,caller:Qo}),M=E.useRef(null),R=x?y||!!x.closest("form"):!0,[D,I]=E.useState(new Set),q=Array.from(D).map(oe=>oe.props.value).join(";");return a.jsx(Y6,{...m,children:a.jsxs(y7,{required:g,scope:e,trigger:x,onTriggerChange:v,valueNode:w,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:C,contentId:ji(),value:P,onValueChange:k,open:T,onOpenChange:S,dir:L,triggerPointerDownPosRef:M,disabled:p,children:[a.jsx(jp.Provider,{scope:e,children:a.jsx(v7,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(oe=>{I(Y=>new Set(Y).add(oe))},[]),onNativeOptionRemove:E.useCallback(oe=>{I(Y=>{const U=new Set(Y);return U.delete(oe),U})},[]),children:n})}),R?a.jsxs(n2,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:P,onChange:oe=>k(oe.target.value),disabled:p,form:y,children:[P===void 0?a.jsx("option",{value:""}):null,Array.from(D)]},q):null]})})};jR.displayName=Qo;var PR="SelectTrigger",DR=E.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Dp(n),o=io(PR,n),l=o.disabled||r,c=Qe(e,o.onTriggerChange),u=Pp(n),h=E.useRef("touch"),[f,p,g]=s2(m=>{const x=u().filter(_=>!_.disabled),v=x.find(_=>_.value===o.value),w=i2(x,m,v);w!==void 0&&o.onValueChange(w.value)}),y=m=>{l||(o.onOpenChange(!0),g()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return a.jsx(TN,{asChild:!0,...i,children:a.jsx(je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":r2(o.value)?"":void 0,...s,ref:c,onClick:ke(s.onClick,m=>{m.currentTarget.focus(),h.current!=="mouse"&&y(m)}),onPointerDown:ke(s.onPointerDown,m=>{h.current=m.pointerType;const x=m.target;x.hasPointerCapture(m.pointerId)&&x.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:ke(s.onKeyDown,m=>{const x=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&p(m.key),!(x&&m.key===" ")&&p7.includes(m.key)&&(y(),m.preventDefault())})})})});DR.displayName=PR;var OR="SelectValue",LR=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=io(OR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Qe(e,c.onValueNodeChange);return Ut(()=>{u(h)},[u,h]),a.jsx(je.span,{...l,ref:f,style:{pointerEvents:"none"},children:r2(c.value)?a.jsx(a.Fragment,{children:o}):i})});LR.displayName=OR;var w7="SelectIcon",MR=E.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(je.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});MR.displayName=w7;var _7="SelectPortal",FR=t=>a.jsx($f,{asChild:!0,...t});FR.displayName=_7;var Yo="SelectContent",VR=E.forwardRef((t,e)=>{const n=io(Yo,t.__scopeSelect),[r,s]=E.useState();if(Ut(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Jo.createPortal(a.jsx(UR,{scope:t.__scopeSelect,children:a.jsx(jp.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(zR,{...t,ref:e})});VR.displayName=Yo;var br=10,[UR,oo]=zl(Yo),E7="SelectContentImpl",b7=vl("SelectContent.RemoveScroll"),zR=E.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:m,avoidCollisions:x,...v}=t,w=io(Yo,n),[_,N]=E.useState(null),[C,L]=E.useState(null),T=Qe(e,ye=>N(ye)),[S,P]=E.useState(null),[k,M]=E.useState(null),R=Pp(n),[D,I]=E.useState(!1),q=E.useRef(!1);E.useEffect(()=>{if(_)return lR(_)},[_]),JA();const oe=E.useCallback(ye=>{const[de,...Ee]=R().map(Re=>Re.ref.current),[Ne]=Ee.slice(-1),Ie=document.activeElement;for(const Re of ye)if(Re===Ie||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===de&&C&&(C.scrollTop=0),Re===Ne&&C&&(C.scrollTop=C.scrollHeight),Re==null||Re.focus(),document.activeElement!==Ie))return},[R,C]),Y=E.useCallback(()=>oe([S,_]),[oe,S,_]);E.useEffect(()=>{D&&Y()},[D,Y]);const{onOpenChange:U,triggerPointerDownPosRef:$}=w;E.useEffect(()=>{if(_){let ye={x:0,y:0};const de=Ne=>{var Ie,Re;ye={x:Math.abs(Math.round(Ne.pageX)-(((Ie=$.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((Re=$.current)==null?void 0:Re.y)??0))}},Ee=Ne=>{ye.x<=10&&ye.y<=10?Ne.preventDefault():_.contains(Ne.target)||U(!1),document.removeEventListener("pointermove",de),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[_,U,$]),E.useEffect(()=>{const ye=()=>U(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[U]);const[J,B]=s2(ye=>{const de=R().filter(Ie=>!Ie.disabled),Ee=de.find(Ie=>Ie.ref.current===document.activeElement),Ne=i2(de,ye,Ee);Ne&&setTimeout(()=>Ne.ref.current.focus())}),K=E.useCallback((ye,de,Ee)=>{const Ne=!q.current&&!Ee;(w.value!==void 0&&w.value===de||Ne)&&(P(ye),Ne&&(q.current=!0))},[w.value]),ae=E.useCallback(()=>_==null?void 0:_.focus(),[_]),ue=E.useCallback((ye,de,Ee)=>{const Ne=!q.current&&!Ee;(w.value!==void 0&&w.value===de||Ne)&&M(ye)},[w.value]),le=r==="popper"?Gy:BR,Te=le===Gy?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:m,avoidCollisions:x}:{};return a.jsx(UR,{scope:n,content:_,viewport:C,onViewportChange:L,itemRefCallback:K,selectedItem:S,onItemLeave:ae,itemTextRefCallback:ue,focusSelectedItem:Y,selectedItemText:k,position:r,isPositioned:D,searchRef:J,children:a.jsx(Sw,{as:b7,allowPinchZoom:!0,children:a.jsx(Tw,{asChild:!0,trapped:w.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:ke(s,ye=>{var de;(de=w.trigger)==null||de.focus({preventScroll:!0}),ye.preventDefault()}),children:a.jsx(ju,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(le,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ye=>ye.preventDefault(),...v,...Te,onPlaced:()=>I(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ke(v.onKeyDown,ye=>{const de=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!de&&ye.key.length===1&&B(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let Ne=R().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const Ie=ye.target,Re=Ne.indexOf(Ie);Ne=Ne.slice(Re+1)}setTimeout(()=>oe(Ne)),ye.preventDefault()}})})})})})})});zR.displayName=E7;var T7="SelectItemAlignedPosition",BR=E.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=io(Yo,n),o=oo(Yo,n),[l,c]=E.useState(null),[u,h]=E.useState(null),f=Qe(e,T=>h(T)),p=Pp(n),g=E.useRef(!1),y=E.useRef(!0),{viewport:m,selectedItem:x,selectedItemText:v,focusSelectedItem:w}=o,_=E.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&m&&x&&v){const T=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),k=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ie=k.left-S.left,Re=P.left-Ie,Be=T.left-Re,j=T.width+Be,re=Math.max(j,S.width),W=window.innerWidth-br,V=Ky(Re,[br,Math.max(br,W-re)]);l.style.minWidth=j+"px",l.style.left=V+"px"}else{const Ie=S.right-k.right,Re=window.innerWidth-P.right-Ie,Be=window.innerWidth-T.right-Re,j=T.width+Be,re=Math.max(j,S.width),W=window.innerWidth-br,V=Ky(Re,[br,Math.max(br,W-re)]);l.style.minWidth=j+"px",l.style.right=V+"px"}const M=p(),R=window.innerHeight-br*2,D=m.scrollHeight,I=window.getComputedStyle(u),q=parseInt(I.borderTopWidth,10),oe=parseInt(I.paddingTop,10),Y=parseInt(I.borderBottomWidth,10),U=parseInt(I.paddingBottom,10),$=q+oe+D+U+Y,J=Math.min(x.offsetHeight*5,$),B=window.getComputedStyle(m),K=parseInt(B.paddingTop,10),ae=parseInt(B.paddingBottom,10),ue=T.top+T.height/2-br,le=R-ue,Te=x.offsetHeight/2,ye=x.offsetTop+Te,de=q+oe+ye,Ee=$-de;if(de<=ue){const Ie=M.length>0&&x===M[M.length-1].ref.current;l.style.bottom="0px";const Re=u.clientHeight-m.offsetTop-m.offsetHeight,Be=Math.max(le,Te+(Ie?ae:0)+Re+Y),j=de+Be;l.style.height=j+"px"}else{const Ie=M.length>0&&x===M[0].ref.current;l.style.top="0px";const Be=Math.max(ue,q+m.offsetTop+(Ie?K:0)+Te)+Ee;l.style.height=Be+"px",m.scrollTop=de-ue+m.offsetTop}l.style.margin=`${br}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,m,x,v,i.dir,r]);Ut(()=>_(),[_]);const[N,C]=E.useState();Ut(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const L=E.useCallback(T=>{T&&y.current===!0&&(_(),w==null||w(),y.current=!1)},[_,w]);return a.jsx(C7,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:L,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:a.jsx(je.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});BR.displayName=T7;var S7="SelectPopperPosition",Gy=E.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=br,...i}=t,o=Dp(n);return a.jsx(SN,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Gy.displayName=S7;var[C7,Dw]=zl(Yo,{}),Qy="SelectViewport",$R=E.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=oo(Qy,n),o=Dw(Qy,n),l=Qe(e,i.onViewportChange),c=E.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(jp.Slot,{scope:n,children:a.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ke(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const y=window.innerHeight-br*2,m=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),v=Math.max(m,x);if(v<y){const w=v+g,_=Math.min(y,w),N=w-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});$R.displayName=Qy;var WR="SelectGroup",[N7,I7]=zl(WR),k7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ji();return a.jsx(N7,{scope:n,id:s,children:a.jsx(je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});k7.displayName=WR;var HR="SelectLabel",qR=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=I7(HR,n);return a.jsx(je.div,{id:s.id,...r,ref:e})});qR.displayName=HR;var bf="SelectItem",[A7,KR]=zl(bf),GR=E.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=io(bf,n),c=oo(bf,n),u=l.value===r,[h,f]=E.useState(i??""),[p,g]=E.useState(!1),y=Qe(e,w=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,w,r,s)}),m=ji(),x=E.useRef("touch"),v=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(A7,{scope:n,value:r,disabled:s,textId:m,isSelected:u,onItemTextChange:E.useCallback(w=>{f(_=>_||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(jp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(je.div,{role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:ke(o.onFocus,()=>g(!0)),onBlur:ke(o.onBlur,()=>g(!1)),onClick:ke(o.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:ke(o.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:ke(o.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:ke(o.onPointerMove,w=>{var _;x.current=w.pointerType,s?(_=c.onItemLeave)==null||_.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,w=>{var _;w.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ke(o.onKeyDown,w=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(m7.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});GR.displayName=bf;var Ec="SelectItemText",QR=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=io(Ec,n),l=oo(Ec,n),c=KR(Ec,n),u=x7(Ec,n),[h,f]=E.useState(null),p=Qe(e,v=>f(v),c.onItemTextChange,v=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,v,c.value,c.disabled)}),g=h==null?void 0:h.textContent,y=E.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:m,onNativeOptionRemove:x}=u;return Ut(()=>(m(y),()=>x(y)),[m,x,y]),a.jsxs(a.Fragment,{children:[a.jsx(je.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Jo.createPortal(i.children,o.valueNode):null]})});QR.displayName=Ec;var YR="SelectItemIndicator",XR=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return KR(YR,n).isSelected?a.jsx(je.span,{"aria-hidden":!0,...r,ref:e}):null});XR.displayName=YR;var Yy="SelectScrollUpButton",ZR=E.forwardRef((t,e)=>{const n=oo(Yy,t.__scopeSelect),r=Dw(Yy,t.__scopeSelect),[s,i]=E.useState(!1),o=Qe(e,r.onScrollButtonChange);return Ut(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(e2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ZR.displayName=Yy;var Xy="SelectScrollDownButton",JR=E.forwardRef((t,e)=>{const n=oo(Xy,t.__scopeSelect),r=Dw(Xy,t.__scopeSelect),[s,i]=E.useState(!1),o=Qe(e,r.onScrollButtonChange);return Ut(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(e2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});JR.displayName=Xy;var e2=E.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=oo("SelectScrollButton",n),o=E.useRef(null),l=Pp(n),c=E.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return E.useEffect(()=>()=>c(),[c]),Ut(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ke(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ke(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ke(s.onPointerLeave,()=>{c()})})}),R7="SelectSeparator",t2=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(je.div,{"aria-hidden":!0,...r,ref:e})});t2.displayName=R7;var Zy="SelectArrow",j7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Dp(n),i=io(Zy,n),o=oo(Zy,n);return i.open&&o.position==="popper"?a.jsx(CN,{...s,...r,ref:e}):null});j7.displayName=Zy;var P7="SelectBubbleInput",n2=E.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=E.useRef(null),i=Qe(r,s),o=RR(e);return E.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(je.select,{...n,style:{...wC,...n.style},ref:i,defaultValue:e})});n2.displayName=P7;function r2(t){return t===""||t===void 0}function s2(t){const e=Wt(t),n=E.useRef(""),r=E.useRef(0),s=E.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=E.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function i2(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=D7(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function D7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var O7=jR,o2=DR,L7=LR,M7=MR,F7=FR,a2=VR,V7=$R,l2=qR,c2=GR,U7=QR,z7=XR,u2=ZR,d2=JR,h2=t2;const dt=O7,ht=L7,lt=E.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(o2,{ref:r,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(M7,{asChild:!0,children:a.jsx(WC,{className:"h-4 w-4 opacity-50"})})]}));lt.displayName=o2.displayName;const f2=E.forwardRef(({className:t,...e},n)=>a.jsx(u2,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(U4,{className:"h-4 w-4"})}));f2.displayName=u2.displayName;const p2=E.forwardRef(({className:t,...e},n)=>a.jsx(d2,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(WC,{className:"h-4 w-4"})}));p2.displayName=d2.displayName;const ct=E.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(F7,{children:a.jsxs(a2,{ref:s,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(f2,{}),a.jsx(V7,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(p2,{})]})}));ct.displayName=a2.displayName;const B7=E.forwardRef(({className:t,...e},n)=>a.jsx(l2,{ref:n,className:Pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));B7.displayName=l2.displayName;const we=E.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(c2,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(z7,{children:a.jsx(Fo,{className:"h-4 w-4"})})}),a.jsx(U7,{children:e})]}));we.displayName=c2.displayName;const $7=E.forwardRef(({className:t,...e},n)=>a.jsx(h2,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));$7.displayName=h2.displayName;const W7=qf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ft({className:t,variant:e,...n}){return a.jsx("div",{className:Pe(W7({variant:e}),t),...n})}function H7({onCapture:t,isOpen:e,onClose:n,title:r,branchName:s}){const i=E.useRef(null),o=E.useRef(null),[l,c]=E.useState(null),[u,h]=E.useState(null),[f,p]=E.useState(!1),{toast:g}=Hn(),y=E.useCallback(async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});c(C),i.current&&(i.current.srcObject=C)}catch(C){console.error("Error accessing camera:",C),g({title:"Camera Error",description:"Unable to access camera. Please check permissions.",variant:"destructive"})}},[g]),m=E.useCallback(()=>{l&&(l.getTracks().forEach(C=>C.stop()),c(null))},[l]),x=E.useCallback(()=>{if(!i.current||!o.current)return;const C=i.current,L=o.current,T=L.getContext("2d");T&&(L.width=C.videoWidth,L.height=C.videoHeight,T.drawImage(C,0,0),L.toBlob(S=>{if(S){const P=URL.createObjectURL(S);h(P),p(!0)}},"image/jpeg",.8))},[]),v=E.useCallback(()=>{!o.current||!u||o.current.toBlob(C=>{if(C){const L=new Date().toISOString();t(C,L),h(null),p(!1),m(),n()}},"image/jpeg",.8)},[u,t,m,n]),w=E.useCallback(()=>{h(null),p(!1)},[]),_=E.useCallback(()=>{m(),h(null),p(!1),n()},[m,n]),N=E.useCallback(C=>{C?y():_()},[y,_]);return E.useEffect(()=>{e&&y()},[e,y]),a.jsx(Qt,{open:e,onOpenChange:N,children:a.jsxs(Bt,{className:"max-w-lg","aria-describedby":"camera-description",children:[a.jsx(gr,{children:a.jsx(_n,{children:r})}),a.jsx("p",{id:"camera-description",className:"sr-only",children:"Camera interface for capturing delivery photos with timestamp overlay"}),a.jsx("div",{className:"space-y-4",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative rounded-lg overflow-hidden",children:a.jsx("img",{src:u||"",alt:"Captured",className:"w-full h-48 object-cover","data-testid":"captured-image"})}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsxs(ge,{onClick:v,className:"bg-green-500 hover:bg-green-600","data-testid":"button-confirm-photo",children:[a.jsx(Fo,{className:"w-5 h-5 mr-2"}),"Use Photo"]}),a.jsxs(ge,{variant:"outline",onClick:w,"data-testid":"button-retake-photo",children:[a.jsx(dy,{className:"w-5 h-5 mr-2"}),"Retake"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden",children:a.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-48 object-cover","data-testid":"camera-video"})}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsxs(ge,{onClick:x,disabled:!l,className:"bg-orange-500 hover:bg-orange-600","data-testid":"button-capture-photo",children:[a.jsx(Pc,{className:"w-5 h-5 mr-2"}),"Capture Photo"]}),a.jsxs(ge,{variant:"outline",onClick:_,"data-testid":"button-cancel-camera",children:[a.jsx(ea,{className:"w-5 h-5 mr-2"}),"Cancel"]})]})]})}),a.jsx("canvas",{ref:o,className:"hidden"})]})})}function bh({onCapture:t,className:e,children:n,title:r="Take Photo",branchName:s}){const[i,o]=E.useState(!1),l=()=>{o(!0)},c=()=>{o(!1)},u=(h,f)=>{t(h,f),o(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(ge,{onClick:l,className:e,"data-testid":"button-take-photo",children:n}),a.jsx(H7,{isOpen:i,onClose:c,onCapture:u,title:r,branchName:s})]})}async function m2(t,e){const{branchName:n,timestamp:r,extraLine1:s,extraLine2:i}=e;return new Promise((o,l)=>{const c=new Image;c.onload=()=>{try{const h=document.createElement("canvas"),f=h.getContext("2d");if(!f){l(new Error("Canvas context not available"));return}h.width=c.width,h.height=c.height,f.drawImage(c,0,0);const p=r instanceof Date?r.toLocaleString():r.toDate().toLocaleString(),g=[`Branch: ${n}`,`Time: ${p}`];s&&g.push(s),i&&g.push(i);const y=Math.max(12,Math.min(c.width/40,16));f.font=`${y}px Arial, sans-serif`,f.fillStyle="white",f.textAlign="left",f.textBaseline="top";const m=y*1.2,x=8,w=Math.max(...g.map(T=>f.measureText(T).width))+x*2,_=g.length*m+x*2,N=c.width-w-10,C=c.height-_-10;f.fillStyle="rgba(0, 0, 0, 0.7)",f.shadowColor="rgba(0, 0, 0, 0.5)",f.shadowBlur=4,f.shadowOffsetX=2,f.shadowOffsetY=2,((T,S,P,k,M)=>{f.beginPath(),f.moveTo(T+M,S),f.lineTo(T+P-M,S),f.quadraticCurveTo(T+P,S,T+P,S+M),f.lineTo(T+P,S+k-M),f.quadraticCurveTo(T+P,S+k,T+P-M,S+k),f.lineTo(T+M,S+k),f.quadraticCurveTo(T,S+k,T,S+k-M),f.lineTo(T,S+M),f.quadraticCurveTo(T,S,T+M,S),f.closePath(),f.fill()})(N,C,w,_,4),f.shadowColor="transparent",f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0,f.fillStyle="white",g.forEach((T,S)=>{f.fillText(T,N+x,C+x+S*m)}),h.toBlob(T=>{if(!T){l(new Error("Failed to create blob from canvas"));return}const S=new File([T],t.name.replace(/\.(jpg|jpeg|png)$/i,"_watermarked.jpg"),{type:"image/jpeg",lastModified:Date.now()});S.size>300*1024?h.toBlob(P=>{if(!P){l(new Error("Failed to create compressed blob"));return}const k=new File([P],t.name.replace(/\.(jpg|jpeg|png)$/i,"_watermarked.jpg"),{type:"image/jpeg",lastModified:Date.now()});o(k)},"image/jpeg",.7):o(S)},"image/jpeg",.9)}catch(h){l(h)}},c.onerror=()=>{l(new Error("Failed to load image"))};const u=new FileReader;u.onload=h=>{var f;(f=h.target)!=null&&f.result?c.src=h.target.result:l(new Error("Failed to read file"))},u.onerror=()=>{l(new Error("Failed to read file"))},u.readAsDataURL(t)})}function g2(){return new Date}function q7({onClose:t}){var p;const{toast:e}=Hn();Ji();const[n,r]=E.useState(1),[s,i]=E.useState({oilTypeId:"",totalLoadedLiters:0,loadMeterReading:0,loadLocationId:""}),{data:o=[]}=Qh({queryKey:["oil-types"],queryFn:_w}),{data:l=[]}=Qh({queryKey:["branches"],queryFn:Ew}),c=[{id:1,title:"Complete Tank Loading",status:n===1?"active":n>1?"completed":"pending"}],u=async(g,y)=>{try{const m=new File([g],`${y}_${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),x=l.find(C=>C.id===s.loadLocationId),v=(x==null?void 0:x.name)||"Loading Location",w=await m2(m,{branchName:v,timestamp:g2(),extraLine2:"Oil Type: Loading"}),_=new Blob([w],{type:"image/jpeg"}),N=await RA(_,"loading-photos");i(C=>({...C,[`${y}Photo`]:N})),e({title:"Photo Captured",description:`${y} photo saved successfully with watermark`})}catch(m){console.error("Photo upload error:",m),e({title:"Photo Saved Locally",description:"Photo captured and saved for demo",variant:"default"})}},h=async()=>{var g;try{if(!s.oilTypeId||!s.totalLoadedLiters){e({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}const y={oilTypeId:s.oilTypeId,oilTypeName:((g=o.find(x=>x.id===s.oilTypeId))==null?void 0:g.name)||"Unknown Oil Type",totalLoadedLiters:s.totalLoadedLiters,loadMeterReading:s.loadMeterReading,loadLocationId:s.loadLocationId||"Main Depot",meterReadingPhoto:s.meterReadingPhoto||null},m=await ZB(y);e({title:"Load Session Created",description:`Successfully loaded ${s.totalLoadedLiters}L of ${y.oilTypeName}. Session ID: ${m.loadSessionId}`}),i({oilTypeId:"",totalLoadedLiters:0,loadMeterReading:0,loadLocationId:""}),r(1),t()}catch(y){console.error("Load session creation error:",y),e({title:"Loading Failed",description:"Failed to create load session. Please try again.",variant:"destructive"})}},f=()=>s.oilTypeId&&s.totalLoadedLiters>0&&s.loadMeterReading>0&&s.meterReadingPhoto;return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tank Loading Process"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Load oil into tank truck and create load session"})]}),a.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:c.map((g,y)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${g.status==="completed"?"bg-green-500 border-green-500 text-white":g.status==="active"?"bg-orange-500 border-orange-500 text-white":"bg-gray-200 border-gray-300 text-gray-600"}`,children:g.status==="completed"?a.jsx(Fo,{className:"w-6 h-6"}):a.jsx("span",{className:"text-sm font-medium",children:g.id})}),a.jsx("span",{className:`ml-2 text-sm font-medium ${g.status==="active"?"text-orange-600":"text-gray-600"}`,children:g.title}),y<c.length-1&&a.jsx("div",{className:`w-12 h-0.5 mx-4 ${g.status==="completed"?"bg-green-500":"bg-gray-300"}`})]},g.id))}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(lu,{className:"w-5 h-5 text-orange-500"}),"Complete Tank Loading"]})}),a.jsxs($e,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"oilType",children:"Oil Type *"}),a.jsxs(dt,{value:s.oilTypeId,onValueChange:g=>i(y=>({...y,oilTypeId:g})),children:[a.jsx(lt,{"data-testid":"select-oil-type",children:a.jsx(ht,{placeholder:"Select oil type"})}),a.jsx(ct,{children:o.map(g=>a.jsx(we,{value:g.id,"data-testid":`oil-type-${g.id}`,children:g.name},g.id))})]})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"totalLiters",children:"Total Loaded (Liters) *"}),a.jsx(et,{"data-testid":"input-total-liters",type:"number",placeholder:"Enter total loaded liters",value:s.totalLoadedLiters===0?"":s.totalLoadedLiters,onChange:g=>i(y=>({...y,totalLoadedLiters:Number(g.target.value)||0}))})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"meterReading",children:"Load Meter Reading *"}),a.jsx(et,{"data-testid":"input-meter-reading",type:"number",placeholder:"Enter meter reading",value:s.loadMeterReading===0?"":s.loadMeterReading,onChange:g=>i(y=>({...y,loadMeterReading:Number(g.target.value)||0}))})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"loadLocation",children:"Load Location (Optional)"}),a.jsxs(dt,{value:s.loadLocationId,onValueChange:g=>i(y=>({...y,loadLocationId:g})),children:[a.jsx(lt,{"data-testid":"select-load-location",children:a.jsx(ht,{placeholder:"Select location"})}),a.jsx(ct,{children:l.map(g=>a.jsx(we,{value:g.id,"data-testid":`location-${g.id}`,children:g.name},g.id))})]})]})]}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Pc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Main Tanker Meter Reading Photo *"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Capture the meter reading during loading"}),a.jsxs(bh,{onCapture:(g,y)=>u(g,"meterReading"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2",title:"Main Tanker Meter Reading Photo",branchName:((p=l.find(g=>g.id===s.loadLocationId))==null?void 0:p.name)||"Loading Location",children:[a.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Take Meter Reading Photo"]}),s.meterReadingPhoto&&a.jsx("div",{className:"mt-4",children:a.jsxs(Ft,{variant:"default",className:"bg-green-100 text-green-800",children:[a.jsx(Fo,{className:"w-4 h-4 mr-1"}),"Photo Captured"]})})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(ge,{onClick:h,disabled:!f(),className:"bg-green-600 hover:bg-green-700 px-8","data-testid":"button-create-load-session",children:[a.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Create Load Session"]})})]})]})]})}function K7({onClose:t}){const{toast:e}=Hn(),{userData:n}=Ji(),[r,s]=E.useState(1),[i,o]=E.useState({deliveryOrderNo:"",branchId:"",oilTypeId:"",startMeterReading:0,endMeterReading:0,oilSuppliedLiters:0}),[l,c]=E.useState(null);E.useEffect(()=>{(async()=>{try{const x=(await Ip()).filter(v=>v.type==="supply"&&v.endMeterReading).sort((v,w)=>{var C,L;const _=new Date((C=v.timestamp)!=null&&C.toDate?v.timestamp.toDate():v.timestamp);return new Date((L=w.timestamp)!=null&&L.toDate?w.timestamp.toDate():w.timestamp).getTime()-_.getTime()});if(x.length>0){const v=x[0].endMeterReading;o(w=>({...w,startMeterReading:v}))}}catch(m){console.error("Error getting last meter reading:",m)}})()},[]);const{data:u=[]}=Qh({queryKey:["branches"],queryFn:Ew}),{data:h=[]}=Qh({queryKey:["oil-types"],queryFn:_w}),f=[{id:1,title:"Complete Oil Supply",status:r===1?"active":r>1?"completed":"pending"}],p=async(y,m)=>{try{const x=new File([y],`${m}_${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),v=l||u.find(T=>T.id===i.branchId),w=(v==null?void 0:v.name)||"Unknown Branch",_=(n==null?void 0:n.displayName)||"Unknown Driver",N=await m2(x,{branchName:w,timestamp:g2(),extraLine1:`Driver: ${_}`,extraLine2:"Oil Type: Supply"}),C=new Blob([N],{type:"image/jpeg"}),L=await RA(C,"delivery-photos");o(T=>({...T,[`${m}Photo`]:L})),e({title:"Photo Captured",description:`${m} photo saved successfully with watermark`})}catch(x){console.error("Photo upload error:",x);const v=URL.createObjectURL(y);o(w=>({...w,[`${m}Photo`]:v})),e({title:"Photo Saved Locally",description:"Photo captured and saved for demo",variant:"default"})}},g=async()=>{try{if(!i.oilSuppliedLiters||!i.branchId||!i.oilTypeId){e({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}if(i.startMeterReading>i.endMeterReading){e({title:"Invalid Meter Readings",description:"Start meter reading cannot be greater than finish meter reading",variant:"destructive"});return}console.log(`Supplying ${i.oilSuppliedLiters}L directly (no load session tracking)`);const y=h.find(_=>_.id===i.oilTypeId),m=u.find(_=>_.id===i.branchId),x={loadSessionId:`DIRECT_${Date.now()}`,deliveryOrderId:i.deliveryOrderNo||`DO_${Date.now()}`,branchId:i.branchId,branchName:(m==null?void 0:m.name)||"Unknown Branch",oilTypeId:i.oilTypeId,oilTypeName:(y==null?void 0:y.name)||"Unknown Oil Type",deliveredLiters:i.oilSuppliedLiters,startMeterReading:i.startMeterReading,endMeterReading:i.endMeterReading,photos:{tankLevelBefore:i.tankLevelPhoto||null,hoseConnection:i.hoseConnectionPhoto||null,tankLevelAfter:i.finalTankLevelPhoto||null},actualDeliveryStartTime:new Date,actualDeliveryEndTime:new Date,status:"completed"},v=await JB(x);console.log("Delivery transaction saved to Firestore:",v);const w=(l==null?void 0:l.name)||(m==null?void 0:m.name)||"Unknown Branch";console.log("✅ Transaction completed with correct branch watermarks:",w),e({title:"Delivery Completed",description:`Successfully delivered ${i.oilSuppliedLiters}L to ${w}`}),o({deliveryOrderNo:"",branchId:"",oilTypeId:"",startMeterReading:0,endMeterReading:0,oilSuppliedLiters:0}),c(null),s(1),t()}catch(y){console.error("Supply completion error:",y),e({title:"Supply Failed",description:"Failed to complete delivery. Please try again.",variant:"destructive"})}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 p-4",children:a.jsxs(ze,{className:"max-w-2xl mx-auto",children:[a.jsxs(jt,{className:"text-center bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx(lu,{className:"w-8 h-8"}),a.jsx(Pt,{className:"text-2xl font-bold",children:"Oil Supply Workflow"})]}),a.jsx("div",{className:"flex justify-center space-x-4",children:f.map(y=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${y.status==="completed"?"bg-green-500":y.status==="active"?"bg-white text-orange-500":"bg-gray-300 text-gray-600"}`,children:y.status==="completed"?a.jsx(Fo,{className:"w-4 h-4"}):y.id}),a.jsx("span",{className:"ml-2 text-sm",children:y.title})]},y.id))})]}),a.jsx($e,{className:"p-6 space-y-6",children:r===1&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"deliveryOrder",children:"Delivery Order"}),a.jsx(et,{id:"deliveryOrder",type:"text",value:i.deliveryOrderNo,onChange:y=>o(m=>({...m,deliveryOrderNo:y.target.value})),placeholder:"Enter delivery order number","data-testid":"input-delivery-order"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"branch",children:"Branch *"}),a.jsxs(dt,{value:i.branchId,onValueChange:y=>{console.log("Step 1 - Branch dropdown changed to:",y);const m=u.find(x=>x.id===y);if(console.log("Step 1 - Selected branch object:",m),m){const x={id:m.id,name:m.name,address:m.address};c(x),console.log("✓ STEP 1 - BRANCH DATA SAVED:",x)}o(x=>{const v={...x,branchId:y};return console.log("Step 1 - Updated supplyData:",v),v})},children:[a.jsx(lt,{"data-testid":"select-branch",children:a.jsx(ht,{placeholder:"Select delivery branch"})}),a.jsx(ct,{children:u.map(y=>a.jsx(we,{value:y.id,children:y.name},y.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"oilType",children:"Oil Type *"}),a.jsxs(dt,{value:i.oilTypeId,onValueChange:y=>o(m=>({...m,oilTypeId:y})),children:[a.jsx(lt,{"data-testid":"select-oil-type",children:a.jsx(ht,{placeholder:"Select oil type"})}),a.jsx(ct,{children:h.map(y=>a.jsxs(we,{value:y.id,children:[y.name," - ",y.viscosity]},y.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"oilSupplied",children:"Oil Supplied (Liters) *"}),a.jsx(et,{id:"oilSupplied",type:"number",value:i.oilSuppliedLiters===0?"":i.oilSuppliedLiters,onChange:y=>o(m=>({...m,oilSuppliedLiters:Number(y.target.value)||0})),placeholder:"Enter liters supplied","data-testid":"input-oil-supplied",min:"1"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"startMeter",children:"Start Meter Reading (Auto-filled) *"}),a.jsx(et,{id:"startMeter",type:"number",value:i.startMeterReading||"",onChange:y=>o(m=>({...m,startMeterReading:Number(y.target.value)})),placeholder:"Auto-filled from last supply","data-testid":"input-start-meter",className:"bg-blue-50"}),a.jsx("p",{className:"text-xs text-blue-600",children:"Auto-filled with last finished meter reading"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"endMeter",children:"End Meter Reading *"}),a.jsx(et,{id:"endMeter",type:"number",value:i.endMeterReading===0?"":i.endMeterReading,onChange:y=>o(m=>({...m,endMeterReading:Number(y.target.value)||0})),placeholder:"Meter reading after supply","data-testid":"input-end-meter",className:i.startMeterReading>i.endMeterReading&&i.endMeterReading>0?"border-red-500":""}),i.startMeterReading>i.endMeterReading&&i.endMeterReading>0&&a.jsx("p",{className:"text-xs text-red-600 flex items-center",children:"⚠️ End meter reading must be greater than start meter reading"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs(bh,{onCapture:(y,m)=>p(y,"tankLevel"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Tank Level Before",branchName:(l==null?void 0:l.name)||"No Branch Selected",children:[a.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Tank Level Before"]}),i.tankLevelPhoto&&a.jsx(Ft,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs(bh,{onCapture:(y,m)=>p(y,"hoseConnection"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Hose Connection",branchName:(l==null?void 0:l.name)||"No Branch Selected",children:[a.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Hose Connection"]}),i.hoseConnectionPhoto&&a.jsx(Ft,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs(bh,{onCapture:(y,m)=>p(y,"finalTankLevel"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Tank Level After",branchName:(l==null?void 0:l.name)||"No Branch Selected",children:[a.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Tank Level After"]}),i.finalTankLevelPhoto&&a.jsx(Ft,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx(ge,{variant:"outline",onClick:t,children:"Cancel"}),a.jsxs(ge,{onClick:g,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600","data-testid":"button-complete-supply",children:[a.jsx(Fo,{className:"w-4 h-4 mr-2"}),"Complete Supply"]})]})]})})]})})}function x1({user:t}){var W,V,O,H,ee,se;const{logout:e}=Ji(),{toast:n}=Hn(),[r,s]=E.useState(!1),[i,o]=E.useState(!1),[l,c]=E.useState([]),[u,h]=E.useState([]),[f,p]=E.useState(null),[g,y]=E.useState(!1),[m,x]=E.useState(null),[v,w]=E.useState([]),[_,N]=E.useState({}),[C,L]=E.useState([]),[T,S]=E.useState(null),[P,k]=E.useState(!1),[M,R]=E.useState(null),[D,I]=E.useState(!1),[q,oe]=E.useState([]),[Y,U]=E.useState(!1),[$,J]=E.useState(!1),[B,K]=E.useState(null),[ae,ue]=E.useState({title:"",description:"",category:"other",priority:"medium",photos:[]});E.useEffect(()=>{le(),Ee(),Te(),ye()},[t.id]);const le=async()=>{try{c([]),h([])}catch(z){console.error("Error loading deliveries:",z)}},Te=async()=>{try{const te=(await Ip()).filter(G=>G.driverId===t.id||G.driverUid===t.id);w(te);const pe=new Date;pe.setHours(0,0,0,0);const Z={};te.forEach(G=>{var Ve;if(((Ve=G.timestamp)!=null&&Ve.toDate?G.timestamp.toDate():new Date(G.timestamp))>=pe&&G.type==="supply"){const yt=G.oilTypeName||"Unknown";Z[yt]=(Z[yt]||0)+(G.oilLiters||0)}}),N(Z);const me=te.sort((G,he)=>{var ft,pt;const Ve=(ft=G.timestamp)!=null&&ft.toDate?G.timestamp.toDate():new Date(G.timestamp);return((pt=he.timestamp)!=null&&pt.toDate?he.timestamp.toDate():new Date(he.timestamp)).getTime()-Ve.getTime()}).slice(0,10);L(me)}catch(z){console.error("Error loading transactions:",z),w([]),L([]),N({})}},ye=async()=>{try{const z=await BB(t.id);oe(z)}catch(z){console.error("Error loading complaints:",z),oe([])}},de=async()=>{try{if(!ae.title||!ae.description){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const z={...ae,reportedBy:t.id,reporterName:t.displayName||t.email||"Unknown Driver",status:"open",createdAt:new Date,updatedAt:new Date,watermarkedPhotos:ae.photos};await PA(z),n({title:"Complaint Submitted",description:"Your complaint has been submitted successfully"}),J(!1),ue({title:"",description:"",category:"other",priority:"medium",photos:[]}),ye()}catch(z){console.error("Error submitting complaint:",z),n({title:"Error",description:"Failed to submit complaint",variant:"destructive"})}},Ee=async()=>{try{x(t)}catch(z){console.error("Error loading user profile:",z)}},Ne=async()=>{await e()},Ie=()=>{s(!1),le(),Te(),n({title:"Loading Complete",description:"Oil loading completed successfully"})},Re=()=>{o(!1),le(),Te(),n({title:"Supply Complete",description:"Oil delivery completed successfully"})},Be=z=>{p(z),y(!0)},j=z=>{S(z),k(!0)},re=Object.values(_).reduce((z,te)=>z+te,0);return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:a.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"OILDELIVERY"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Driver Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(m==null?void 0:m.displayName)||t.displayName||t.email}),a.jsx("p",{className:"text-xs text-gray-500",children:(m==null?void 0:m.email)||t.email})]}),a.jsxs(ge,{onClick:Ne,variant:"outline",size:"sm",className:"flex items-center text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-logout",children:[a.jsx(lx,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"}),a.jsx("span",{className:"sm:hidden",children:"Exit"})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsx(ze,{className:"hover:shadow-lg transition-shadow",children:a.jsxs($e,{className:"p-8 text-center",children:[a.jsx("div",{className:"bg-blue-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(lu,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Loading Oil"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start loading oil from the main tank"}),a.jsx(ge,{onClick:()=>s(!0),className:"w-full bg-blue-500 hover:bg-blue-600","data-testid":"button-start-loading",children:"Start Loading"})]})}),a.jsx(ze,{className:"hover:shadow-lg transition-shadow",children:a.jsxs($e,{className:"p-8 text-center",children:[a.jsx("div",{className:"bg-orange-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(Jr,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Supply Oil"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Deliver oil to customer locations"}),a.jsx(ge,{onClick:()=>o(!0),className:"w-full bg-orange-500 hover:bg-orange-600","data-testid":"button-start-supply",children:"Start Supply"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs(ze,{children:[a.jsxs(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Pt,{className:"text-sm font-medium",children:"Today's Deliveries"}),a.jsx(lu,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs($e,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[re.toLocaleString(),"L"]}),a.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.keys(_).length>0?Object.entries(_).map(([z,te])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:[z,":"]}),a.jsxs("span",{className:"font-medium",children:[te.toLocaleString(),"L"]})]},z)):a.jsx("p",{children:"No deliveries completed today"})})]})]}),a.jsxs(ze,{children:[a.jsxs(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Pt,{className:"text-sm font-medium",children:"My Complaints"}),a.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs($e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:q.length}),a.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Open:"}),a.jsx("span",{className:"font-medium text-red-600",children:q.filter(z=>z.status==="open").length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"In Progress:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:q.filter(z=>z.status==="in-progress").length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Resolved:"}),a.jsx("span",{className:"font-medium text-green-600",children:q.filter(z=>z.status==="resolved").length})]})]}),a.jsxs(ge,{onClick:()=>J(!0),size:"sm",className:"w-full mt-3",variant:"outline",children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Report Issue"]})]})]})]}),u.length>0&&a.jsxs(ze,{className:"mb-8",children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(xl,{className:"h-5 w-5"}),"Recent Deliveries (Last 3)"]})}),a.jsx($e,{children:a.jsx("div",{className:"space-y-4",children:u.map((z,te)=>{var pe;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:z.oilTypeName||"Unknown Oil Type"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[z.loadedOilLiters,"L • Delivered to ",z.branchName||"Unknown Branch"]}),a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(mr,{className:"h-3 w-3"}),(pe=z.completedTimestamp)!=null&&pe.toDate?z.completedTimestamp.toDate().toLocaleDateString():"Unknown date"]})]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>Be(z),className:"flex items-center gap-2","data-testid":`button-view-delivery-${te}`,children:[a.jsx(Ln,{className:"h-4 w-4"}),"View"]})]},z.id||te)})})})]}),q.length>0&&a.jsxs(ze,{className:"mb-8",children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(Ui,{className:"h-5 w-5"}),"My Complaints (",q.length,")"]})}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-4",children:[q.slice(0,5).map((z,te)=>{var pe;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:z.title}),a.jsx("div",{className:"text-sm text-gray-600 line-clamp-1",children:z.description}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(Ft,{variant:z.status==="open"?"destructive":z.status==="in-progress"?"default":"secondary",children:z.status}),a.jsx(Ft,{variant:"outline",children:z.priority}),a.jsx("div",{className:"text-xs text-gray-500",children:(pe=z.createdAt)!=null&&pe.toDate?z.createdAt.toDate().toLocaleDateString():"Unknown date"})]})]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{K(z),U(!0)},className:"flex items-center gap-2",children:[a.jsx(Ln,{className:"h-4 w-4"}),"View"]})]},z.id||te)}),q.length>5&&a.jsxs("div",{className:"text-center text-sm text-gray-500",children:["And ",q.length-5," more complaints..."]})]})})]}),a.jsxs(ze,{className:"mb-8",children:[a.jsxs(jt,{children:[a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(xl,{className:"h-5 w-5"}),"Recent Transactions (Last 10)"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Complete history of loading and supply operations"})]}),a.jsx($e,{children:C.length>0?a.jsx("div",{className:"space-y-3",children:C.map((z,te)=>{var pe,Z;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${z.type==="loading"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:z.type==="loading"?"LOADING":"SUPPLY"}),a.jsx("span",{className:"font-medium",children:z.oilTypeName||"Unknown Oil Type"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[(pe=z.quantity)==null?void 0:pe.toLocaleString(),"L",z.type==="supply"&&z.branchName&&a.jsxs(a.Fragment,{children:[" • Delivered to ",z.branchName]})]}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mr,{className:"h-3 w-3"}),(Z=z.timestamp)!=null&&Z.toDate?z.timestamp.toDate().toLocaleString():"Unknown date"]}),z.type==="supply"&&z.branchName&&a.jsxs("div",{children:["Branch: ",z.branchName]}),a.jsxs("div",{children:["Driver: ",(m==null?void 0:m.displayName)||t.displayName||t.email]})]})]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>j(z),className:"flex items-center gap-2","data-testid":`button-view-transaction-${te}`,children:[a.jsx(Ln,{className:"h-4 w-4"}),"View"]})]},z.id||te)})}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No transaction history available"}),a.jsx("p",{className:"text-sm mt-2",children:"Start loading or supplying oil to see your transaction history"})]})})]})]}),a.jsx(Qt,{open:r,onOpenChange:s,children:a.jsx(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a.jsx(q7,{onClose:Ie})})}),a.jsx(Qt,{open:i,onOpenChange:o,children:a.jsx(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a.jsx(K7,{onClose:Re})})}),a.jsx(Qt,{open:g,onOpenChange:y,children:a.jsx(Bt,{className:"max-w-2xl",children:f&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),a.jsx("div",{className:"text-sm text-gray-500",children:(W=f.completedTimestamp)!=null&&W.toDate?f.completedTimestamp.toDate().toLocaleDateString():"Unknown date"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),a.jsx("p",{className:"font-medium",children:f.oilTypeName||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),a.jsxs("p",{className:"font-medium",children:[f.loadedOilLiters,"L"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),a.jsx("p",{className:"font-medium",children:f.branchName||"Unknown Branch"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Delivery Order"}),a.jsx("p",{className:"font-medium",children:f.deliveryOrderNo||"N/A"})]})]}),(f.meterReadingPhoto||f.tankLevelPhoto||f.finalTankLevelPhoto)&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.meterReadingPhoto&&a.jsxs("div",{className:"text-center",children:[a.jsx("img",{src:f.meterReadingPhoto,alt:"Meter Reading",className:"w-full h-20 object-cover rounded border"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Meter Reading"})]}),f.tankLevelPhoto&&a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{R({url:f.tankLevelPhoto,label:"Tank Level Photo"}),I(!0)},children:[a.jsx("img",{src:f.tankLevelPhoto,alt:"Tank Level",className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tank Level"})]}),f.finalTankLevelPhoto&&a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{R({url:f.finalTankLevelPhoto,label:"Final Tank Level Photo"}),I(!0)},children:[a.jsx("img",{src:f.finalTankLevelPhoto,alt:"Final Tank Level",className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Final Tank Level"})]})]})]})]})})}),a.jsx(Qt,{open:P,onOpenChange:k,children:a.jsxs(Bt,{className:"max-w-2xl",children:[a.jsx(_n,{children:"Transaction Details"}),a.jsx(Ar,{children:"View detailed information about this transaction including photos and metadata"}),T&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Transaction Details"}),a.jsx("div",{className:"text-sm text-gray-500",children:(V=T.timestamp)!=null&&V.toDate?T.timestamp.toDate().toLocaleString():"Unknown date"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),a.jsx("p",{className:`font-medium ${T.type==="loading"?"text-blue-600":"text-orange-600"}`,children:T.type==="loading"?"Oil Loading":"Oil Supply"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),a.jsx("p",{className:"font-medium",children:T.oilTypeName||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),a.jsxs("p",{className:"font-medium",children:[(O=T.quantity)==null?void 0:O.toLocaleString(),"L"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driver"}),a.jsx("p",{className:"font-medium",children:(m==null?void 0:m.displayName)||t.displayName||t.email})]}),T.type==="supply"&&T.branchName&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),a.jsx("p",{className:"font-medium",children:T.branchName}),T.branchAddress&&a.jsx("p",{className:"text-sm text-gray-500",children:T.branchAddress})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Date & Time"}),a.jsx("p",{className:"font-medium",children:(H=T.timestamp)!=null&&H.toDate?T.timestamp.toDate().toLocaleString():"Unknown date"})]}),T.loadSessionId&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Load Session ID"}),a.jsx("p",{className:"font-medium text-xs",children:T.loadSessionId})]}),T.startMeterReading&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Start Meter Reading"}),a.jsx("p",{className:"font-medium",children:T.startMeterReading})]}),T.endMeterReading&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"End Meter Reading"}),a.jsx("p",{className:"font-medium",children:T.endMeterReading})]}),T.meterReading&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Meter Reading"}),a.jsx("p",{className:"font-medium",children:T.meterReading})]})]}),T.photos&&Object.keys(T.photos).length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(T.photos).map(([z,te])=>te&&a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{R({url:te,label:z.replace(/([A-Z])/g," $1").trim()}),I(!0)},children:[a.jsx("img",{src:te,alt:z,className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:z.replace(/([A-Z])/g," $1").trim()})]},z))})]})]})]})}),a.jsx(Qt,{open:D,onOpenChange:I,children:a.jsxs(Bt,{className:"max-w-4xl w-full h-[90vh] p-0",children:[a.jsx(_n,{className:"sr-only",children:"Photo Viewer"}),a.jsxs(Ar,{className:"sr-only",children:["Full size view of ",(M==null?void 0:M.label)||"delivery photo"]}),M&&a.jsxs("div",{className:"relative w-full h-full bg-black rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:M.label}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ge,{variant:"ghost",size:"sm",onClick:()=>{const z=document.createElement("a");z.href=M.url,z.download=`${M.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,z.click()},className:"text-white hover:bg-white/20",children:[a.jsx(Yh,{className:"h-4 w-4 mr-1"}),"Download"]}),a.jsx(ge,{variant:"ghost",size:"sm",onClick:()=>I(!1),className:"text-white hover:bg-white/20",children:a.jsx(ea,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:a.jsx("img",{src:M.url,alt:M.label,className:"max-w-full max-h-full object-contain",style:{maxHeight:"calc(100vh - 120px)"}})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-center space-x-4",children:[a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>window.open(M.url,"_blank"),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[a.jsx(Ln,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{const z=document.createElement("a");z.href=M.url,z.download=`${M.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,z.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[a.jsx(Yh,{className:"h-4 w-4 mr-1"}),"Download Photo"]})]})]})]})}),a.jsx(Qt,{open:$,onOpenChange:J,children:a.jsxs(Bt,{className:"max-w-2xl",children:[a.jsxs(gr,{children:[a.jsx(_n,{children:"Report an Issue"}),a.jsx(Ar,{children:"Describe the issue you're experiencing. Add photos for evidence if needed."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"complaint-title",children:"Issue Title *"}),a.jsx(et,{id:"complaint-title",value:ae.title,onChange:z=>ue(te=>({...te,title:z.target.value})),placeholder:"Brief description of the issue"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"complaint-description",children:"Description *"}),a.jsx(Qa,{id:"complaint-description",value:ae.description,onChange:z=>ue(te=>({...te,description:z.target.value})),placeholder:"Detailed description of the issue",rows:4})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{children:"Category"}),a.jsxs(dt,{value:ae.category,onValueChange:z=>ue(te=>({...te,category:z})),children:[a.jsx(lt,{children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"equipment",children:"Equipment Issue"}),a.jsx(we,{value:"delivery",children:"Delivery Problem"}),a.jsx(we,{value:"safety",children:"Safety Concern"}),a.jsx(we,{value:"customer",children:"Customer Issue"}),a.jsx(we,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Priority"}),a.jsxs(dt,{value:ae.priority,onValueChange:z=>ue(te=>({...te,priority:z})),children:[a.jsx(lt,{children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"low",children:"Low"}),a.jsx(we,{value:"medium",children:"Medium"}),a.jsx(we,{value:"high",children:"High"}),a.jsx(we,{value:"critical",children:"Critical"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>{J(!1),ue({title:"",description:"",category:"other",priority:"medium",photos:[]})},children:"Cancel"}),a.jsx(ge,{onClick:de,children:"Submit Complaint"})]})]})]})}),a.jsx(Qt,{open:Y,onOpenChange:U,children:a.jsx(Bt,{className:"max-w-3xl",children:B&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(gr,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(_n,{className:"text-xl",children:B.title}),a.jsxs(Ar,{children:["Complaint #",B.id," • Reported on ",(ee=B.createdAt)!=null&&ee.toDate?B.createdAt.toDate().toLocaleDateString():"Unknown date"]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Ft,{variant:B.status==="open"?"destructive":B.status==="in-progress"?"default":"secondary",children:B.status}),a.jsx(Ft,{variant:"outline",children:B.priority})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Description"}),a.jsx("p",{className:"mt-1",children:B.description})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Category"}),a.jsx("p",{className:"mt-1 capitalize",children:B.category})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Priority"}),a.jsx("p",{className:"mt-1 capitalize",children:B.priority})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Status"}),a.jsx("p",{className:"mt-1 capitalize",children:B.status.replace("-"," ")})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),a.jsx("p",{className:"mt-1",children:(se=B.updatedAt)!=null&&se.toDate?B.updatedAt.toDate().toLocaleDateString():"Unknown date"})]})]}),B.resolution&&a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Resolution"}),a.jsxs("div",{className:"mt-1 p-3 bg-green-50 border border-green-200 rounded",children:[a.jsx("p",{children:B.resolution}),B.resolvedAt&&a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Resolved on ",B.resolvedAt.toDate?B.resolvedAt.toDate().toLocaleString():"Unknown date"]})]})]}),B.watermarkedPhotos&&B.watermarkedPhotos.length>0&&a.jsxs("div",{children:[a.jsxs(ve,{className:"text-sm font-medium text-gray-600",children:["Photo Evidence (",B.watermarkedPhotos.length,")"]}),a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:B.watermarkedPhotos.map((z,te)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:z,alt:`Evidence ${te+1}`,className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{R({url:z,label:`Evidence ${te+1}`}),I(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 hover:opacity-100 transition-opacity"})})]},te))})]})]})]})})})]})}var eg="rovingFocusGroup.onEntryFocus",G7={bubbles:!1,cancelable:!0},Qu="RovingFocusGroup",[Jy,y2,Q7]=rx(Qu),[Y7,v2]=yr(Qu,[Q7]),[X7,Z7]=Y7(Qu),x2=E.forwardRef((t,e)=>a.jsx(Jy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Jy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(J7,{...t,ref:e})})}));x2.displayName=Qu;var J7=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=E.useRef(null),g=Qe(e,p),y=Rp(i),[m,x]=Mo({prop:o,defaultProp:l??null,onChange:c,caller:Qu}),[v,w]=E.useState(!1),_=Wt(u),N=y2(n),C=E.useRef(!1),[L,T]=E.useState(0);return E.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(eg,_),()=>S.removeEventListener(eg,_)},[_]),a.jsx(X7,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:m,onItemFocus:E.useCallback(S=>x(S),[x]),onItemShiftTab:E.useCallback(()=>w(!0),[]),onFocusableItemAdd:E.useCallback(()=>T(S=>S+1),[]),onFocusableItemRemove:E.useCallback(()=>T(S=>S-1),[]),children:a.jsx(je.div,{tabIndex:v||L===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:ke(t.onMouseDown,()=>{C.current=!0}),onFocus:ke(t.onFocus,S=>{const P=!C.current;if(S.target===S.currentTarget&&P&&!v){const k=new CustomEvent(eg,G7);if(S.currentTarget.dispatchEvent(k),!k.defaultPrevented){const M=N().filter(oe=>oe.focusable),R=M.find(oe=>oe.active),D=M.find(oe=>oe.id===m),q=[R,D,...M].filter(Boolean).map(oe=>oe.ref.current);E2(q,h)}}C.current=!1}),onBlur:ke(t.onBlur,()=>w(!1))})})}),w2="RovingFocusGroupItem",_2=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=ji(),u=i||c,h=Z7(w2,n),f=h.currentTabStopId===u,p=y2(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:m}=h;return E.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),a.jsx(Jy.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ke(t.onMouseDown,x=>{r?h.onItemFocus(u):x.preventDefault()}),onFocus:ke(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:ke(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=nW(x,h.orientation,h.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=p().filter(N=>N.focusable).map(N=>N.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const N=_.indexOf(x.currentTarget);_=h.loop?rW(_,N+1):_.slice(N+1)}setTimeout(()=>E2(_))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:m!=null}):o})})});_2.displayName=w2;var eW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function nW(t,e,n){const r=tW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return eW[r]}function E2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function rW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sW=x2,iW=_2,Op="Tabs",[oW,dH]=yr(Op,[v2]),b2=v2(),[aW,Ow]=oW(Op),T2=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=Rp(l),[f,p]=Mo({prop:r,onChange:s,defaultProp:i??"",caller:Op});return a.jsx(aW,{scope:n,baseId:ji(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(je.div,{dir:h,"data-orientation":o,...u,ref:e})})});T2.displayName=Op;var S2="TabsList",C2=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Ow(S2,n),o=b2(n);return a.jsx(sW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(je.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});C2.displayName=S2;var N2="TabsTrigger",I2=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=Ow(N2,n),l=b2(n),c=R2(o.baseId,r),u=j2(o.baseId,r),h=r===o.value;return a.jsx(iW,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(je.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ke(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ke(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ke(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});I2.displayName=N2;var k2="TabsContent",A2=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=Ow(k2,n),c=R2(l.baseId,r),u=j2(l.baseId,r),h=r===l.value,f=E.useRef(h);return E.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(vr,{present:s||h,children:({present:p})=>a.jsx(je.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});A2.displayName=k2;function R2(t,e){return`${t}-trigger-${e}`}function j2(t,e){return`${t}-content-${e}`}var lW=T2,P2=C2,D2=I2,O2=A2;const Lw=lW,Lp=E.forwardRef(({className:t,...e},n)=>a.jsx(P2,{ref:n,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Lp.displayName=P2.displayName;const an=E.forwardRef(({className:t,...e},n)=>a.jsx(D2,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));an.displayName=D2.displayName;const Qn=E.forwardRef(({className:t,...e},n)=>a.jsx(O2,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qn.displayName=O2.displayName;var Mp="Checkbox",[cW,hH]=yr(Mp),[uW,Mw]=cW(Mp);function dW(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=t,[p,g]=Mo({prop:n,defaultProp:s??!1,onChange:c,caller:Mp}),[y,m]=E.useState(null),[x,v]=E.useState(null),w=E.useRef(!1),_=y?!!o||!!y.closest("form"):!0,N={checked:p,disabled:i,setChecked:g,control:y,setControl:m,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:Mi(s)?!1:s,isFormControl:_,bubbleInput:x,setBubbleInput:v};return a.jsx(uW,{scope:e,...N,children:hW(f)?f(N):r})}var L2="CheckboxTrigger",M2=E.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:y}=Mw(L2,t),m=Qe(s,h),x=E.useRef(c);return E.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const w=()=>f(x.current);return v.addEventListener("reset",w),()=>v.removeEventListener("reset",w)}},[i,f]),a.jsx(je.button,{type:"button",role:"checkbox","aria-checked":Mi(c)?"mixed":c,"aria-required":u,"data-state":B2(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:m,onKeyDown:ke(e,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:ke(n,v=>{f(w=>Mi(w)?!0:!w),y&&g&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});M2.displayName=L2;var Fw=E.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:h,...f}=t;return a.jsx(dW,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(M2,{...f,ref:e,__scopeCheckbox:n}),p&&a.jsx(z2,{__scopeCheckbox:n})]})})});Fw.displayName=Mp;var F2="CheckboxIndicator",V2=E.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=Mw(F2,n);return a.jsx(vr,{present:r||Mi(i.checked)||i.checked===!0,children:a.jsx(je.span,{"data-state":B2(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});V2.displayName=F2;var U2="CheckboxBubbleInput",z2=E.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:h,form:f,bubbleInput:p,setBubbleInput:g}=Mw(U2,t),y=Qe(n,g),m=RR(i),x=pN(r);E.useEffect(()=>{const w=p;if(!w)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,L=!s.current;if(m!==i&&C){const T=new Event("click",{bubbles:L});w.indeterminate=Mi(i),C.call(w,Mi(i)?!1:i),w.dispatchEvent(T)}},[p,m,i,s]);const v=E.useRef(Mi(i)?!1:i);return a.jsx(je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:u,value:h,form:f,...e,tabIndex:-1,ref:y,style:{...e.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});z2.displayName=U2;function hW(t){return typeof t=="function"}function Mi(t){return t==="indeterminate"}function B2(t){return Mi(t)?"indeterminate":t?"checked":"unchecked"}const $2=E.forwardRef(({className:t,...e},n)=>a.jsx(Fw,{ref:n,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(V2,{className:Pe("flex items-center justify-center text-current"),children:a.jsx(Fo,{className:"h-4 w-4"})})}));$2.displayName=Fw.displayName;function fW(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Vw="ScrollArea",[W2,fH]=yr(Vw),[pW,xr]=W2(Vw),H2=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=E.useState(null),[u,h]=E.useState(null),[f,p]=E.useState(null),[g,y]=E.useState(null),[m,x]=E.useState(null),[v,w]=E.useState(0),[_,N]=E.useState(0),[C,L]=E.useState(!1),[T,S]=E.useState(!1),P=Qe(e,M=>c(M)),k=Rp(s);return a.jsx(pW,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:L,scrollbarY:m,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:S,onCornerWidthChange:w,onCornerHeightChange:N,children:a.jsx(je.div,{dir:k,...o,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});H2.displayName=Vw;var q2="ScrollAreaViewport",K2=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=xr(q2,n),l=E.useRef(null),c=Qe(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(je.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});K2.displayName=q2;var hs="ScrollAreaScrollbar",Uw=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=xr(hs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return E.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(mW,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(gW,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(G2,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx(zw,{...r,ref:e}):null});Uw.displayName=hs;var mW=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=xr(hs,t.__scopeScrollArea),[i,o]=E.useState(!1);return E.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(vr,{present:n||i,children:a.jsx(G2,{"data-state":i?"visible":"hidden",...r,ref:e})})}),gW=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=xr(hs,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Vp(()=>c("SCROLL_END"),100),[l,c]=fW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),E.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const g=u[h];f!==g&&(c("SCROLL"),o()),f=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,o]),a.jsx(vr,{present:n||l!=="hidden",children:a.jsx(zw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ke(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ke(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),G2=E.forwardRef((t,e)=>{const n=xr(hs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=E.useState(!1),l=t.orientation==="horizontal",c=Vp(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:h)}},10);return Il(n.viewport,c),Il(n.content,c),a.jsx(vr,{present:r||i,children:a.jsx(zw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),zw=E.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=xr(hs,t.__scopeScrollArea),i=E.useRef(null),o=E.useRef(0),[l,c]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=J2(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,g){return EW(p,o.current,l,g)}return n==="horizontal"?a.jsx(yW,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=w1(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):n==="vertical"?a.jsx(vW,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=w1(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),yW=E.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=xr(hs,t.__scopeScrollArea),[o,l]=E.useState(),c=E.useRef(null),u=Qe(e,c,i.onScrollbarXChange);return E.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Y2,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),tj(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Sf(o.paddingLeft),paddingEnd:Sf(o.paddingRight)}})}})}),vW=E.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=xr(hs,t.__scopeScrollArea),[o,l]=E.useState(),c=E.useRef(null),u=Qe(e,c,i.onScrollbarYChange);return E.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Y2,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),tj(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Sf(o.paddingTop),paddingEnd:Sf(o.paddingBottom)}})}})}),[xW,Q2]=W2(hs),Y2=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=t,g=xr(hs,n),[y,m]=E.useState(null),x=Qe(e,P=>m(P)),v=E.useRef(null),w=E.useRef(""),_=g.viewport,N=r.content-r.viewport,C=Wt(h),L=Wt(c),T=Vp(f,10);function S(P){if(v.current){const k=P.clientX-v.current.left,M=P.clientY-v.current.top;u({x:k,y:M})}}return E.useEffect(()=>{const P=k=>{const M=k.target;(y==null?void 0:y.contains(M))&&C(k,N)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[_,y,N,C]),E.useEffect(L,[r,L]),Il(y,T),Il(g.content,T),a.jsx(xW,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:Wt(i),onThumbPointerUp:Wt(o),onThumbPositionChange:L,onThumbPointerDown:Wt(l),children:a.jsx(je.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:ke(t.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),v.current=y.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),S(P))}),onPointerMove:ke(t.onPointerMove,S),onPointerUp:ke(t.onPointerUp,P=>{const k=P.target;k.hasPointerCapture(P.pointerId)&&k.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),Tf="ScrollAreaThumb",X2=E.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Q2(Tf,t.__scopeScrollArea);return a.jsx(vr,{present:n||s.hasThumb,children:a.jsx(wW,{ref:e,...r})})}),wW=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=xr(Tf,n),o=Q2(Tf,n),{onThumbPositionChange:l}=o,c=Qe(e,f=>o.onThumbChange(f)),u=E.useRef(void 0),h=Vp(()=>{u.current&&(u.current(),u.current=void 0)},100);return E.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const g=bW(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,l]),a.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ke(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),y=f.clientX-g.left,m=f.clientY-g.top;o.onThumbPointerDown({x:y,y:m})}),onPointerUp:ke(t.onPointerUp,o.onThumbPointerUp)})});X2.displayName=Tf;var Bw="ScrollAreaCorner",Z2=E.forwardRef((t,e)=>{const n=xr(Bw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(_W,{...t,ref:e}):null});Z2.displayName=Bw;var _W=E.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=xr(Bw,n),[i,o]=E.useState(0),[l,c]=E.useState(0),u=!!(i&&l);return Il(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Il(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?a.jsx(je.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Sf(t){return t?parseInt(t,10):0}function J2(t,e){const n=t/e;return isNaN(n)?0:n}function Fp(t){const e=J2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function EW(t,e,n,r="ltr"){const s=Fp(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return ej([c,u],f)(t)}function w1(t,e,n="ltr"){const r=Fp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Ky(t,c);return ej([0,o],[0,l])(u)}function ej(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function tj(t,e){return t>0&&t<e}var bW=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Vp(t,e){const n=Wt(t),r=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),E.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Il(t,e){const n=Wt(e);Ut(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var nj=H2,TW=K2,SW=Z2;const rj=E.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(nj,{ref:r,className:Pe("relative overflow-hidden",t),...n,children:[a.jsx(TW,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(sj,{}),a.jsx(SW,{})]}));rj.displayName=nj.displayName;const sj=E.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(Uw,{ref:r,orientation:e,className:Pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(X2,{className:"relative flex-1 rounded-full bg-border"})}));sj.displayName=Uw.displayName;function Gd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ij={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(u,h){if(!s[u]){if(!r[u]){var f=typeof Gd=="function"&&Gd;if(!h&&f)return f(u,!0);if(l)return l(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var g=s[u]={exports:{}};r[u][0].call(g.exports,function(y){var m=r[u][1][y];return o(m||y)},g,g.exports,n,r,s,i)}return s[u].exports}for(var l=typeof Gd=="function"&&Gd,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,h,f,p,g,y,m,x=[],v=0,w=c.length,_=w,N=i.getTypeOf(c)!=="string";v<c.length;)_=w-v,f=N?(u=c[v++],h=v<w?c[v++]:0,v<w?c[v++]:0):(u=c.charCodeAt(v++),h=v<w?c.charCodeAt(v++):0,v<w?c.charCodeAt(v++):0),p=u>>2,g=(3&u)<<4|h>>4,y=1<_?(15&h)<<2|f>>6:64,m=2<_?63&f:64,x.push(l.charAt(p)+l.charAt(g)+l.charAt(y)+l.charAt(m));return x.join("")},s.decode=function(c){var u,h,f,p,g,y,m=0,x=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var w,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&_--,c.charAt(c.length-2)===l.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=o.uint8array?new Uint8Array(0|_):new Array(0|_);m<c.length;)u=l.indexOf(c.charAt(m++))<<2|(p=l.indexOf(c.charAt(m++)))>>4,h=(15&p)<<4|(g=l.indexOf(c.charAt(m++)))>>2,f=(3&g)<<6|(y=l.indexOf(c.charAt(m++))),w[x++]=u,g!==64&&(w[x++]=h),y!==64&&(w[x++]=f);return w}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(h,f,p,g,y){this.compressedSize=h,this.uncompressedSize=f,this.crc32=p,this.compression=g,this.compressedContent=y}u.prototype={getContentWorker:function(){var h=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,f,p){return h.pipe(new l).pipe(new c("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();r.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(u,h,f,p){var g=o,y=p+f;u^=-1;for(var m=p;m<y;m++)u=u>>>8^g[255&(u^h[m])];return-1^u}(0|c,l,l.length,0):function(u,h,f,p){var g=o,y=p+f;u^=-1;for(var m=p;m<y;m++)u=u>>>8^g[255&(u^h.charCodeAt(m))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function h(f,p){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",l.inherits(h,c),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,f.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new h("Deflate",f)},s.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(g,y){var m,x="";for(m=0;m<y;m++)x+=String.fromCharCode(255&g),g>>>=8;return x}function o(g,y,m,x,v,w){var _,N,C=g.file,L=g.compression,T=w!==u.utf8encode,S=l.transformTo("string",w(C.name)),P=l.transformTo("string",u.utf8encode(C.name)),k=C.comment,M=l.transformTo("string",w(k)),R=l.transformTo("string",u.utf8encode(k)),D=P.length!==C.name.length,I=R.length!==k.length,q="",oe="",Y="",U=C.dir,$=C.date,J={crc32:0,compressedSize:0,uncompressedSize:0};y&&!m||(J.crc32=g.crc32,J.compressedSize=g.compressedSize,J.uncompressedSize=g.uncompressedSize);var B=0;y&&(B|=8),T||!D&&!I||(B|=2048);var K=0,ae=0;U&&(K|=16),v==="UNIX"?(ae=798,K|=function(le,Te){var ye=le;return le||(ye=Te?16893:33204),(65535&ye)<<16}(C.unixPermissions,U)):(ae=20,K|=function(le){return 63&(le||0)}(C.dosPermissions)),_=$.getUTCHours(),_<<=6,_|=$.getUTCMinutes(),_<<=5,_|=$.getUTCSeconds()/2,N=$.getUTCFullYear()-1980,N<<=4,N|=$.getUTCMonth()+1,N<<=5,N|=$.getUTCDate(),D&&(oe=i(1,1)+i(h(S),4)+P,q+="up"+i(oe.length,2)+oe),I&&(Y=i(1,1)+i(h(M),4)+R,q+="uc"+i(Y.length,2)+Y);var ue="";return ue+=`
\0`,ue+=i(B,2),ue+=L.magic,ue+=i(_,2),ue+=i(N,2),ue+=i(J.crc32,4),ue+=i(J.compressedSize,4),ue+=i(J.uncompressedSize,4),ue+=i(S.length,2),ue+=i(q.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ue+S+q,dirRecord:f.CENTRAL_FILE_HEADER+i(ae,2)+ue+i(M.length,2)+"\0\0\0\0"+i(K,4)+i(x,4)+S+q+M}}var l=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),h=n("../crc32"),f=n("../signature");function p(g,y,m,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=m,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(p,c),p.prototype.push=function(g){var y=g.meta.percent||0,m=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:m?(y+100*(m-x-1))/m:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var m=o(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,m=o(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),y)this.push({data:function(x){return f.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var m=this.bytesWritten-g,x=function(v,w,_,N,C){var L=l.transformTo("string",C(N));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(w,4)+i(_,4)+i(L.length,2)+L}(this.dirRecords.length,m,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(m){y.processChunk(m)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(m){y.error(m)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var y=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var m=0;m<y.length;m++)try{y[m].error(g)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(l,c,u){var h=new o(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{l.forEach(function(p,g){f++;var y=function(w,_){var N=w||_,C=i[N];if(!C)throw new Error(N+" is not a valid compression method !");return C}(g.options.compression,c.compression),m=g.options.compressionOptions||c.compressionOptions||{},x=g.dir,v=g.date;g._compressWorker(y,m).withStreamInfo("file",{name:p,dir:x,date:v,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(p){h.error(p)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),l=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function f(p){return new o.Promise(function(g,y){var m=p.decompressed.getContentWorker().pipe(new u);m.on("error",function(x){y(x)}).on("end",function(){m.streamInfo.crc32!==p.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var y=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(m){var x=new c(g);return x.load(m),x}).then(function(m){var x=[o.Promise.resolve(m)],v=m.files;if(g.checkCRC32)for(var w=0;w<v.length;w++)x.push(f(v[w]));return o.Promise.all(x)}).then(function(m){for(var x=m.shift(),v=x.files,w=0;w<v.length;w++){var _=v[w],N=_.fileNameStr,C=i.resolve(_.fileNameStr);y.file(C,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:g.createFolders}),_.dir||(y.file(C).unsafeOriginalName=N)}return x.zipComment.length&&(y.comment=x.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function l(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(l,o),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(l,c,u){i.call(this,c),this._helper=l;var h=this;l.on("data",function(f,p){h.push(f)||h._helper.pause(),u&&u(p)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(C,L,T){var S,P=l.getTypeOf(L),k=l.extend(T||{},h);k.date=k.date||new Date,k.compression!==null&&(k.compression=k.compression.toUpperCase()),typeof k.unixPermissions=="string"&&(k.unixPermissions=parseInt(k.unixPermissions,8)),k.unixPermissions&&16384&k.unixPermissions&&(k.dir=!0),k.dosPermissions&&16&k.dosPermissions&&(k.dir=!0),k.dir&&(C=v(C)),k.createFolders&&(S=x(C))&&w.call(this,S,!0);var M=P==="string"&&k.binary===!1&&k.base64===!1;T&&T.binary!==void 0||(k.binary=!M),(L instanceof f&&L.uncompressedSize===0||k.dir||!L||L.length===0)&&(k.base64=!1,k.binary=!0,L="",k.compression="STORE",P="string");var R=null;R=L instanceof f||L instanceof c?L:y.isNode&&y.isStream(L)?new m(C,L):l.prepareContent(C,L,k.binary,k.optimizedBinaryString,k.base64);var D=new p(C,R,k);this.files[C]=D}var o=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),h=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),y=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),x=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var L=C.lastIndexOf("/");return 0<L?C.substring(0,L):""},v=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,L){return L=L!==void 0?L:h.createFolders,C=v(C),this.files[C]||i.call(this,C,null,{dir:!0,createFolders:L}),this.files[C]};function _(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var L,T,S;for(L in this.files)S=this.files[L],(T=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&C(T,S)},filter:function(C){var L=[];return this.forEach(function(T,S){C(T,S)&&L.push(S)}),L},file:function(C,L,T){if(arguments.length!==1)return C=this.root+C,i.call(this,C,L,T),this;if(_(C)){var S=C;return this.filter(function(k,M){return!M.dir&&S.test(k)})}var P=this.files[this.root+C];return P&&!P.dir?P:null},folder:function(C){if(!C)return this;if(_(C))return this.filter(function(P,k){return k.dir&&C.test(P)});var L=this.root+C,T=w.call(this,L),S=this.clone();return S.root=T.name,S},remove:function(C){C=this.root+C;var L=this.files[C];if(L||(C.slice(-1)!=="/"&&(C+="/"),L=this.files[C]),L&&!L.dir)delete this.files[C];else for(var T=this.filter(function(P,k){return k.name.slice(0,C.length)===C}),S=0;S<T.length;S++)delete this.files[T[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var L,T={};try{if((T=l.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");l.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var S=T.comment||this.comment||"";L=g.generateWorker(this,T,S)}catch(P){(L=new c("error")).error(P)}return new u(L,T.type||"string",T.mimeType)},generateAsync:function(C,L){return this.generateInternalStream(C).accumulate(L)},generateNodeStream:function(C,L){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(L)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),h=l.charCodeAt(2),f=l.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===u&&this.data[p+2]===h&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),h=l.charCodeAt(2),f=l.charCodeAt(3),p=this.readData(4);return c===p[0]&&u===p[1]&&h===p[2]&&f===p[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new h(i.transformTo("uint8array",f)):new l(i.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=i.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),u=n("../support"),h=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(y,m){return new h.Promise(function(x,v){var w=[],_=y._internalType,N=y._outputType,C=y._mimeType;y.on("data",function(L,T){w.push(L),m&&m(T)}).on("error",function(L){w=[],v(L)}).on("end",function(){try{var L=function(T,S,P){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",S),P);case"base64":return c.encode(S);default:return i.transformTo(T,S)}}(N,function(T,S){var P,k=0,M=null,R=0;for(P=0;P<S.length;P++)R+=S[P].length;switch(T){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(M=new Uint8Array(R),P=0;P<S.length;P++)M.set(S[P],k),k+=S[P].length;return M;case"nodebuffer":return Buffer.concat(S);default:throw new Error("concat : unsupported type '"+T+"'")}}(_,w),C);x(L)}catch(T){v(T)}w=[]}).resume()})}function g(y,m,x){var v=m;switch(m){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=m,this._mimeType=x,i.checkSupport(v),this._worker=y.pipe(new o(v)),y.lock()}catch(w){this._worker=new l("error"),this._worker.error(w)}}g.prototype={accumulate:function(y){return p(this,y)},on:function(y,m){var x=this;return y==="data"?this._worker.on(y,function(v){m.call(x,v.data,v.meta)}):this._worker.on(y,function(){i.delay(m,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}s.utf8encode=function(g){return o.nodebuffer?l.newBufferFrom(g,"utf-8"):function(y){var m,x,v,w,_,N=y.length,C=0;for(w=0;w<N;w++)(64512&(x=y.charCodeAt(w)))==55296&&w+1<N&&(64512&(v=y.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(v-56320),w++),C+=x<128?1:x<2048?2:x<65536?3:4;for(m=o.uint8array?new Uint8Array(C):new Array(C),w=_=0;_<C;w++)(64512&(x=y.charCodeAt(w)))==55296&&w+1<N&&(64512&(v=y.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(v-56320),w++),x<128?m[_++]=x:(x<2048?m[_++]=192|x>>>6:(x<65536?m[_++]=224|x>>>12:(m[_++]=240|x>>>18,m[_++]=128|x>>>12&63),m[_++]=128|x>>>6&63),m[_++]=128|63&x);return m}(g)},s.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(y){var m,x,v,w,_=y.length,N=new Array(2*_);for(m=x=0;m<_;)if((v=y[m++])<128)N[x++]=v;else if(4<(w=u[v]))N[x++]=65533,m+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&m<_;)v=v<<6|63&y[m++],w--;1<w?N[x++]=65533:v<65536?N[x++]=v:(v-=65536,N[x++]=55296|v>>10&1023,N[x++]=56320|1023&v)}return N.length!==x&&(N.subarray?N=N.subarray(0,x):N.length=x),i.applyFromCharCode(N)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(f,c),f.prototype.processChunk=function(g){var y=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=y;(y=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),y.set(m,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var x=function(w,_){var N;for((_=_||w.length)>w.length&&(_=w.length),N=_-1;0<=N&&(192&w[N])==128;)N--;return N<0||N===0?_:N+u[w[N]]>_?N:_}(y),v=y;x!==y.length&&(o.uint8array?(v=y.subarray(0,x),this.leftOver=y.subarray(x,y.length)):(v=y.slice(0,x),this.leftOver=y.slice(x,y.length))),this.push({data:s.utf8decode(v),meta:g.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,c),p.prototype.processChunk=function(g){this.push({data:s.utf8encode(g.data),meta:g.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function u(m){return m}function h(m,x){for(var v=0;v<m.length;++v)x[v]=255&m.charCodeAt(v);return x}n("setimmediate"),s.newBlob=function(m,x){s.checkSupport("blob");try{return new Blob([m],{type:x})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(m),v.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(m,x,v){var w=[],_=0,N=m.length;if(N<=v)return String.fromCharCode.apply(null,m);for(;_<N;)x==="array"||x==="nodebuffer"?w.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+v,N)))):w.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+v,N)))),_+=v;return w.join("")},stringifyByChar:function(m){for(var x="",v=0;v<m.length;v++)x+=String.fromCharCode(m[v]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function p(m){var x=65536,v=s.getTypeOf(m),w=!0;if(v==="uint8array"?w=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<x;)try{return f.stringifyByChunk(m,v,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(m)}function g(m,x){for(var v=0;v<m.length;v++)x[v]=m[v];return x}s.applyFromCharCode=p;var y={};y.string={string:u,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return y.string.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:function(m){return h(m,l.allocBuffer(m.length))}},y.array={string:p,array:u,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(m)}},y.arraybuffer={string:function(m){return p(new Uint8Array(m))},array:function(m){return g(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:u,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return l.newBufferFrom(new Uint8Array(m))}},y.uint8array={string:p,array:function(m){return g(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:u,nodebuffer:function(m){return l.newBufferFrom(m)}},y.nodebuffer={string:p,array:function(m){return g(m,new Array(m.length))},arraybuffer:function(m){return y.nodebuffer.uint8array(m).buffer},uint8array:function(m){return g(m,new Uint8Array(m.length))},nodebuffer:u},s.transformTo=function(m,x){if(x=x||"",!m)return x;s.checkSupport(m);var v=s.getTypeOf(x);return y[v][m](x)},s.resolve=function(m){for(var x=m.split("/"),v=[],w=0;w<x.length;w++){var _=x[w];_==="."||_===""&&w!==0&&w!==x.length-1||(_===".."?v.pop():v.push(_))}return v.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var x,v,w="";for(v=0;v<(m||"").length;v++)w+="\\x"+((x=m.charCodeAt(v))<16?"0":"")+x.toString(16).toUpperCase();return w},s.delay=function(m,x,v){setImmediate(function(){m.apply(v||null,x||[])})},s.inherits=function(m,x){function v(){}v.prototype=x.prototype,m.prototype=new v},s.extend=function(){var m,x,v={};for(m=0;m<arguments.length;m++)for(x in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],x)&&v[x]===void 0&&(v[x]=arguments[m][x]);return v},s.prepareContent=function(m,x,v,w,_){return c.Promise.resolve(x).then(function(N){return i.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new c.Promise(function(C,L){var T=new FileReader;T.onload=function(S){C(S.target.result)},T.onerror=function(S){L(S.target.error)},T.readAsArrayBuffer(N)}):N}).then(function(N){var C=s.getTypeOf(N);return C?(C==="arraybuffer"?N=s.transformTo("uint8array",N):C==="string"&&(_?N=o.decode(N):v&&w!==!0&&(N=function(L){return h(L,i.uint8array?new Uint8Array(L.length):new Array(L.length))}(N))),N):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./signature"),c=n("./zipEntry"),u=n("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var g=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===p;return this.reader.setIndex(g),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",g=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,g,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var y=p-g;if(0<y)this.isSignature(p,l.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),h=n("./compressions"),f=n("./support");function p(g,y){this.options=g,this.loadOptions=y}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var y,m;if(g.skip(22),this.fileNameLength=g.readInt(2),m=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(x){for(var v in h)if(Object.prototype.hasOwnProperty.call(h,v)&&h[v].magic===x)return h[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,y,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var y=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(y),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var y,m,x,v=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<v;)y=g.readInt(2),m=g.readInt(2),x=g.readData(m),this.extraFields[y]={id:y,length:m,value:x};g.setIndex(v)},handleUTF8:function(){var g=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var m=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var v=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var y=i(g.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var y=i(g.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(y,m,x){this.name=y,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=m,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),h=n("./stream/GenericWorker");i.prototype={internalStream:function(y){var m=null,x="string";try{if(!y)throw new Error("No output type specified.");var v=(x=y.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),m=this._decompressWorker();var w=!this._dataBinary;w&&!v&&(m=m.pipe(new c.Utf8EncodeWorker)),!w&&v&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(_){(m=new h("error")).error(_)}return new o(m,x,"")},async:function(y,m){return this.internalStream(y).accumulate(m)},nodeStream:function(y,m){return this.internalStream(y||"nodebuffer").toNodejsStream(m)},_compressWorker:function(y,m){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(x,y,m)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<f.length;g++)i.prototype[f[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,h=new c(y),f=i.document.createTextNode("");h.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){y(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(y,0)};else{var p=new i.MessageChannel;p.port1.onmessage=y,o=function(){p.port2.postMessage(0)}}var g=[];function y(){var m,x;l=!0;for(var v=g.length;v;){for(x=g,g=[],m=-1;++m<v;)x[m]();v=g.length}l=!1}r.exports=function(m){g.push(m)!==1||l||o()}}).call(this,typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var l={},c=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,v!==o&&m(this,v)}function p(v,w,_){this.promise=v,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function g(v,w,_){i(function(){var N;try{N=w(_)}catch(C){return l.reject(v,C)}N===v?l.reject(v,new TypeError("Cannot resolve promise with itself")):l.resolve(v,N)})}function y(v){var w=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof w=="function")return function(){w.apply(v,arguments)}}function m(v,w){var _=!1;function N(T){_||(_=!0,l.reject(v,T))}function C(T){_||(_=!0,l.resolve(v,T))}var L=x(function(){w(C,N)});L.status==="error"&&N(L.value)}function x(v,w){var _={};try{_.value=v(w),_.status="success"}catch(N){_.status="error",_.value=N}return _}(r.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var w=this.constructor;return this.then(function(_){return w.resolve(v()).then(function(){return _})},function(_){return w.resolve(v()).then(function(){throw _})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,w){if(typeof v!="function"&&this.state===u||typeof w!="function"&&this.state===c)return this;var _=new this.constructor(o);return this.state!==h?g(_,this.state===u?v:w,this.outcome):this.queue.push(new p(_,v,w)),_},p.prototype.callFulfilled=function(v){l.resolve(this.promise,v)},p.prototype.otherCallFulfilled=function(v){g(this.promise,this.onFulfilled,v)},p.prototype.callRejected=function(v){l.reject(this.promise,v)},p.prototype.otherCallRejected=function(v){g(this.promise,this.onRejected,v)},l.resolve=function(v,w){var _=x(y,w);if(_.status==="error")return l.reject(v,_.value);var N=_.value;if(N)m(v,N);else{v.state=u,v.outcome=w;for(var C=-1,L=v.queue.length;++C<L;)v.queue[C].callFulfilled(w)}return v},l.reject=function(v,w){v.state=c,v.outcome=w;for(var _=-1,N=v.queue.length;++_<N;)v.queue[_].callRejected(w);return v},f.resolve=function(v){return v instanceof this?v:l.resolve(new this(o),v)},f.reject=function(v){var w=new this(o);return l.reject(w,v)},f.all=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,N=!1;if(!_)return this.resolve([]);for(var C=new Array(_),L=0,T=-1,S=new this(o);++T<_;)P(v[T],T);return S;function P(k,M){w.resolve(k).then(function(R){C[M]=R,++L!==_||N||(N=!0,l.resolve(S,C))},function(R){N||(N=!0,l.reject(S,R))})}},f.race=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,N=!1;if(!_)return this.resolve([]);for(var C=-1,L=new this(o);++C<_;)T=v[C],w.resolve(T).then(function(S){N||(N=!0,l.resolve(L,S))},function(S){N||(N=!0,l.reject(L,S))});var T;return L}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),h=Object.prototype.toString,f=0,p=-1,g=0,y=8;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({level:p,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},v||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(_!==f)throw new Error(c[_]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var N;if(N=typeof w.dictionary=="string"?l.string2buf(w.dictionary):h.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(_=i.deflateSetDictionary(this.strm,N))!==f)throw new Error(c[_]);this._dict_set=!0}}function x(v,w){var _=new m(w);if(_.push(v,!0),_.err)throw _.msg||c[_.err];return _.result}m.prototype.push=function(v,w){var _,N,C=this.strm,L=this.options.chunkSize;if(this.ended)return!1;N=w===~~w?w:w===!0?4:0,typeof v=="string"?C.input=l.string2buf(v):h.call(v)==="[object ArrayBuffer]"?C.input=new Uint8Array(v):C.input=v,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(L),C.next_out=0,C.avail_out=L),(_=i.deflate(C,N))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(C.output,C.next_out))):this.onData(o.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&_!==1);return N===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):N!==2||(this.onEnd(f),!(C.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=m,s.deflate=x,s.deflateRaw=function(v,w){return(w=w||{}).raw=!0,x(v,w)},s.gzip=function(v,w){return(w=w||{}).gzip=!0,x(v,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),h=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function g(m){if(!(this instanceof g))return new g(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||m&&m.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,x.windowBits);if(v!==c.Z_OK)throw new Error(u[v]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function y(m,x){var v=new g(x);if(v.push(m,!0),v.err)throw v.msg||u[v.err];return v.result}g.prototype.push=function(m,x){var v,w,_,N,C,L,T=this.strm,S=this.options.chunkSize,P=this.options.dictionary,k=!1;if(this.ended)return!1;w=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?T.input=l.binstring2buf(m):p.call(m)==="[object ArrayBuffer]"?T.input=new Uint8Array(m):T.input=m,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(S),T.next_out=0,T.avail_out=S),(v=i.inflate(T,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&P&&(L=typeof P=="string"?l.string2buf(P):p.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,v=i.inflateSetDictionary(this.strm,L)),v===c.Z_BUF_ERROR&&k===!0&&(v=c.Z_OK,k=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&v!==c.Z_STREAM_END&&(T.avail_in!==0||w!==c.Z_FINISH&&w!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=l.utf8border(T.output,T.next_out),N=T.next_out-_,C=l.buf2string(T.output,_),T.next_out=N,T.avail_out=S-N,N&&o.arraySet(T.output,T.output,_,N,0),this.onData(C)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(k=!0)}while((0<T.avail_in||T.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(w=c.Z_FINISH),w===c.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):w!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(T.avail_out=0))},g.prototype.onData=function(m){this.chunks.push(m)},g.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=g,s.inflate=y,s.inflateRaw=function(m,x){return(x=x||{}).raw=!0,y(m,x)},s.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,h,f,p){if(u.subarray&&c.subarray)c.set(u.subarray(h,h+f),p);else for(var g=0;g<f;g++)c[p+g]=u[h+g]},flattenChunks:function(c){var u,h,f,p,g,y;for(u=f=0,h=c.length;u<h;u++)f+=c[u].length;for(y=new Uint8Array(f),u=p=0,h=c.length;u<h;u++)g=c[u],y.set(g,p),p+=g.length;return y}},l={arraySet:function(c,u,h,f,p){for(var g=0;g<f;g++)c[p+g]=u[h+g]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(f,p){if(p<65537&&(f.subarray&&l||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var g="",y=0;y<p;y++)g+=String.fromCharCode(f[y]);return g}c[254]=c[254]=1,s.string2buf=function(f){var p,g,y,m,x,v=f.length,w=0;for(m=0;m<v;m++)(64512&(g=f.charCodeAt(m)))==55296&&m+1<v&&(64512&(y=f.charCodeAt(m+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),m++),w+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(w),m=x=0;x<w;m++)(64512&(g=f.charCodeAt(m)))==55296&&m+1<v&&(64512&(y=f.charCodeAt(m+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),m++),g<128?p[x++]=g:(g<2048?p[x++]=192|g>>>6:(g<65536?p[x++]=224|g>>>12:(p[x++]=240|g>>>18,p[x++]=128|g>>>12&63),p[x++]=128|g>>>6&63),p[x++]=128|63&g);return p},s.buf2binstring=function(f){return h(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),g=0,y=p.length;g<y;g++)p[g]=f.charCodeAt(g);return p},s.buf2string=function(f,p){var g,y,m,x,v=p||f.length,w=new Array(2*v);for(g=y=0;g<v;)if((m=f[g++])<128)w[y++]=m;else if(4<(x=c[m]))w[y++]=65533,g+=x-1;else{for(m&=x===2?31:x===3?15:7;1<x&&g<v;)m=m<<6|63&f[g++],x--;1<x?w[y++]=65533:m<65536?w[y++]=m:(m-=65536,w[y++]=55296|m>>10&1023,w[y++]=56320|1023&m)}return h(w,y)},s.utf8border=function(f,p){var g;for((p=p||f.length)>f.length&&(p=f.length),g=p-1;0<=g&&(192&f[g])==128;)g--;return g<0||g===0?p:g+c[f[g]]>p?g:p}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,l,c){for(var u=65535&i|0,h=i>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;h=h+(u=u+o[c++]|0)|0,--f;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l,c,u){var h=i,f=u+c;o^=-1;for(var p=u;p<f;p++)o=o>>>8^h[255&(o^l[p])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),l=n("./trees"),c=n("./adler32"),u=n("./crc32"),h=n("./messages"),f=0,p=4,g=0,y=-2,m=-1,x=4,v=2,w=8,_=9,N=286,C=30,L=19,T=2*N+1,S=15,P=3,k=258,M=k+P+1,R=42,D=113,I=1,q=2,oe=3,Y=4;function U(j,re){return j.msg=h[re],re}function $(j){return(j<<1)-(4<j?9:0)}function J(j){for(var re=j.length;0<=--re;)j[re]=0}function B(j){var re=j.state,W=re.pending;W>j.avail_out&&(W=j.avail_out),W!==0&&(o.arraySet(j.output,re.pending_buf,re.pending_out,W,j.next_out),j.next_out+=W,re.pending_out+=W,j.total_out+=W,j.avail_out-=W,re.pending-=W,re.pending===0&&(re.pending_out=0))}function K(j,re){l._tr_flush_block(j,0<=j.block_start?j.block_start:-1,j.strstart-j.block_start,re),j.block_start=j.strstart,B(j.strm)}function ae(j,re){j.pending_buf[j.pending++]=re}function ue(j,re){j.pending_buf[j.pending++]=re>>>8&255,j.pending_buf[j.pending++]=255&re}function le(j,re){var W,V,O=j.max_chain_length,H=j.strstart,ee=j.prev_length,se=j.nice_match,z=j.strstart>j.w_size-M?j.strstart-(j.w_size-M):0,te=j.window,pe=j.w_mask,Z=j.prev,me=j.strstart+k,G=te[H+ee-1],he=te[H+ee];j.prev_length>=j.good_match&&(O>>=2),se>j.lookahead&&(se=j.lookahead);do if(te[(W=re)+ee]===he&&te[W+ee-1]===G&&te[W]===te[H]&&te[++W]===te[H+1]){H+=2,W++;do;while(te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&te[++H]===te[++W]&&H<me);if(V=k-(me-H),H=me-k,ee<V){if(j.match_start=re,se<=(ee=V))break;G=te[H+ee-1],he=te[H+ee]}}while((re=Z[re&pe])>z&&--O!=0);return ee<=j.lookahead?ee:j.lookahead}function Te(j){var re,W,V,O,H,ee,se,z,te,pe,Z=j.w_size;do{if(O=j.window_size-j.lookahead-j.strstart,j.strstart>=Z+(Z-M)){for(o.arraySet(j.window,j.window,Z,Z,0),j.match_start-=Z,j.strstart-=Z,j.block_start-=Z,re=W=j.hash_size;V=j.head[--re],j.head[re]=Z<=V?V-Z:0,--W;);for(re=W=Z;V=j.prev[--re],j.prev[re]=Z<=V?V-Z:0,--W;);O+=Z}if(j.strm.avail_in===0)break;if(ee=j.strm,se=j.window,z=j.strstart+j.lookahead,te=O,pe=void 0,pe=ee.avail_in,te<pe&&(pe=te),W=pe===0?0:(ee.avail_in-=pe,o.arraySet(se,ee.input,ee.next_in,pe,z),ee.state.wrap===1?ee.adler=c(ee.adler,se,pe,z):ee.state.wrap===2&&(ee.adler=u(ee.adler,se,pe,z)),ee.next_in+=pe,ee.total_in+=pe,pe),j.lookahead+=W,j.lookahead+j.insert>=P)for(H=j.strstart-j.insert,j.ins_h=j.window[H],j.ins_h=(j.ins_h<<j.hash_shift^j.window[H+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[H+P-1])&j.hash_mask,j.prev[H&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=H,H++,j.insert--,!(j.lookahead+j.insert<P)););}while(j.lookahead<M&&j.strm.avail_in!==0)}function ye(j,re){for(var W,V;;){if(j.lookahead<M){if(Te(j),j.lookahead<M&&re===f)return I;if(j.lookahead===0)break}if(W=0,j.lookahead>=P&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+P-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),W!==0&&j.strstart-W<=j.w_size-M&&(j.match_length=le(j,W)),j.match_length>=P)if(V=l._tr_tally(j,j.strstart-j.match_start,j.match_length-P),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=P){for(j.match_length--;j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+P-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart,--j.match_length!=0;);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else V=l._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(V&&(K(j,!1),j.strm.avail_out===0))return I}return j.insert=j.strstart<P-1?j.strstart:P-1,re===p?(K(j,!0),j.strm.avail_out===0?oe:Y):j.last_lit&&(K(j,!1),j.strm.avail_out===0)?I:q}function de(j,re){for(var W,V,O;;){if(j.lookahead<M){if(Te(j),j.lookahead<M&&re===f)return I;if(j.lookahead===0)break}if(W=0,j.lookahead>=P&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+P-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=P-1,W!==0&&j.prev_length<j.max_lazy_match&&j.strstart-W<=j.w_size-M&&(j.match_length=le(j,W),j.match_length<=5&&(j.strategy===1||j.match_length===P&&4096<j.strstart-j.match_start)&&(j.match_length=P-1)),j.prev_length>=P&&j.match_length<=j.prev_length){for(O=j.strstart+j.lookahead-P,V=l._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-P),j.lookahead-=j.prev_length-1,j.prev_length-=2;++j.strstart<=O&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+P-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),--j.prev_length!=0;);if(j.match_available=0,j.match_length=P-1,j.strstart++,V&&(K(j,!1),j.strm.avail_out===0))return I}else if(j.match_available){if((V=l._tr_tally(j,0,j.window[j.strstart-1]))&&K(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return I}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(V=l._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<P-1?j.strstart:P-1,re===p?(K(j,!0),j.strm.avail_out===0?oe:Y):j.last_lit&&(K(j,!1),j.strm.avail_out===0)?I:q}function Ee(j,re,W,V,O){this.good_length=j,this.max_lazy=re,this.nice_length=W,this.max_chain=V,this.func=O}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*C+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(S+1),this.heap=new o.Buf16(2*N+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ie(j){var re;return j&&j.state?(j.total_in=j.total_out=0,j.data_type=v,(re=j.state).pending=0,re.pending_out=0,re.wrap<0&&(re.wrap=-re.wrap),re.status=re.wrap?R:D,j.adler=re.wrap===2?0:1,re.last_flush=f,l._tr_init(re),g):U(j,y)}function Re(j){var re=Ie(j);return re===g&&function(W){W.window_size=2*W.w_size,J(W.head),W.max_lazy_match=i[W.level].max_lazy,W.good_match=i[W.level].good_length,W.nice_match=i[W.level].nice_length,W.max_chain_length=i[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=P-1,W.match_available=0,W.ins_h=0}(j.state),re}function Be(j,re,W,V,O,H){if(!j)return y;var ee=1;if(re===m&&(re=6),V<0?(ee=0,V=-V):15<V&&(ee=2,V-=16),O<1||_<O||W!==w||V<8||15<V||re<0||9<re||H<0||x<H)return U(j,y);V===8&&(V=9);var se=new Ne;return(j.state=se).strm=j,se.wrap=ee,se.gzhead=null,se.w_bits=V,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=O+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+P-1)/P),se.window=new o.Buf8(2*se.w_size),se.head=new o.Buf16(se.hash_size),se.prev=new o.Buf16(se.w_size),se.lit_bufsize=1<<O+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new o.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=re,se.strategy=H,se.method=W,Re(j)}i=[new Ee(0,0,0,0,function(j,re){var W=65535;for(W>j.pending_buf_size-5&&(W=j.pending_buf_size-5);;){if(j.lookahead<=1){if(Te(j),j.lookahead===0&&re===f)return I;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var V=j.block_start+W;if((j.strstart===0||j.strstart>=V)&&(j.lookahead=j.strstart-V,j.strstart=V,K(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-M&&(K(j,!1),j.strm.avail_out===0))return I}return j.insert=0,re===p?(K(j,!0),j.strm.avail_out===0?oe:Y):(j.strstart>j.block_start&&(K(j,!1),j.strm.avail_out),I)}),new Ee(4,4,8,4,ye),new Ee(4,5,16,8,ye),new Ee(4,6,32,32,ye),new Ee(4,4,16,16,de),new Ee(8,16,32,32,de),new Ee(8,16,128,128,de),new Ee(8,32,128,256,de),new Ee(32,128,258,1024,de),new Ee(32,258,258,4096,de)],s.deflateInit=function(j,re){return Be(j,re,w,15,8,0)},s.deflateInit2=Be,s.deflateReset=Re,s.deflateResetKeep=Ie,s.deflateSetHeader=function(j,re){return j&&j.state?j.state.wrap!==2?y:(j.state.gzhead=re,g):y},s.deflate=function(j,re){var W,V,O,H;if(!j||!j.state||5<re||re<0)return j?U(j,y):y;if(V=j.state,!j.output||!j.input&&j.avail_in!==0||V.status===666&&re!==p)return U(j,j.avail_out===0?-5:y);if(V.strm=j,W=V.last_flush,V.last_flush=re,V.status===R)if(V.wrap===2)j.adler=0,ae(V,31),ae(V,139),ae(V,8),V.gzhead?(ae(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),ae(V,255&V.gzhead.time),ae(V,V.gzhead.time>>8&255),ae(V,V.gzhead.time>>16&255),ae(V,V.gzhead.time>>24&255),ae(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),ae(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(ae(V,255&V.gzhead.extra.length),ae(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(j.adler=u(j.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(ae(V,0),ae(V,0),ae(V,0),ae(V,0),ae(V,0),ae(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),ae(V,3),V.status=D);else{var ee=w+(V.w_bits-8<<4)<<8;ee|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(ee|=32),ee+=31-ee%31,V.status=D,ue(V,ee),V.strstart!==0&&(ue(V,j.adler>>>16),ue(V,65535&j.adler)),j.adler=1}if(V.status===69)if(V.gzhead.extra){for(O=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),B(j),O=V.pending,V.pending!==V.pending_buf_size));)ae(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){O=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),B(j),O=V.pending,V.pending===V.pending_buf_size)){H=1;break}H=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,ae(V,H)}while(H!==0);V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),H===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){O=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),B(j),O=V.pending,V.pending===V.pending_buf_size)){H=1;break}H=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,ae(V,H)}while(H!==0);V.gzhead.hcrc&&V.pending>O&&(j.adler=u(j.adler,V.pending_buf,V.pending-O,O)),H===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&B(j),V.pending+2<=V.pending_buf_size&&(ae(V,255&j.adler),ae(V,j.adler>>8&255),j.adler=0,V.status=D)):V.status=D),V.pending!==0){if(B(j),j.avail_out===0)return V.last_flush=-1,g}else if(j.avail_in===0&&$(re)<=$(W)&&re!==p)return U(j,-5);if(V.status===666&&j.avail_in!==0)return U(j,-5);if(j.avail_in!==0||V.lookahead!==0||re!==f&&V.status!==666){var se=V.strategy===2?function(z,te){for(var pe;;){if(z.lookahead===0&&(Te(z),z.lookahead===0)){if(te===f)return I;break}if(z.match_length=0,pe=l._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,pe&&(K(z,!1),z.strm.avail_out===0))return I}return z.insert=0,te===p?(K(z,!0),z.strm.avail_out===0?oe:Y):z.last_lit&&(K(z,!1),z.strm.avail_out===0)?I:q}(V,re):V.strategy===3?function(z,te){for(var pe,Z,me,G,he=z.window;;){if(z.lookahead<=k){if(Te(z),z.lookahead<=k&&te===f)return I;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=P&&0<z.strstart&&(Z=he[me=z.strstart-1])===he[++me]&&Z===he[++me]&&Z===he[++me]){G=z.strstart+k;do;while(Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&Z===he[++me]&&me<G);z.match_length=k-(G-me),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=P?(pe=l._tr_tally(z,1,z.match_length-P),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(pe=l._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),pe&&(K(z,!1),z.strm.avail_out===0))return I}return z.insert=0,te===p?(K(z,!0),z.strm.avail_out===0?oe:Y):z.last_lit&&(K(z,!1),z.strm.avail_out===0)?I:q}(V,re):i[V.level].func(V,re);if(se!==oe&&se!==Y||(V.status=666),se===I||se===oe)return j.avail_out===0&&(V.last_flush=-1),g;if(se===q&&(re===1?l._tr_align(V):re!==5&&(l._tr_stored_block(V,0,0,!1),re===3&&(J(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),B(j),j.avail_out===0))return V.last_flush=-1,g}return re!==p?g:V.wrap<=0?1:(V.wrap===2?(ae(V,255&j.adler),ae(V,j.adler>>8&255),ae(V,j.adler>>16&255),ae(V,j.adler>>24&255),ae(V,255&j.total_in),ae(V,j.total_in>>8&255),ae(V,j.total_in>>16&255),ae(V,j.total_in>>24&255)):(ue(V,j.adler>>>16),ue(V,65535&j.adler)),B(j),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?g:1)},s.deflateEnd=function(j){var re;return j&&j.state?(re=j.state.status)!==R&&re!==69&&re!==73&&re!==91&&re!==103&&re!==D&&re!==666?U(j,y):(j.state=null,re===D?U(j,-3):g):y},s.deflateSetDictionary=function(j,re){var W,V,O,H,ee,se,z,te,pe=re.length;if(!j||!j.state||(H=(W=j.state).wrap)===2||H===1&&W.status!==R||W.lookahead)return y;for(H===1&&(j.adler=c(j.adler,re,pe,0)),W.wrap=0,pe>=W.w_size&&(H===0&&(J(W.head),W.strstart=0,W.block_start=0,W.insert=0),te=new o.Buf8(W.w_size),o.arraySet(te,re,pe-W.w_size,W.w_size,0),re=te,pe=W.w_size),ee=j.avail_in,se=j.next_in,z=j.input,j.avail_in=pe,j.next_in=0,j.input=re,Te(W);W.lookahead>=P;){for(V=W.strstart,O=W.lookahead-(P-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[V+P-1])&W.hash_mask,W.prev[V&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=V,V++,--O;);W.strstart=V,W.lookahead=P-1,Te(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=P-1,W.match_available=0,j.next_in=se,j.input=z,j.avail_in=ee,W.wrap=H,g},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var l,c,u,h,f,p,g,y,m,x,v,w,_,N,C,L,T,S,P,k,M,R,D,I,q;l=i.state,c=i.next_in,I=i.input,u=c+(i.avail_in-5),h=i.next_out,q=i.output,f=h-(o-i.avail_out),p=h+(i.avail_out-257),g=l.dmax,y=l.wsize,m=l.whave,x=l.wnext,v=l.window,w=l.hold,_=l.bits,N=l.lencode,C=l.distcode,L=(1<<l.lenbits)-1,T=(1<<l.distbits)-1;e:do{_<15&&(w+=I[c++]<<_,_+=8,w+=I[c++]<<_,_+=8),S=N[w&L];t:for(;;){if(w>>>=P=S>>>24,_-=P,(P=S>>>16&255)===0)q[h++]=65535&S;else{if(!(16&P)){if(!(64&P)){S=N[(65535&S)+(w&(1<<P)-1)];continue t}if(32&P){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}k=65535&S,(P&=15)&&(_<P&&(w+=I[c++]<<_,_+=8),k+=w&(1<<P)-1,w>>>=P,_-=P),_<15&&(w+=I[c++]<<_,_+=8,w+=I[c++]<<_,_+=8),S=C[w&T];n:for(;;){if(w>>>=P=S>>>24,_-=P,!(16&(P=S>>>16&255))){if(!(64&P)){S=C[(65535&S)+(w&(1<<P)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(M=65535&S,_<(P&=15)&&(w+=I[c++]<<_,(_+=8)<P&&(w+=I[c++]<<_,_+=8)),g<(M+=w&(1<<P)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(w>>>=P,_-=P,(P=h-f)<M){if(m<(P=M-P)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(D=v,(R=0)===x){if(R+=y-P,P<k){for(k-=P;q[h++]=v[R++],--P;);R=h-M,D=q}}else if(x<P){if(R+=y+x-P,(P-=x)<k){for(k-=P;q[h++]=v[R++],--P;);if(R=0,x<k){for(k-=P=x;q[h++]=v[R++],--P;);R=h-M,D=q}}}else if(R+=x-P,P<k){for(k-=P;q[h++]=v[R++],--P;);R=h-M,D=q}for(;2<k;)q[h++]=D[R++],q[h++]=D[R++],q[h++]=D[R++],k-=3;k&&(q[h++]=D[R++],1<k&&(q[h++]=D[R++]))}else{for(R=h-M;q[h++]=q[R++],q[h++]=q[R++],q[h++]=q[R++],2<(k-=3););k&&(q[h++]=q[R++],1<k&&(q[h++]=q[R++]))}break}}break}}while(c<u&&h<p);c-=k=_>>3,w&=(1<<(_-=k<<3))-1,i.next_in=c,i.next_out=h,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=h<p?p-h+257:257-(h-p),l.hold=w,l.bits=_}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),l=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),h=1,f=2,p=0,g=-2,y=1,m=852,x=592;function v(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(R){var D;return R&&R.state?(D=R.state,R.total_in=R.total_out=D.total=0,R.msg="",D.wrap&&(R.adler=1&D.wrap),D.mode=y,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(m),D.distcode=D.distdyn=new i.Buf32(x),D.sane=1,D.back=-1,p):g}function N(R){var D;return R&&R.state?((D=R.state).wsize=0,D.whave=0,D.wnext=0,_(R)):g}function C(R,D){var I,q;return R&&R.state?(q=R.state,D<0?(I=0,D=-D):(I=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?g:(q.window!==null&&q.wbits!==D&&(q.window=null),q.wrap=I,q.wbits=D,N(R))):g}function L(R,D){var I,q;return R?(q=new w,(R.state=q).window=null,(I=C(R,D))!==p&&(R.state=null),I):g}var T,S,P=!0;function k(R){if(P){var D;for(T=new i.Buf32(512),S=new i.Buf32(32),D=0;D<144;)R.lens[D++]=8;for(;D<256;)R.lens[D++]=9;for(;D<280;)R.lens[D++]=7;for(;D<288;)R.lens[D++]=8;for(u(h,R.lens,0,288,T,0,R.work,{bits:9}),D=0;D<32;)R.lens[D++]=5;u(f,R.lens,0,32,S,0,R.work,{bits:5}),P=!1}R.lencode=T,R.lenbits=9,R.distcode=S,R.distbits=5}function M(R,D,I,q){var oe,Y=R.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new i.Buf8(Y.wsize)),q>=Y.wsize?(i.arraySet(Y.window,D,I-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(q<(oe=Y.wsize-Y.wnext)&&(oe=q),i.arraySet(Y.window,D,I-q,oe,Y.wnext),(q-=oe)?(i.arraySet(Y.window,D,I-q,q,0),Y.wnext=q,Y.whave=Y.wsize):(Y.wnext+=oe,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=oe))),0}s.inflateReset=N,s.inflateReset2=C,s.inflateResetKeep=_,s.inflateInit=function(R){return L(R,15)},s.inflateInit2=L,s.inflate=function(R,D){var I,q,oe,Y,U,$,J,B,K,ae,ue,le,Te,ye,de,Ee,Ne,Ie,Re,Be,j,re,W,V,O=0,H=new i.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return g;(I=R.state).mode===12&&(I.mode=13),U=R.next_out,oe=R.output,J=R.avail_out,Y=R.next_in,q=R.input,$=R.avail_in,B=I.hold,K=I.bits,ae=$,ue=J,re=p;e:for(;;)switch(I.mode){case y:if(I.wrap===0){I.mode=13;break}for(;K<16;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(2&I.wrap&&B===35615){H[I.check=0]=255&B,H[1]=B>>>8&255,I.check=l(I.check,H,2,0),K=B=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&B)<<8)+(B>>8))%31){R.msg="incorrect header check",I.mode=30;break}if((15&B)!=8){R.msg="unknown compression method",I.mode=30;break}if(K-=4,j=8+(15&(B>>>=4)),I.wbits===0)I.wbits=j;else if(j>I.wbits){R.msg="invalid window size",I.mode=30;break}I.dmax=1<<j,R.adler=I.check=1,I.mode=512&B?10:12,K=B=0;break;case 2:for(;K<16;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(I.flags=B,(255&I.flags)!=8){R.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){R.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=B>>8&1),512&I.flags&&(H[0]=255&B,H[1]=B>>>8&255,I.check=l(I.check,H,2,0)),K=B=0,I.mode=3;case 3:for(;K<32;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.head&&(I.head.time=B),512&I.flags&&(H[0]=255&B,H[1]=B>>>8&255,H[2]=B>>>16&255,H[3]=B>>>24&255,I.check=l(I.check,H,4,0)),K=B=0,I.mode=4;case 4:for(;K<16;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.head&&(I.head.xflags=255&B,I.head.os=B>>8),512&I.flags&&(H[0]=255&B,H[1]=B>>>8&255,I.check=l(I.check,H,2,0)),K=B=0,I.mode=5;case 5:if(1024&I.flags){for(;K<16;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.length=B,I.head&&(I.head.extra_len=B),512&I.flags&&(H[0]=255&B,H[1]=B>>>8&255,I.check=l(I.check,H,2,0)),K=B=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&($<(le=I.length)&&(le=$),le&&(I.head&&(j=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),i.arraySet(I.head.extra,q,Y,le,j)),512&I.flags&&(I.check=l(I.check,q,le,Y)),$-=le,Y+=le,I.length-=le),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if($===0)break e;for(le=0;j=q[Y+le++],I.head&&j&&I.length<65536&&(I.head.name+=String.fromCharCode(j)),j&&le<$;);if(512&I.flags&&(I.check=l(I.check,q,le,Y)),$-=le,Y+=le,j)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if($===0)break e;for(le=0;j=q[Y+le++],I.head&&j&&I.length<65536&&(I.head.comment+=String.fromCharCode(j)),j&&le<$;);if(512&I.flags&&(I.check=l(I.check,q,le,Y)),$-=le,Y+=le,j)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;K<16;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(B!==(65535&I.check)){R.msg="header crc mismatch",I.mode=30;break}K=B=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),R.adler=I.check=0,I.mode=12;break;case 10:for(;K<32;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}R.adler=I.check=v(B),K=B=0,I.mode=11;case 11:if(I.havedict===0)return R.next_out=U,R.avail_out=J,R.next_in=Y,R.avail_in=$,I.hold=B,I.bits=K,2;R.adler=I.check=1,I.mode=12;case 12:if(D===5||D===6)break e;case 13:if(I.last){B>>>=7&K,K-=7&K,I.mode=27;break}for(;K<3;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}switch(I.last=1&B,K-=1,3&(B>>>=1)){case 0:I.mode=14;break;case 1:if(k(I),I.mode=20,D!==6)break;B>>>=2,K-=2;break e;case 2:I.mode=17;break;case 3:R.msg="invalid block type",I.mode=30}B>>>=2,K-=2;break;case 14:for(B>>>=7&K,K-=7&K;K<32;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if((65535&B)!=(B>>>16^65535)){R.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&B,K=B=0,I.mode=15,D===6)break e;case 15:I.mode=16;case 16:if(le=I.length){if($<le&&(le=$),J<le&&(le=J),le===0)break e;i.arraySet(oe,q,Y,le,U),$-=le,Y+=le,J-=le,U+=le,I.length-=le;break}I.mode=12;break;case 17:for(;K<14;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(I.nlen=257+(31&B),B>>>=5,K-=5,I.ndist=1+(31&B),B>>>=5,K-=5,I.ncode=4+(15&B),B>>>=4,K-=4,286<I.nlen||30<I.ndist){R.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;K<3;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.lens[ee[I.have++]]=7&B,B>>>=3,K-=3}for(;I.have<19;)I.lens[ee[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,W={bits:I.lenbits},re=u(0,I.lens,0,19,I.lencode,0,I.work,W),I.lenbits=W.bits,re){R.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;Ee=(O=I.lencode[B&(1<<I.lenbits)-1])>>>16&255,Ne=65535&O,!((de=O>>>24)<=K);){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(Ne<16)B>>>=de,K-=de,I.lens[I.have++]=Ne;else{if(Ne===16){for(V=de+2;K<V;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(B>>>=de,K-=de,I.have===0){R.msg="invalid bit length repeat",I.mode=30;break}j=I.lens[I.have-1],le=3+(3&B),B>>>=2,K-=2}else if(Ne===17){for(V=de+3;K<V;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}K-=de,j=0,le=3+(7&(B>>>=de)),B>>>=3,K-=3}else{for(V=de+7;K<V;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}K-=de,j=0,le=11+(127&(B>>>=de)),B>>>=7,K-=7}if(I.have+le>I.nlen+I.ndist){R.msg="invalid bit length repeat",I.mode=30;break}for(;le--;)I.lens[I.have++]=j}}if(I.mode===30)break;if(I.lens[256]===0){R.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,W={bits:I.lenbits},re=u(h,I.lens,0,I.nlen,I.lencode,0,I.work,W),I.lenbits=W.bits,re){R.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,W={bits:I.distbits},re=u(f,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,W),I.distbits=W.bits,re){R.msg="invalid distances set",I.mode=30;break}if(I.mode=20,D===6)break e;case 20:I.mode=21;case 21:if(6<=$&&258<=J){R.next_out=U,R.avail_out=J,R.next_in=Y,R.avail_in=$,I.hold=B,I.bits=K,c(R,ue),U=R.next_out,oe=R.output,J=R.avail_out,Y=R.next_in,q=R.input,$=R.avail_in,B=I.hold,K=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;Ee=(O=I.lencode[B&(1<<I.lenbits)-1])>>>16&255,Ne=65535&O,!((de=O>>>24)<=K);){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(Ee&&!(240&Ee)){for(Ie=de,Re=Ee,Be=Ne;Ee=(O=I.lencode[Be+((B&(1<<Ie+Re)-1)>>Ie)])>>>16&255,Ne=65535&O,!(Ie+(de=O>>>24)<=K);){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}B>>>=Ie,K-=Ie,I.back+=Ie}if(B>>>=de,K-=de,I.back+=de,I.length=Ne,Ee===0){I.mode=26;break}if(32&Ee){I.back=-1,I.mode=12;break}if(64&Ee){R.msg="invalid literal/length code",I.mode=30;break}I.extra=15&Ee,I.mode=22;case 22:if(I.extra){for(V=I.extra;K<V;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.length+=B&(1<<I.extra)-1,B>>>=I.extra,K-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;Ee=(O=I.distcode[B&(1<<I.distbits)-1])>>>16&255,Ne=65535&O,!((de=O>>>24)<=K);){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(!(240&Ee)){for(Ie=de,Re=Ee,Be=Ne;Ee=(O=I.distcode[Be+((B&(1<<Ie+Re)-1)>>Ie)])>>>16&255,Ne=65535&O,!(Ie+(de=O>>>24)<=K);){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}B>>>=Ie,K-=Ie,I.back+=Ie}if(B>>>=de,K-=de,I.back+=de,64&Ee){R.msg="invalid distance code",I.mode=30;break}I.offset=Ne,I.extra=15&Ee,I.mode=24;case 24:if(I.extra){for(V=I.extra;K<V;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}I.offset+=B&(1<<I.extra)-1,B>>>=I.extra,K-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){R.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(J===0)break e;if(le=ue-J,I.offset>le){if((le=I.offset-le)>I.whave&&I.sane){R.msg="invalid distance too far back",I.mode=30;break}Te=le>I.wnext?(le-=I.wnext,I.wsize-le):I.wnext-le,le>I.length&&(le=I.length),ye=I.window}else ye=oe,Te=U-I.offset,le=I.length;for(J<le&&(le=J),J-=le,I.length-=le;oe[U++]=ye[Te++],--le;);I.length===0&&(I.mode=21);break;case 26:if(J===0)break e;oe[U++]=I.length,J--,I.mode=21;break;case 27:if(I.wrap){for(;K<32;){if($===0)break e;$--,B|=q[Y++]<<K,K+=8}if(ue-=J,R.total_out+=ue,I.total+=ue,ue&&(R.adler=I.check=I.flags?l(I.check,oe,ue,U-ue):o(I.check,oe,ue,U-ue)),ue=J,(I.flags?B:v(B))!==I.check){R.msg="incorrect data check",I.mode=30;break}K=B=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;K<32;){if($===0)break e;$--,B+=q[Y++]<<K,K+=8}if(B!==(4294967295&I.total)){R.msg="incorrect length check",I.mode=30;break}K=B=0}I.mode=29;case 29:re=1;break e;case 30:re=-3;break e;case 31:return-4;case 32:default:return g}return R.next_out=U,R.avail_out=J,R.next_in=Y,R.avail_in=$,I.hold=B,I.bits=K,(I.wsize||ue!==R.avail_out&&I.mode<30&&(I.mode<27||D!==4))&&M(R,R.output,R.next_out,ue-R.avail_out)?(I.mode=31,-4):(ae-=R.avail_in,ue-=R.avail_out,R.total_in+=ae,R.total_out+=ue,I.total+=ue,I.wrap&&ue&&(R.adler=I.check=I.flags?l(I.check,oe,ue,R.next_out-ue):o(I.check,oe,ue,R.next_out-ue)),R.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(ae==0&&ue===0||D===4)&&re===p&&(re=-5),re)},s.inflateEnd=function(R){if(!R||!R.state)return g;var D=R.state;return D.window&&(D.window=null),R.state=null,p},s.inflateGetHeader=function(R,D){var I;return R&&R.state&&2&(I=R.state).wrap?((I.head=D).done=!1,p):g},s.inflateSetDictionary=function(R,D){var I,q=D.length;return R&&R.state?(I=R.state).wrap!==0&&I.mode!==11?g:I.mode===11&&o(1,D,q,0)!==I.check?-3:M(R,D,q,q)?(I.mode=31,-4):(I.havedict=1,p):g},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,f,p,g,y,m,x,v){var w,_,N,C,L,T,S,P,k,M=v.bits,R=0,D=0,I=0,q=0,oe=0,Y=0,U=0,$=0,J=0,B=0,K=null,ae=0,ue=new i.Buf16(16),le=new i.Buf16(16),Te=null,ye=0;for(R=0;R<=15;R++)ue[R]=0;for(D=0;D<g;D++)ue[f[p+D]]++;for(oe=M,q=15;1<=q&&ue[q]===0;q--);if(q<oe&&(oe=q),q===0)return y[m++]=20971520,y[m++]=20971520,v.bits=1,0;for(I=1;I<q&&ue[I]===0;I++);for(oe<I&&(oe=I),R=$=1;R<=15;R++)if($<<=1,($-=ue[R])<0)return-1;if(0<$&&(h===0||q!==1))return-1;for(le[1]=0,R=1;R<15;R++)le[R+1]=le[R]+ue[R];for(D=0;D<g;D++)f[p+D]!==0&&(x[le[f[p+D]]++]=D);if(T=h===0?(K=Te=x,19):h===1?(K=o,ae-=257,Te=l,ye-=257,256):(K=c,Te=u,-1),R=I,L=m,U=D=B=0,N=-1,C=(J=1<<(Y=oe))-1,h===1&&852<J||h===2&&592<J)return 1;for(;;){for(S=R-U,k=x[D]<T?(P=0,x[D]):x[D]>T?(P=Te[ye+x[D]],K[ae+x[D]]):(P=96,0),w=1<<R-U,I=_=1<<Y;y[L+(B>>U)+(_-=w)]=S<<24|P<<16|k|0,_!==0;);for(w=1<<R-1;B&w;)w>>=1;if(w!==0?(B&=w-1,B+=w):B=0,D++,--ue[R]==0){if(R===q)break;R=f[p+x[D]]}if(oe<R&&(B&C)!==N){for(U===0&&(U=oe),L+=I,$=1<<(Y=R-U);Y+U<q&&!(($-=ue[Y+U])<=0);)Y++,$<<=1;if(J+=1<<Y,h===1&&852<J||h===2&&592<J)return 1;y[N=B&C]=oe<<24|Y<<16|L-m|0}}return B!==0&&(y[L+B]=R-U<<24|64<<16|0),v.bits=oe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,l=1;function c(O){for(var H=O.length;0<=--H;)O[H]=0}var u=0,h=29,f=256,p=f+1+h,g=30,y=19,m=2*p+1,x=15,v=16,w=7,_=256,N=16,C=17,L=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(p+2));c(M);var R=new Array(2*g);c(R);var D=new Array(512);c(D);var I=new Array(256);c(I);var q=new Array(h);c(q);var oe,Y,U,$=new Array(g);function J(O,H,ee,se,z){this.static_tree=O,this.extra_bits=H,this.extra_base=ee,this.elems=se,this.max_length=z,this.has_stree=O&&O.length}function B(O,H){this.dyn_tree=O,this.max_code=0,this.stat_desc=H}function K(O){return O<256?D[O]:D[256+(O>>>7)]}function ae(O,H){O.pending_buf[O.pending++]=255&H,O.pending_buf[O.pending++]=H>>>8&255}function ue(O,H,ee){O.bi_valid>v-ee?(O.bi_buf|=H<<O.bi_valid&65535,ae(O,O.bi_buf),O.bi_buf=H>>v-O.bi_valid,O.bi_valid+=ee-v):(O.bi_buf|=H<<O.bi_valid&65535,O.bi_valid+=ee)}function le(O,H,ee){ue(O,ee[2*H],ee[2*H+1])}function Te(O,H){for(var ee=0;ee|=1&O,O>>>=1,ee<<=1,0<--H;);return ee>>>1}function ye(O,H,ee){var se,z,te=new Array(x+1),pe=0;for(se=1;se<=x;se++)te[se]=pe=pe+ee[se-1]<<1;for(z=0;z<=H;z++){var Z=O[2*z+1];Z!==0&&(O[2*z]=Te(te[Z]++,Z))}}function de(O){var H;for(H=0;H<p;H++)O.dyn_ltree[2*H]=0;for(H=0;H<g;H++)O.dyn_dtree[2*H]=0;for(H=0;H<y;H++)O.bl_tree[2*H]=0;O.dyn_ltree[2*_]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Ee(O){8<O.bi_valid?ae(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Ne(O,H,ee,se){var z=2*H,te=2*ee;return O[z]<O[te]||O[z]===O[te]&&se[H]<=se[ee]}function Ie(O,H,ee){for(var se=O.heap[ee],z=ee<<1;z<=O.heap_len&&(z<O.heap_len&&Ne(H,O.heap[z+1],O.heap[z],O.depth)&&z++,!Ne(H,se,O.heap[z],O.depth));)O.heap[ee]=O.heap[z],ee=z,z<<=1;O.heap[ee]=se}function Re(O,H,ee){var se,z,te,pe,Z=0;if(O.last_lit!==0)for(;se=O.pending_buf[O.d_buf+2*Z]<<8|O.pending_buf[O.d_buf+2*Z+1],z=O.pending_buf[O.l_buf+Z],Z++,se===0?le(O,z,H):(le(O,(te=I[z])+f+1,H),(pe=T[te])!==0&&ue(O,z-=q[te],pe),le(O,te=K(--se),ee),(pe=S[te])!==0&&ue(O,se-=$[te],pe)),Z<O.last_lit;);le(O,_,H)}function Be(O,H){var ee,se,z,te=H.dyn_tree,pe=H.stat_desc.static_tree,Z=H.stat_desc.has_stree,me=H.stat_desc.elems,G=-1;for(O.heap_len=0,O.heap_max=m,ee=0;ee<me;ee++)te[2*ee]!==0?(O.heap[++O.heap_len]=G=ee,O.depth[ee]=0):te[2*ee+1]=0;for(;O.heap_len<2;)te[2*(z=O.heap[++O.heap_len]=G<2?++G:0)]=1,O.depth[z]=0,O.opt_len--,Z&&(O.static_len-=pe[2*z+1]);for(H.max_code=G,ee=O.heap_len>>1;1<=ee;ee--)Ie(O,te,ee);for(z=me;ee=O.heap[1],O.heap[1]=O.heap[O.heap_len--],Ie(O,te,1),se=O.heap[1],O.heap[--O.heap_max]=ee,O.heap[--O.heap_max]=se,te[2*z]=te[2*ee]+te[2*se],O.depth[z]=(O.depth[ee]>=O.depth[se]?O.depth[ee]:O.depth[se])+1,te[2*ee+1]=te[2*se+1]=z,O.heap[1]=z++,Ie(O,te,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(he,Ve){var yt,ft,pt,ot,jn,wr,Pn=Ve.dyn_tree,fs=Ve.max_code,Bl=Ve.stat_desc.static_tree,Yu=Ve.stat_desc.has_stree,Xu=Ve.stat_desc.extra_bits,Hs=Ve.stat_desc.extra_base,ps=Ve.stat_desc.max_length,qs=0;for(ot=0;ot<=x;ot++)he.bl_count[ot]=0;for(Pn[2*he.heap[he.heap_max]+1]=0,yt=he.heap_max+1;yt<m;yt++)ps<(ot=Pn[2*Pn[2*(ft=he.heap[yt])+1]+1]+1)&&(ot=ps,qs++),Pn[2*ft+1]=ot,fs<ft||(he.bl_count[ot]++,jn=0,Hs<=ft&&(jn=Xu[ft-Hs]),wr=Pn[2*ft],he.opt_len+=wr*(ot+jn),Yu&&(he.static_len+=wr*(Bl[2*ft+1]+jn)));if(qs!==0){do{for(ot=ps-1;he.bl_count[ot]===0;)ot--;he.bl_count[ot]--,he.bl_count[ot+1]+=2,he.bl_count[ps]--,qs-=2}while(0<qs);for(ot=ps;ot!==0;ot--)for(ft=he.bl_count[ot];ft!==0;)fs<(pt=he.heap[--yt])||(Pn[2*pt+1]!==ot&&(he.opt_len+=(ot-Pn[2*pt+1])*Pn[2*pt],Pn[2*pt+1]=ot),ft--)}}(O,H),ye(te,G,O.bl_count)}function j(O,H,ee){var se,z,te=-1,pe=H[1],Z=0,me=7,G=4;for(pe===0&&(me=138,G=3),H[2*(ee+1)+1]=65535,se=0;se<=ee;se++)z=pe,pe=H[2*(se+1)+1],++Z<me&&z===pe||(Z<G?O.bl_tree[2*z]+=Z:z!==0?(z!==te&&O.bl_tree[2*z]++,O.bl_tree[2*N]++):Z<=10?O.bl_tree[2*C]++:O.bl_tree[2*L]++,te=z,G=(Z=0)===pe?(me=138,3):z===pe?(me=6,3):(me=7,4))}function re(O,H,ee){var se,z,te=-1,pe=H[1],Z=0,me=7,G=4;for(pe===0&&(me=138,G=3),se=0;se<=ee;se++)if(z=pe,pe=H[2*(se+1)+1],!(++Z<me&&z===pe)){if(Z<G)for(;le(O,z,O.bl_tree),--Z!=0;);else z!==0?(z!==te&&(le(O,z,O.bl_tree),Z--),le(O,N,O.bl_tree),ue(O,Z-3,2)):Z<=10?(le(O,C,O.bl_tree),ue(O,Z-3,3)):(le(O,L,O.bl_tree),ue(O,Z-11,7));te=z,G=(Z=0)===pe?(me=138,3):z===pe?(me=6,3):(me=7,4)}}c($);var W=!1;function V(O,H,ee,se){ue(O,(u<<1)+(se?1:0),3),function(z,te,pe,Z){Ee(z),ae(z,pe),ae(z,~pe),i.arraySet(z.pending_buf,z.window,te,pe,z.pending),z.pending+=pe}(O,H,ee)}s._tr_init=function(O){W||(function(){var H,ee,se,z,te,pe=new Array(x+1);for(z=se=0;z<h-1;z++)for(q[z]=se,H=0;H<1<<T[z];H++)I[se++]=z;for(I[se-1]=z,z=te=0;z<16;z++)for($[z]=te,H=0;H<1<<S[z];H++)D[te++]=z;for(te>>=7;z<g;z++)for($[z]=te<<7,H=0;H<1<<S[z]-7;H++)D[256+te++]=z;for(ee=0;ee<=x;ee++)pe[ee]=0;for(H=0;H<=143;)M[2*H+1]=8,H++,pe[8]++;for(;H<=255;)M[2*H+1]=9,H++,pe[9]++;for(;H<=279;)M[2*H+1]=7,H++,pe[7]++;for(;H<=287;)M[2*H+1]=8,H++,pe[8]++;for(ye(M,p+1,pe),H=0;H<g;H++)R[2*H+1]=5,R[2*H]=Te(H,5);oe=new J(M,T,f+1,p,x),Y=new J(R,S,0,g,x),U=new J(new Array(0),P,0,y,w)}(),W=!0),O.l_desc=new B(O.dyn_ltree,oe),O.d_desc=new B(O.dyn_dtree,Y),O.bl_desc=new B(O.bl_tree,U),O.bi_buf=0,O.bi_valid=0,de(O)},s._tr_stored_block=V,s._tr_flush_block=function(O,H,ee,se){var z,te,pe=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(Z){var me,G=4093624447;for(me=0;me<=31;me++,G>>>=1)if(1&G&&Z.dyn_ltree[2*me]!==0)return o;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return l;for(me=32;me<f;me++)if(Z.dyn_ltree[2*me]!==0)return l;return o}(O)),Be(O,O.l_desc),Be(O,O.d_desc),pe=function(Z){var me;for(j(Z,Z.dyn_ltree,Z.l_desc.max_code),j(Z,Z.dyn_dtree,Z.d_desc.max_code),Be(Z,Z.bl_desc),me=y-1;3<=me&&Z.bl_tree[2*k[me]+1]===0;me--);return Z.opt_len+=3*(me+1)+5+5+4,me}(O),z=O.opt_len+3+7>>>3,(te=O.static_len+3+7>>>3)<=z&&(z=te)):z=te=ee+5,ee+4<=z&&H!==-1?V(O,H,ee,se):O.strategy===4||te===z?(ue(O,2+(se?1:0),3),Re(O,M,R)):(ue(O,4+(se?1:0),3),function(Z,me,G,he){var Ve;for(ue(Z,me-257,5),ue(Z,G-1,5),ue(Z,he-4,4),Ve=0;Ve<he;Ve++)ue(Z,Z.bl_tree[2*k[Ve]+1],3);re(Z,Z.dyn_ltree,me-1),re(Z,Z.dyn_dtree,G-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,pe+1),Re(O,O.dyn_ltree,O.dyn_dtree)),de(O),se&&Ee(O)},s._tr_tally=function(O,H,ee){return O.pending_buf[O.d_buf+2*O.last_lit]=H>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&H,O.pending_buf[O.l_buf+O.last_lit]=255&ee,O.last_lit++,H===0?O.dyn_ltree[2*ee]++:(O.matches++,H--,O.dyn_ltree[2*(I[ee]+f+1)]++,O.dyn_dtree[2*K(H)]++),O.last_lit===O.lit_bufsize-1},s._tr_align=function(O){ue(O,2,3),le(O,_,M),function(H){H.bi_valid===16?(ae(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,l){if(!o.setImmediate){var c,u,h,f,p=1,g={},y=!1,m=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,c={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){w(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,C=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=C,N}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(N){o.postMessage(f+N,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(N){w(N.data)},function(N){h.port2.postMessage(N)}):m&&"onreadystatechange"in m.createElement("script")?(u=m.documentElement,function(N){var C=m.createElement("script");C.onreadystatechange=function(){w(N),C.onreadystatechange=null,u.removeChild(C),C=null},u.appendChild(C)}):function(N){setTimeout(w,0,N)},x.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var C=new Array(arguments.length-1),L=0;L<C.length;L++)C[L]=arguments[L+1];var T={callback:N,args:C};return g[p]=T,c(p),p++},x.clearImmediate=v}function v(N){delete g[N]}function w(N){if(y)setTimeout(w,0,N);else{var C=g[N];if(C){y=!0;try{(function(L){var T=L.callback,S=L.args;switch(S.length){case 0:T();break;case 1:T(S[0]);break;case 2:T(S[0],S[1]);break;case 3:T(S[0],S[1],S[2]);break;default:T.apply(l,S)}})(C)}finally{v(N),y=!1}}}}function _(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(f)===0&&w(+N.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ij);var CW=ij.exports;const NW=ev(CW);function IW({onClose:t}){const{toast:e}=Hn(),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState([]),[h,f]=E.useState([]),[p,g]=E.useState(!0),[y,m]=E.useState([]),[x,v]=E.useState(null),[w,_]=E.useState(!1),[N,C]=E.useState(!1),[L,T]=E.useState({startDate:"",endDate:"",oilTypeId:"all",branchId:"all",driverUid:"all",transactionType:"all",maxResults:20});E.useEffect(()=>{S()},[]),E.useEffect(()=>{P()},[L,n]);const S=async()=>{try{g(!0);const[U,$,J,B]=await Promise.all([Ip(),Ew(),_w(),Np()]);r(U||[]),l($||[]),u(J||[]),f(B||[]);const K=new Date,ae=new Date;ae.setDate(K.getDate()-30),T(ue=>({...ue,startDate:ae.toISOString().split("T")[0],endDate:K.toISOString().split("T")[0],maxResults:20}))}catch(U){console.error("Error loading data:",U),e({title:"Error Loading Data",description:"Failed to load transaction data. Please try again.",variant:"destructive"})}finally{g(!1)}},P=()=>{let U=[...n];if(L.startDate&&L.endDate){const $=new Date(L.startDate),J=new Date(L.endDate);J.setHours(23,59,59,999),U=U.filter(B=>{var ae,ue,le,Te;const K=new Date(((ue=(ae=B.timestamp)==null?void 0:ae.toDate)==null?void 0:ue.call(ae))||B.timestamp||((Te=(le=B.createdAt)==null?void 0:le.toDate)==null?void 0:Te.call(le))||B.createdAt||B.actualDeliveryStartTime||0);return K>=$&&K<=J})}L.oilTypeId&&L.oilTypeId!=="all"&&(U=U.filter($=>$.oilTypeId===L.oilTypeId)),L.branchId&&L.branchId!=="all"&&(U=U.filter($=>$.branchId===L.branchId)),L.driverUid&&L.driverUid!=="all"&&(U=U.filter($=>$.driverUid===L.driverUid)),L.transactionType&&L.transactionType!=="all"&&(U=U.filter($=>$.type===L.transactionType)),U.sort(($,J)=>{var ae,ue,le,Te,ye,de,Ee,Ne;const B=new Date(((ue=(ae=$.timestamp)==null?void 0:ae.toDate)==null?void 0:ue.call(ae))||$.timestamp||((Te=(le=$.createdAt)==null?void 0:le.toDate)==null?void 0:Te.call(le))||$.createdAt||0);return new Date(((de=(ye=J.timestamp)==null?void 0:ye.toDate)==null?void 0:de.call(ye))||J.timestamp||((Ne=(Ee=J.createdAt)==null?void 0:Ee.toDate)==null?void 0:Ne.call(Ee))||J.createdAt||0).getTime()-B.getTime()}),U=U.slice(0,L.maxResults),i(U)},k=()=>{T({startDate:"",endDate:"",oilTypeId:"all",branchId:"all",driverUid:"all",transactionType:"all",maxResults:20}),m([])},M=async()=>{if(y.length===0){e({title:"No Transactions Selected",description:"Please select at least one transaction to download photos.",variant:"destructive"});return}C(!0);try{const U=s.filter(Te=>y.includes(Te.id));e({title:"Preparing Download",description:"Creating zip file with all photos..."});const $=new NW;let J=0;const B=[];for(const Te of U)Te.photos&&Object.keys(Te.photos).length>0&&Object.entries(Te.photos).forEach(([ye,de])=>{if(de&&de.trim()!==""){const Ee=new Promise(async Ne=>{var Ie;try{const Re=`/api/proxy-photo?url=${encodeURIComponent(de)}`,Be=await fetch(Re);if(Be.ok){const j=await Be.blob();if(j.size>0){const re=`${Te.type}_${Te.deliveryOrderNo||((Ie=Te.id)==null?void 0:Ie.slice(-6))}_${ye}.jpg`;$.file(re,j),J++}}else console.warn(`Proxy failed for ${de}: ${Be.status} ${Be.statusText}`)}catch(Re){console.warn(`Failed to download photo ${de}:`,Re)}Ne()});B.push(Ee)}});if(B.length===0){e({title:"No Photos Available",description:"Selected transactions don't have any photos to download.",variant:"destructive"});return}if(await Promise.allSettled(B),J===0){e({title:"No Photos Downloaded",description:"Could not download any photos due to access restrictions.",variant:"destructive"});return}e({title:"Creating Zip File",description:`Compressing ${J} photos...`});const K=await $.generateAsync({type:"blob"}),ae=document.createElement("a"),ue=URL.createObjectURL(K);ae.href=ue;const le=new Date().toISOString().split("T")[0];ae.download=`transactions_photos_${le}_${y.length}transactions_${J}photos.zip`,ae.style.display="none",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),URL.revokeObjectURL(ue),e({title:"Download Complete",description:`Downloaded ${J} photos from ${y.length} transactions as ZIP file.`})}catch(U){console.error("Error creating zip download:",U),e({title:"Download Failed",description:"Failed to create photo zip file. Please try again.",variant:"destructive"})}finally{C(!1)}},R=U=>{m($=>$.includes(U)?$.filter(J=>J!==U):[...$,U])},D=()=>{const U=s.map($=>$.id);m(y.length===s.length?[]:U)},I=U=>{v(U),_(!0)},q=U=>{if(!U)return"N/A";const $=U.toDate?U.toDate():new Date(U);return $.toLocaleDateString()+" "+$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},oe=U=>{switch(U){case"supply":return"bg-blue-100 text-blue-800 border-blue-200";case"loading":return"bg-green-100 text-green-800 border-green-200";case"delivery":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Y=U=>{switch(U){case"supply":return a.jsx(Jr,{className:"h-4 w-4"});case"loading":return a.jsx(lu,{className:"h-4 w-4"});case"delivery":return a.jsx(au,{className:"h-4 w-4"});default:return a.jsx(HC,{className:"h-4 w-4"})}};return p?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(dy,{className:"h-8 w-8 animate-spin"}),a.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):a.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-full",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Transaction Viewer"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"View and manage transactions with photo access"})]}),a.jsxs(ge,{variant:"outline",onClick:t,className:"self-end sm:self-auto",children:[a.jsx(ea,{className:"h-4 w-4 mr-2"}),"Close"]})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"text-lg flex items-center gap-2",children:[a.jsx($4,{className:"h-5 w-5"}),"Filters & Settings"]})}),a.jsxs($e,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"startDate",children:"From Date"}),a.jsx(et,{id:"startDate",type:"date",value:L.startDate,max:L.endDate||void 0,onChange:U=>{const $=U.target.value;if(L.endDate&&$>L.endDate){e({title:"Invalid Date Range",description:"From date cannot be later than Till date.",variant:"destructive"});return}T(J=>({...J,startDate:$}))},className:"bg-white border-2 border-gray-300"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"endDate",children:"Till Date"}),a.jsx(et,{id:"endDate",type:"date",value:L.endDate,min:L.startDate||void 0,onChange:U=>{const $=U.target.value;if(L.startDate&&L.startDate>$){e({title:"Invalid Date Range",description:"Till date cannot be earlier than From date.",variant:"destructive"});return}T(J=>({...J,endDate:$}))},className:"bg-white border-2 border-gray-300"})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Oil Type"}),a.jsxs(dt,{value:L.oilTypeId,onValueChange:U=>T($=>({...$,oilTypeId:U})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"All Oil Types"})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Oil Types"}),c.map(U=>a.jsx(we,{value:U.id,children:U.name},U.id))]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Branch"}),a.jsxs(dt,{value:L.branchId,onValueChange:U=>T($=>({...$,branchId:U})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"All Branches"})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Branches"}),o.map(U=>a.jsx(we,{value:U.id,children:U.name},U.id))]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Driver"}),a.jsxs(dt,{value:L.driverUid,onValueChange:U=>T($=>({...$,driverUid:U})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"All Drivers"})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Drivers"}),h.filter(U=>U.role==="driver").map(U=>a.jsx(we,{value:U.uid,children:U.displayName||U.email},U.uid))]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Type"}),a.jsxs(dt,{value:L.transactionType,onValueChange:U=>T($=>({...$,transactionType:U})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"All Types"})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Types"}),a.jsx(we,{value:"supply",children:"Supply"}),a.jsx(we,{value:"loading",children:"Loading"}),a.jsx(we,{value:"delivery",children:"Delivery"})]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Max Results"}),a.jsxs(dt,{value:L.maxResults.toString(),onValueChange:U=>T($=>({...$,maxResults:parseInt(U)})),children:[a.jsx(lt,{children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"10",children:"10 transactions"}),a.jsx(we,{value:"20",children:"20 transactions"}),a.jsx(we,{value:"50",children:"50 transactions"}),a.jsx(we,{value:"100",children:"100 transactions"})]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[a.jsx(ge,{variant:"outline",onClick:k,className:"text-sm",children:"Clear Filters"}),a.jsx(ge,{variant:"outline",onClick:D,className:"text-sm",children:y.length===s.length?"Deselect All":"Select All"}),a.jsxs(ge,{onClick:M,disabled:y.length===0||N,className:"flex items-center justify-center gap-2 text-sm",children:[N?a.jsx(dy,{className:"h-4 w-4 animate-spin"}):a.jsx(uy,{className:"h-4 w-4"}),N?"Creating ZIP...":`Download ZIP (${y.length} transactions)`]})]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Showing ",s.length," transactions • ",y.length," selected"]}),a.jsx("div",{className:"space-y-3",children:a.jsx(rj,{className:"h-[500px]",children:s.map(U=>{var $;return a.jsx(ze,{className:`mb-3 transition-all duration-200 cursor-pointer hover:shadow-md ${y.includes(U.id)?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,children:a.jsx($e,{className:"p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx($2,{checked:y.includes(U.id),onCheckedChange:()=>R(U.id),className:"mt-1"}),a.jsx("div",{className:`p-2 rounded-full ${oe(U.type||"")}`,children:Y(U.type||"")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ft,{className:`${oe(U.type||"")} border`,children:U.type}),a.jsx("span",{className:"text-sm font-medium",children:U.deliveryOrderNo||`Transaction #${($=U.id)==null?void 0:$.slice(-6)}`})]}),a.jsx("span",{className:"text-xs text-gray-500",children:q(U.timestamp||U.createdAt)})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(cx,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"truncate",children:U.driverName||"Unknown"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(au,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"truncate",children:U.branchName||"N/A"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Jr,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"truncate",children:U.oilTypeName||"N/A"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Xh,{className:"h-3 w-3 text-gray-400"}),a.jsxs("span",{className:"font-medium",children:[U.oilSuppliedLiters||U.totalLoadedLiters||U.actualDeliveredLiters||"N/A","L"]})]})]}),U.photos&&Object.keys(U.photos).length>0&&a.jsxs("div",{className:"mt-2 flex items-center space-x-1",children:[a.jsx(ou,{className:"h-3 w-3 text-blue-500"}),a.jsxs("span",{className:"text-xs text-blue-500",children:[Object.keys(U.photos).length," photo(s) available"]})]})]}),a.jsx("div",{className:"flex space-x-1",children:a.jsx(ge,{size:"sm",variant:"outline",onClick:J=>{J.stopPropagation(),I(U)},className:"h-8 w-8 p-1",children:a.jsx(Ln,{className:"h-3 w-3"})})})]})})})},U.id)})})}),a.jsx(Qt,{open:w,onOpenChange:_,children:a.jsxs(Bt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(gr,{children:[a.jsxs(_n,{className:"flex items-center space-x-2",children:[Y((x==null?void 0:x.type)||""),a.jsx("span",{children:"Transaction Details"}),a.jsx(Ft,{className:`${oe((x==null?void 0:x.type)||"")}`,children:x==null?void 0:x.type})]}),a.jsx(Ar,{children:"View detailed information and photos for this transaction"})]}),x&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{className:"font-semibold",children:"Transaction Info"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"ID:"})," ",x.id]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",q(x.timestamp||x.createdAt)]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"})," ",x.status||"Completed"]}),x.deliveryOrderNo&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Order No:"})," ",x.deliveryOrderNo]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{className:"font-semibold",children:"Participants"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Driver:"})," ",x.driverName||"Unknown"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Branch:"})," ",x.branchName||"N/A"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Oil Type:"})," ",x.oilTypeName||"N/A"]})]})]})]}),(x.startMeterReading||x.endMeterReading||x.oilSuppliedLiters)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{className:"font-semibold",children:"Measurements"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[x.startMeterReading&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Start Meter:"})," ",x.startMeterReading]}),x.endMeterReading&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"End Meter:"})," ",x.endMeterReading]}),x.oilSuppliedLiters&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Oil Supplied:"})," ",x.oilSuppliedLiters,"L"]}),x.totalLoadedLiters&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total Loaded:"})," ",x.totalLoadedLiters,"L"]}),x.actualDeliveredLiters&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Delivered:"})," ",x.actualDeliveredLiters,"L"]})]})]}),x.photos&&Object.keys(x.photos).length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{className:"font-semibold",children:"Photos"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(x.photos).map(([U,$],J)=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"font-medium text-sm capitalize",children:U.replace(/([A-Z])/g," $1").trim()}),a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:$,alt:U,className:"w-full h-32 object-cover rounded-lg border"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:a.jsxs(ge,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{const B=document.createElement("a");B.href=$,B.download=`${x.type}_${x.id}_${U}.jpg`,B.click()},children:[a.jsx(uy,{className:"h-4 w-4 mr-2"}),"Download"]})})]})]},J))})]})]})]})})]})}function kW({branches:t,oilTypes:e,onAddBranch:n,onUpdateBranch:r,onDeleteBranch:s}){const[i,o]=E.useState(!1),[l,c]=E.useState(null),[u,h]=E.useState({name:"",address:"",contactNo:"",oilTanks:[]}),{toast:f}=Hn(),p=()=>{h({name:"",address:"",contactNo:"",oilTanks:[]}),c(null)},g=()=>{if(!u.name||!u.address||!u.contactNo){f({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}l?(r(l.id,u),f({title:"Success",description:"Branch updated successfully"})):(n(u),f({title:"Success",description:"Branch added successfully"})),p(),o(!1)},y=_=>{c(_),h({name:_.name,address:_.address,contactNo:_.contactNo,oilTanks:_.oilTanks}),o(!0)},m=_=>{window.confirm("Are you sure you want to delete this branch?")&&(s(_),f({title:"Success",description:"Branch deleted successfully"}))},x=()=>{h(_=>({..._,oilTanks:[..._.oilTanks,{capacity:0,oilTypeId:"",oilTypeName:"",currentLevel:0}]}))},v=(_,N,C)=>{h(L=>({...L,oilTanks:L.oilTanks.map((T,S)=>S===_?{...T,[N]:C}:T)}))},w=_=>{h(N=>({...N,oilTanks:N.oilTanks.filter((C,L)=>L!==_)}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Branch Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your oil delivery branches and tank capacities"})]}),a.jsxs(Qt,{open:i,onOpenChange:o,children:[a.jsx(Gu,{asChild:!0,children:a.jsxs(ge,{onClick:()=>{p(),o(!0)},children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Branch"]})}),a.jsxs(Bt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsx(gr,{children:a.jsx(_n,{children:l?"Edit Branch":"Add New Branch"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"name",children:"Branch Name"}),a.jsx(et,{id:"name",value:u.name,onChange:_=>h(N=>({...N,name:_.target.value})),placeholder:"Enter branch name"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"contactNo",children:"Contact Number"}),a.jsx(et,{id:"contactNo",value:u.contactNo,onChange:_=>h(N=>({...N,contactNo:_.target.value})),placeholder:"Enter contact number"})]})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"address",children:"Address"}),a.jsx(et,{id:"address",value:u.address,onChange:_=>h(N=>({...N,address:_.target.value})),placeholder:"Enter branch address"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(ve,{children:"Oil Tanks"}),a.jsxs(ge,{type:"button",variant:"outline",size:"sm",onClick:x,children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Tank"]})]}),u.oilTanks.map((_,N)=>a.jsx(ze,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{children:"Oil Type"}),a.jsxs(dt,{value:_.oilTypeId,onValueChange:C=>{const L=e.find(T=>T.id===C);v(N,"oilTypeId",C),v(N,"oilTypeName",(L==null?void 0:L.name)||"")},children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select oil type"})}),a.jsx(ct,{children:e==null?void 0:e.map(C=>a.jsx(we,{value:C.id,children:C.name},C.id))})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Capacity (Liters)"}),a.jsx(et,{type:"number",value:_.capacity,onChange:C=>v(N,"capacity",Number(C.target.value)),placeholder:"Enter capacity"})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Current Level (Liters)"}),a.jsx(et,{type:"number",value:_.currentLevel,onChange:C=>v(N,"currentLevel",Number(C.target.value)),placeholder:"Enter current level"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx(ge,{type:"button",variant:"destructive",size:"sm",onClick:()=>w(N),children:a.jsx(Vo,{className:"h-4 w-4"})})})]})},N))]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsxs(ge,{onClick:g,children:[l?"Update":"Add"," Branch"]})]})]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t==null?void 0:t.map(_=>{var N;return a.jsxs(ze,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(au,{className:"h-5 w-5 text-blue-600"}),_.name]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.address}),a.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1 mt-1",children:[a.jsx(q4,{className:"h-4 w-4"}),_.contactNo]})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(ge,{variant:"outline",size:"sm",onClick:()=>y(_),children:a.jsx(Kf,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"destructive",size:"sm",onClick:()=>m(_.id),children:a.jsx(Vo,{className:"h-4 w-4"})})]})]})}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-sm",children:["Oil Tanks (",((N=_.oilTanks)==null?void 0:N.length)||0,")"]}),_.oilTanks&&_.oilTanks.length>0?a.jsx("div",{className:"space-y-2",children:_.oilTanks.map((C,L)=>a.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:C.oilTypeName}),a.jsxs("p",{className:"text-xs text-gray-600",children:[C.currentLevel,"L / ",C.capacity,"L"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all",style:{width:`${Math.min(C.currentLevel/C.capacity*100,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[Math.round(C.currentLevel/C.capacity*100),"%"]})]})]},L))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No tanks configured"})]})})]},_.id)})}),(!t||t.length===0)&&a.jsx(ze,{className:"text-center py-12",children:a.jsxs($e,{children:[a.jsx(au,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No branches yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first branch location."}),a.jsxs(ge,{onClick:()=>o(!0),children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Your First Branch"]})]})})]})}const AW=[{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Yellow",value:"#eab308"},{name:"Green",value:"#22c55e"},{name:"Blue",value:"#3b82f6"},{name:"Purple",value:"#a855f7"},{name:"Pink",value:"#ec4899"},{name:"Gray",value:"#6b7280"}];function RW({oilTypes:t,onAddOilType:e,onUpdateOilType:n,onDeleteOilType:r}){const[s,i]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState({name:"",color:"#3b82f6"}),{toast:h}=Hn(),f=()=>{u({name:"",color:"#3b82f6"}),l(null)},p=()=>{if(!c.name){h({title:"Missing Information",description:"Please enter an oil type name",variant:"destructive"});return}o?(n(o.id,c),h({title:"Success",description:"Oil type updated successfully"})):(e(c),h({title:"Success",description:"Oil type added successfully"})),f(),i(!1)},g=m=>{l(m),u({name:m.name,color:m.color}),i(!0)},y=m=>{window.confirm("Are you sure you want to delete this oil type?")&&(r(m),h({title:"Success",description:"Oil type deleted successfully"}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Oil Type Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage the types of oil products you deliver"})]}),a.jsxs(Qt,{open:s,onOpenChange:i,children:[a.jsx(Gu,{asChild:!0,children:a.jsxs(ge,{onClick:()=>{f(),i(!0)},children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Oil Type"]})}),a.jsxs(Bt,{children:[a.jsx(gr,{children:a.jsx(_n,{children:o?"Edit Oil Type":"Add New Oil Type"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"name",children:"Oil Type Name"}),a.jsx(et,{id:"name",value:c.name,onChange:m=>u(x=>({...x,name:m.target.value})),placeholder:"e.g., Diesel, Petrol, Motor Oil"})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Color"}),a.jsx("div",{className:"grid grid-cols-4 gap-3 mt-2",children:AW.map(m=>a.jsx("button",{type:"button",className:`
                        flex items-center justify-center p-3 rounded-lg border-2 transition-all
                        ${c.color===m.value?"border-gray-800 scale-105":"border-gray-200 hover:border-gray-400"}
                      `,onClick:()=>u(x=>({...x,color:m.value})),children:a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:m.value}}),a.jsx("span",{className:"text-xs text-gray-600",children:m.name})]})},m.value))})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Preview"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:c.color},children:a.jsx(Jr,{className:"h-4 w-4 text-white"})}),a.jsx("span",{className:"font-medium",children:c.name||"Oil Type Name"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsxs(ge,{onClick:p,children:[o?"Update":"Add"," Oil Type"]})]})]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t==null?void 0:t.map(m=>a.jsxs(ze,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:m.color},children:a.jsx(Jr,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(Pt,{className:"text-lg",children:m.name}),a.jsx("p",{className:"text-sm text-gray-600",style:{color:m.color},children:m.color})]})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(ge,{variant:"outline",size:"sm",onClick:()=>g(m),children:a.jsx(Kf,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"destructive",size:"sm",onClick:()=>y(m.id),children:a.jsx(Vo,{className:"h-4 w-4"})})]})]})}),a.jsx($e,{children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Color Code:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:m.color}}),a.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:m.color})]})]})})})]},m.id))}),(!t||t.length===0)&&a.jsx(ze,{className:"text-center py-12",children:a.jsxs($e,{children:[a.jsx(Jr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No oil types yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first oil type."}),a.jsxs(ge,{onClick:()=>i(!0),children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Your First Oil Type"]})]})})]})}function jW({drivers:t,onAddDriver:e,onUpdateDriver:n,onDeleteDriver:r,onToggleDriverStatus:s}){const[i,o]=E.useState(!1),[l,c]=E.useState(null),[u,h]=E.useState(!1),[f,p]=E.useState(null),[g,y]=E.useState({newPassword:"",confirmPassword:""}),[m,x]=E.useState({email:"",password:"",displayName:"",empNo:"",driverLicenceNo:"",tankerLicenceNo:"",licenceExpiryDate:""}),{toast:v}=Hn(),w=()=>{x({email:"",password:"",displayName:"",empNo:"",driverLicenceNo:"",tankerLicenceNo:"",licenceExpiryDate:""}),c(null)},_=()=>{if(!m.email||!m.displayName){v({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}if(!l&&!m.password){v({title:"Missing Password",description:"Password is required for new drivers",variant:"destructive"});return}if(l){const k={email:m.email,displayName:m.displayName,empNo:m.empNo,driverLicenceNo:m.driverLicenceNo,tankerLicenceNo:m.tankerLicenceNo,licenceExpiryDate:m.licenceExpiryDate?new Date(m.licenceExpiryDate):void 0};n(l.uid,k),v({title:"Success",description:"Driver updated successfully"})}else e(m),v({title:"Success",description:"Driver added successfully"});w(),o(!1)},N=k=>{c(k),x({email:k.email||"",password:"",displayName:k.displayName||"",empNo:k.empNo||"",driverLicenceNo:k.driverLicenceNo||"",tankerLicenceNo:k.tankerLicenceNo||"",licenceExpiryDate:k.licenceExpiryDate?k.licenceExpiryDate instanceof Date?k.licenceExpiryDate.toISOString().split("T")[0]:new Date(k.licenceExpiryDate).toISOString().split("T")[0]:""}),o(!0)},C=k=>{window.confirm(`Are you sure you want to delete driver ${k.displayName}?`)&&(r(k.uid),v({title:"Success",description:"Driver deleted successfully"}))},L=k=>{s(k.uid,!k.active),v({title:"Success",description:`Driver ${k.active?"deactivated":"activated"} successfully`})},T=()=>{if(!g.newPassword||!g.confirmPassword){v({title:"Missing Information",description:"Please fill in both password fields",variant:"destructive"});return}if(g.newPassword!==g.confirmPassword){v({title:"Password Mismatch",description:"Passwords do not match",variant:"destructive"});return}v({title:"Success",description:"Password changed successfully"}),y({newPassword:"",confirmPassword:""}),h(!1),p(null)},S=k=>{if(!k.licenceExpiryDate)return!1;const M=new Date(k.licenceExpiryDate),R=new Date,D=new Date(R.getTime()+30*24*60*60*1e3);return M<=D},P=k=>k?new Date(k).toLocaleDateString():"Not set";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Driver Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your delivery drivers and their credentials"})]}),a.jsxs(Qt,{open:i,onOpenChange:o,children:[a.jsx(Gu,{asChild:!0,children:a.jsxs(ge,{onClick:()=>{w(),o(!0)},children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Driver"]})}),a.jsxs(Bt,{className:"max-w-2xl",children:[a.jsx(gr,{children:a.jsx(_n,{children:l?"Edit Driver":"Add New Driver"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"email",children:"Email"}),a.jsx(et,{id:"email",type:"email",value:m.email,onChange:k=>x(M=>({...M,email:k.target.value})),placeholder:"Enter email"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"displayName",children:"Full Name"}),a.jsx(et,{id:"displayName",value:m.displayName,onChange:k=>x(M=>({...M,displayName:k.target.value})),placeholder:"Enter full name"})]})]}),!l&&a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"password",children:"Password"}),a.jsx(et,{id:"password",type:"password",value:m.password,onChange:k=>x(M=>({...M,password:k.target.value})),placeholder:"Enter password"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"empNo",children:"Employee Number"}),a.jsx(et,{id:"empNo",value:m.empNo,onChange:k=>x(M=>({...M,empNo:k.target.value})),placeholder:"Enter employee number"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"licenceExpiryDate",children:"Licence Expiry Date"}),a.jsx(et,{id:"licenceExpiryDate",type:"date",value:m.licenceExpiryDate,onChange:k=>x(M=>({...M,licenceExpiryDate:k.target.value}))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"driverLicenceNo",children:"Driver Licence Number"}),a.jsx(et,{id:"driverLicenceNo",value:m.driverLicenceNo,onChange:k=>x(M=>({...M,driverLicenceNo:k.target.value})),placeholder:"Enter driver licence number"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"tankerLicenceNo",children:"Tanker Licence Number"}),a.jsx(et,{id:"tankerLicenceNo",value:m.tankerLicenceNo,onChange:k=>x(M=>({...M,tankerLicenceNo:k.target.value})),placeholder:"Enter tanker licence number"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsxs(ge,{onClick:_,children:[l?"Update":"Add"," Driver"]})]})]})]})]})]}),a.jsx(Qt,{open:u,onOpenChange:h,children:a.jsxs(Bt,{children:[a.jsx(gr,{children:a.jsxs(_n,{children:["Change Password for ",f==null?void 0:f.displayName]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"newPassword",children:"New Password"}),a.jsx(et,{id:"newPassword",type:"password",value:g.newPassword,onChange:k=>y(M=>({...M,newPassword:k.target.value})),placeholder:"Enter new password"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"confirmPassword",children:"Confirm Password"}),a.jsx(et,{id:"confirmPassword",type:"password",value:g.confirmPassword,onChange:k=>y(M=>({...M,confirmPassword:k.target.value})),placeholder:"Confirm new password"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),a.jsx(ge,{onClick:T,children:"Change Password"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t==null?void 0:t.map(k=>a.jsxs(ze,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(dE,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx(Pt,{className:"text-lg",children:k.displayName}),a.jsx("p",{className:"text-sm text-gray-600",children:k.email})]})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(ge,{variant:"outline",size:"sm",onClick:()=>N(k),children:a.jsx(Kf,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"destructive",size:"sm",onClick:()=>C(k),children:a.jsx(Vo,{className:"h-4 w-4"})})]})]})}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"Status:"}),a.jsx(Ft,{variant:k.active?"default":"secondary",className:"cursor-pointer",onClick:()=>L(k),children:k.active?"Active":"Inactive"})]}),k.empNo&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(H4,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{className:"text-sm",children:["Emp #: ",k.empNo]})]}),(k.driverLicenceNo||k.tankerLicenceNo)&&a.jsxs("div",{className:"space-y-1",children:[k.driverLicenceNo&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cE,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{className:"text-sm",children:["DL: ",k.driverLicenceNo]})]}),k.tankerLicenceNo&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cE,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{className:"text-sm",children:["TL: ",k.tankerLicenceNo]})]})]}),k.licenceExpiryDate&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{className:"text-sm",children:["Expires: ",P(k.licenceExpiryDate)]}),S(k)&&a.jsx(Ft,{variant:"destructive",className:"text-xs",children:"Expiring Soon"})]}),a.jsx("div",{className:"pt-2 space-y-2",children:a.jsx(ge,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{p(k),h(!0)},children:"Change Password"})})]})})]},k.uid))}),(!t||t.length===0)&&a.jsx(ze,{className:"text-center py-12",children:a.jsxs($e,{children:[a.jsx(dE,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No drivers yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first driver."}),a.jsxs(ge,{onClick:()=>o(!0),children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Your First Driver"]})]})})]})}function oj({onAdd:t,drivers:e}){const[n,r]=E.useState(!1),[s,i]=E.useState(!1),[o,l]=E.useState({title:"",description:"",priority:"medium",dueDate:"",assignedTo:""}),c=async h=>{if(h.preventDefault(),!(!o.title||!o.dueDate)){i(!0);try{console.log("Form data before sending:",{title:o.title,description:o.description,priority:o.priority,dueDate:new Date(o.dueDate),assignedTo:o.assignedTo||void 0}),await t({title:o.title,description:o.description,priority:o.priority,dueDate:new Date(o.dueDate),assignedTo:o.assignedTo||void 0}),l({title:"",description:"",priority:"medium",dueDate:"",assignedTo:""}),r(!1)}catch(f){console.error("Error creating task:",f),console.error("Error details:",{message:f instanceof Error?f.message:"Unknown error",code:f==null?void 0:f.code,stack:f instanceof Error?f.stack:"No stack trace"})}finally{i(!1)}}},u=h=>{switch(h){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return a.jsxs(Qt,{open:n,onOpenChange:r,children:[a.jsx(Gu,{asChild:!0,children:a.jsxs(ge,{"data-testid":"button-add-task",children:[a.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Add Task"]})}),a.jsx(Bt,{className:"sm:max-w-[500px]",children:a.jsxs("form",{onSubmit:c,children:[a.jsxs(gr,{children:[a.jsx(_n,{children:"Create New Task"}),a.jsx(Ar,{children:"Add a new task to monitor daily operations and track progress."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"title",children:"Task Title *"}),a.jsx(et,{id:"title",value:o.title,onChange:h=>l(f=>({...f,title:h.target.value})),placeholder:"Enter task title","data-testid":"input-task-title",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"description",children:"Description"}),a.jsx(Qa,{id:"description",value:o.description,onChange:h=>l(f=>({...f,description:h.target.value})),placeholder:"Task description and details","data-testid":"textarea-task-description",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"priority",children:"Priority"}),a.jsxs(dt,{value:o.priority,onValueChange:h=>l(f=>({...f,priority:h})),children:[a.jsx(lt,{"data-testid":"select-task-priority",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"low",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("low")}`,children:"Low"})})}),a.jsx(we,{value:"medium",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("medium")}`,children:"Medium"})})}),a.jsx(we,{value:"high",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("high")}`,children:"High"})})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"dueDate",children:"Due Date *"}),a.jsxs("div",{className:"relative",children:[a.jsx(et,{id:"dueDate",type:"date",value:o.dueDate,onChange:h=>l(f=>({...f,dueDate:h.target.value})),"data-testid":"input-task-due-date",required:!0}),a.jsx(mr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"assignedTo",children:"Assign to Driver (Optional)"}),a.jsxs(dt,{value:o.assignedTo,onValueChange:h=>l(f=>({...f,assignedTo:h})),children:[a.jsx(lt,{"data-testid":"select-task-driver",children:a.jsx(ht,{placeholder:"Select driver"})}),a.jsx(ct,{children:e.map(h=>a.jsxs(we,{value:h.uid,children:[h.displayName," (",h.email,")"]},h.uid))})]})]})]}),a.jsxs(AR,{children:[a.jsx(ge,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:s,children:"Cancel"}),a.jsx(ge,{type:"submit",disabled:s,"data-testid":"button-create-task",children:s?"Creating...":"Create Task"})]})]})})]})}function wa({tasks:t,onUpdate:e,onDelete:n,drivers:r}){const[s,i]=E.useState("all"),[o,l]=E.useState("all"),c=y=>{switch(y){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=y=>{switch(y){case"completed":return a.jsx(ax,{className:"w-4 h-4"});case"in-progress":return a.jsx(xl,{className:"w-4 h-4"});case"pending":return a.jsx(ch,{className:"w-4 h-4"});default:return a.jsx(ch,{className:"w-4 h-4"})}},h=t.filter(y=>{const m=s==="all"||y.status===s,x=o==="all"||y.priority===o;return m&&x}),f=y=>{const m=r.find(x=>x.uid===y);return m?m.displayName:"Unassigned"},p=y=>new Date(y)<new Date&&!0,g=async(y,m)=>{await e(y,{status:m})};return t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ch,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),a.jsx("p",{className:"text-gray-500",children:"Create your first task to start tracking daily operations."})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex space-x-4 mb-6",children:[a.jsxs(dt,{value:s,onValueChange:y=>i(y),children:[a.jsx(lt,{className:"w-40",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Status"}),a.jsx(we,{value:"pending",children:"Pending"}),a.jsx(we,{value:"in-progress",children:"In Progress"}),a.jsx(we,{value:"completed",children:"Completed"})]})]}),a.jsxs(dt,{value:o,onValueChange:y=>l(y),children:[a.jsx(lt,{className:"w-40",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"all",children:"All Priority"}),a.jsx(we,{value:"high",children:"High Priority"}),a.jsx(we,{value:"medium",children:"Medium Priority"}),a.jsx(we,{value:"low",children:"Low Priority"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(y=>y.status==="pending").length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pending"})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.filter(y=>y.status==="in-progress").length}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(y=>y.status==="completed").length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})})})]}),a.jsx("div",{className:"space-y-3",children:h.map(y=>a.jsx(ze,{className:`${p(y.dueDate)&&y.status!=="completed"?"border-red-200 bg-red-50":""}`,children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:y.title}),a.jsx(Ft,{className:c(y.priority),children:y.priority}),p(y.dueDate)&&y.status!=="completed"&&a.jsx(Ft,{className:"bg-red-100 text-red-800",children:"Overdue"})]}),y.description&&a.jsx("p",{className:"text-gray-600 text-sm mb-3",children:y.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(mr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Due: ",new Date(y.dueDate).toLocaleDateString()]})]}),y.assignedTo&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(cx,{className:"w-4 h-4"}),a.jsx("span",{children:f(y.assignedTo)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(dt,{value:y.status,onValueChange:m=>g(y.id,m),children:[a.jsx(lt,{className:"w-32",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[u(y.status),a.jsx(ht,{})]})}),a.jsxs(ct,{children:[a.jsx(we,{value:"pending",children:"Pending"}),a.jsx(we,{value:"in-progress",children:"In Progress"}),a.jsx(we,{value:"completed",children:"Completed"})]})]}),a.jsx(ge,{variant:"outline",size:"sm",onClick:()=>n(y.id),"data-testid":`button-delete-task-${y.id}`,children:a.jsx(Vo,{className:"w-4 h-4"})})]})]})})},y.id))})]})}var aj="AlertDialog",[PW,pH]=yr(aj,[uR]),Ws=uR(),lj=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ws(e);return a.jsx(CR,{...r,...n,modal:!0})};lj.displayName=aj;var DW="AlertDialogTrigger",cj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ws(n);return a.jsx(NR,{...s,...r,ref:e})});cj.displayName=DW;var OW="AlertDialogPortal",uj=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ws(e);return a.jsx(IR,{...r,...n})};uj.displayName=OW;var LW="AlertDialogOverlay",dj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ws(n);return a.jsx(kw,{...s,...r,ref:e})});dj.displayName=LW;var Ya="AlertDialogContent",[MW,FW]=PW(Ya),VW=mC("AlertDialogContent"),hj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Ws(n),o=E.useRef(null),l=Qe(e,o),c=E.useRef(null);return a.jsx(l7,{contentName:Ya,titleName:fj,docsSlug:"alert-dialog",children:a.jsx(MW,{scope:n,cancelRef:c,children:a.jsxs(Aw,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:ke(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(VW,{children:r}),a.jsx(zW,{contentRef:o})]})})})});hj.displayName=Ya;var fj="AlertDialogTitle",pj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ws(n);return a.jsx(Rw,{...s,...r,ref:e})});pj.displayName=fj;var mj="AlertDialogDescription",gj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ws(n);return a.jsx(jw,{...s,...r,ref:e})});gj.displayName=mj;var UW="AlertDialogAction",yj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ws(n);return a.jsx(Pw,{...s,...r,ref:e})});yj.displayName=UW;var vj="AlertDialogCancel",xj=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=FW(vj,n),i=Ws(n),o=Qe(e,s);return a.jsx(Pw,{...i,...r,ref:o})});xj.displayName=vj;var zW=({contentRef:t})=>{const e=`\`${Ya}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ya}\` by passing a \`${mj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ya}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return E.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},BW=lj,$W=cj,WW=uj,wj=dj,_j=hj,Ej=yj,bj=xj,Tj=pj,Sj=gj;const HW=BW,qW=$W,KW=WW,Cj=E.forwardRef(({className:t,...e},n)=>a.jsx(wj,{className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Cj.displayName=wj.displayName;const Nj=E.forwardRef(({className:t,...e},n)=>a.jsxs(KW,{children:[a.jsx(Cj,{}),a.jsx(_j,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Nj.displayName=_j.displayName;const Ij=({className:t,...e})=>a.jsx("div",{className:Pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ij.displayName="AlertDialogHeader";const kj=({className:t,...e})=>a.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});kj.displayName="AlertDialogFooter";const Aj=E.forwardRef(({className:t,...e},n)=>a.jsx(Tj,{ref:n,className:Pe("text-lg font-semibold",t),...e}));Aj.displayName=Tj.displayName;const Rj=E.forwardRef(({className:t,...e},n)=>a.jsx(Sj,{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Rj.displayName=Sj.displayName;const jj=E.forwardRef(({className:t,...e},n)=>a.jsx(Ej,{ref:n,className:Pe(_x(),t),...e}));jj.displayName=Ej.displayName;const Pj=E.forwardRef(({className:t,...e},n)=>a.jsx(bj,{ref:n,className:Pe(_x({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Pj.displayName=bj.displayName;function GW({storageUsage:t,onDeleteRecords:e}){const[n,r]=E.useState({collection:"",startDate:"",endDate:""}),[s,i]=E.useState(!1),{toast:o}=Hn(),l=async()=>{if(!n.collection||!n.startDate||!n.endDate){o({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}i(!0);try{const c=new Date(n.startDate),u=new Date(n.endDate);await e(n.collection,c,u),r({collection:"",startDate:"",endDate:""})}catch(c){console.error("Error deleting records:",c)}finally{i(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(ze,{children:[a.jsxs(jt,{className:"flex flex-row items-center space-y-0 pb-2",children:[a.jsx(Pt,{className:"text-lg font-semibold",children:"Firestore Database"}),a.jsx(B4,{className:"w-5 h-5 ml-2 text-blue-500"})]}),a.jsx($e,{children:t?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Documents:"}),a.jsx("span",{className:"font-medium",children:t.totalDocuments.toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Size:"}),a.jsx("span",{className:"font-medium",children:t.estimatedSize})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Collections Breakdown:"}),a.jsx("div",{className:"space-y-1",children:t.collections.map(c=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"capitalize text-gray-600",children:[c.collection,":"]}),a.jsxs("span",{children:[c.count," docs"]})]},c.collection))})]})]}):a.jsx("p",{className:"text-gray-500",children:"Loading storage usage..."})})]}),a.jsxs(ze,{children:[a.jsxs(jt,{className:"flex flex-row items-center space-y-0 pb-2",children:[a.jsx(Pt,{className:"text-lg font-semibold",children:"Firebase Storage"}),a.jsx(z4,{className:"w-5 h-5 ml-2 text-orange-500"})]}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Photo Storage:"}),a.jsx("span",{className:"font-medium",children:"Active"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Folder Structure:"}),a.jsx("span",{className:"font-medium",children:"Organized"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),a.jsx("span",{className:"font-medium text-green-600",children:"Connected"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All delivery and loading photos are stored securely in Firebase Storage with organized folder structure."})]})})]})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center",children:[a.jsx(Vo,{className:"w-5 h-5 mr-2 text-red-500"}),"Data Cleanup"]})}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Delete records by date range to manage storage and remove old data. This action cannot be undone."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"collection",children:"Collection"}),a.jsxs(dt,{value:n.collection,onValueChange:c=>r(u=>({...u,collection:c})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select collection"})}),a.jsxs(ct,{children:[a.jsx(we,{value:"deliveries",children:"Deliveries"}),a.jsx(we,{value:"complaints",children:"Complaints"}),a.jsx(we,{value:"tasks",children:"Tasks"}),a.jsx(we,{value:"branches",children:"Branches"}),a.jsx(we,{value:"oilTypes",children:"Oil Types"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"startDate",children:"Start Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(et,{id:"startDate",type:"date",value:n.startDate,onChange:c=>r(u=>({...u,startDate:c.target.value}))}),a.jsx(mr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ve,{htmlFor:"endDate",children:"End Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(et,{id:"endDate",type:"date",value:n.endDate,onChange:c=>r(u=>({...u,endDate:c.target.value}))}),a.jsx(mr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),a.jsxs(HW,{children:[a.jsx(qW,{asChild:!0,children:a.jsxs(ge,{variant:"destructive",disabled:!n.collection||!n.startDate||!n.endDate||s,className:"w-full md:w-auto",children:[a.jsx(Vo,{className:"w-4 h-4 mr-2"}),s?"Deleting...":"Delete Records"]})}),a.jsxs(Nj,{children:[a.jsxs(Ij,{children:[a.jsxs(Aj,{className:"flex items-center",children:[a.jsx(Ui,{className:"w-5 h-5 mr-2 text-red-500"}),"Confirm Data Deletion"]}),a.jsxs(Rj,{children:["Are you sure you want to delete records from ",a.jsx("strong",{children:n.collection}),"from ",a.jsx("strong",{children:n.startDate})," to ",a.jsx("strong",{children:n.endDate}),"?",a.jsx("br",{}),a.jsx("br",{}),a.jsx("strong",{className:"text-red-600",children:"This action cannot be undone!"})]})]}),a.jsxs(kj,{children:[a.jsx(Pj,{children:"Cancel"}),a.jsx(jj,{onClick:l,className:"bg-red-600 hover:bg-red-700",children:"Delete Records"})]})]})]})]})})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center",children:[a.jsx(W4,{className:"w-5 h-5 mr-2 text-gray-500"}),"System Information"]})}),a.jsx($e,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Application Version"}),a.jsx("p",{className:"text-sm text-gray-600",children:"OILDELIVERY v1.0.0"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Last Backup"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[new Date().toLocaleDateString()," (Automated)"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Database Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Connected"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Cloud Storage"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Online"})]})]})]})})]})]})}function _1({user:t}){var re;const[e,n]=E.useState("overview"),[r,s]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState([]),[f,p]=E.useState([]),[g,y]=E.useState([]),[m,x]=E.useState(null),[v,w]=E.useState(!0),[_,N]=E.useState([]),[C,L]=E.useState(null),[T,S]=E.useState(!1),[P,k]=E.useState(null),[M,R]=E.useState(!1),[D,I]=E.useState(!1),{toast:q}=Hn(),{logout:oe}=Ji();E.useEffect(()=>{Y()},[]);const Y=async()=>{try{w(!0);const[W,V,O,H,ee,se,z,te]=await Promise.all([$B().catch(()=>[]),jA().catch(()=>[]),Np().catch(()=>[]),DA().catch(()=>[]),OA().catch(()=>[]),LA().catch(()=>[]),e$().catch(()=>null),Ip().catch(()=>[])]);s(W),o(V),c(O.filter(pe=>pe.role==="driver")),h(H),p(ee),y(se),x(z),N(te)}catch(W){console.error("Error loading data:",W),q({title:"Error",description:"Failed to load some data. Please refresh the page.",variant:"destructive"})}finally{w(!1)}},U=async()=>{try{await oe()}catch(W){console.error("Logout error:",W),localStorage.removeItem("currentUser"),window.location.href="/"}};r.filter(W=>W.status==="completed").length,r.filter(W=>W.status!=="completed").length,r.filter(W=>W.status==="completed").reduce((W,V)=>W+(V.loadedOilLiters||0),0),l.filter(W=>W.active!==!1).length,l.length;const $=i.filter(W=>W.status==="open").length;i.length,g.filter(W=>W.status==="pending").length,g.filter(W=>W.status==="in-progress").length;const J=async W=>{try{await WB(W),await Y(),q({title:"Success",description:"Driver created successfully"})}catch(V){console.error("Error creating driver:",V),q({title:"Error",description:"Failed to create driver",variant:"destructive"})}},B=async(W,V)=>{try{await a1(W,V),await Y(),q({title:"Success",description:"Driver updated successfully"})}catch(O){console.error("Error updating driver:",O),q({title:"Error",description:"Failed to update driver",variant:"destructive"})}},K=async W=>{try{await XB(W),await Y(),q({title:"Success",description:"Driver deleted successfully"})}catch(V){console.error("Error deleting driver:",V),q({title:"Error",description:"Failed to delete driver",variant:"destructive"})}},ae=async(W,V)=>{try{await a1(W,{active:V}),await Y(),q({title:"Success",description:`Driver ${V?"activated":"deactivated"} successfully`})}catch(O){console.error("Error toggling driver status:",O),q({title:"Error",description:"Failed to update driver status",variant:"destructive"})}},ue=async W=>{try{await HB(W),await Y(),q({title:"Success",description:"Branch added successfully"})}catch(V){console.error("Error adding branch:",V),q({title:"Error",description:"Failed to add branch",variant:"destructive"})}},le=async(W,V)=>{try{await qB(W,V),await Y(),q({title:"Success",description:"Branch updated successfully"})}catch(O){console.error("Error updating branch:",O),q({title:"Error",description:"Failed to update branch",variant:"destructive"})}},Te=async W=>{try{await KB(W),await Y(),q({title:"Success",description:"Branch deleted successfully"})}catch(V){console.error("Error deleting branch:",V),q({title:"Error",description:"Failed to delete branch",variant:"destructive"})}},ye=async W=>{try{await GB(W),await Y(),q({title:"Success",description:"Oil type added successfully"})}catch(V){console.error("Error adding oil type:",V),q({title:"Error",description:"Failed to add oil type",variant:"destructive"})}},de=async(W,V)=>{try{await QB(W,V),await Y(),q({title:"Success",description:"Oil type updated successfully"})}catch(O){console.error("Error updating oil type:",O),q({title:"Error",description:"Failed to update oil type",variant:"destructive"})}},Ee=async W=>{try{await YB(W),await Y(),q({title:"Success",description:"Oil type deleted successfully"})}catch(V){console.error("Error deleting oil type:",V),q({title:"Error",description:"Failed to delete oil type",variant:"destructive"})}},Ne=async W=>{try{await ww(W),await Y(),q({title:"Success",description:"Task created successfully"})}catch(V){console.error("Error creating task:",V),q({title:"Error",description:"Failed to create task",variant:"destructive"})}},Ie=async(W,V)=>{try{await MA(W,V),await Y(),q({title:"Success",description:"Task updated successfully"})}catch(O){console.error("Error updating task:",O),q({title:"Error",description:"Failed to update task",variant:"destructive"})}},Re=async W=>{try{await FA(W),await Y(),q({title:"Success",description:"Task deleted successfully"})}catch(V){console.error("Error deleting task:",V),q({title:"Error",description:"Failed to delete task",variant:"destructive"})}},Be=async(W,V,O)=>{try{await t$(W,V,O),await Y(),q({title:"Success",description:"Records deleted successfully"})}catch(H){console.error("Error deleting records:",H),q({title:"Error",description:"Failed to delete records",variant:"destructive"})}},j=()=>{if(!_||_.length===0){q({title:"No Data",description:"No transactions available to download",variant:"destructive"});return}const W=["Transaction ID","Type","Date","Driver Name","Oil Type","Quantity (L)","Branch","Start Meter","End Meter","Delivery Order","Tank Level Photo","Hose Connection Photo","Final Tank Photo","Status"],V=Z=>{const me=l.find(G=>G.uid===Z||G.id===Z);return me?me.displayName||me.email:Z||"Unknown Driver"},O=(Z,me)=>Z!=null&&Z.toDate?Z.toDate().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):me?(me.toDate?me.toDate():new Date(me)).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown Date",H=[...r.map(Z=>({id:Z.id,type:"Supply",timestamp:Z.completedTimestamp,createdAt:Z.createdAt,driverUid:Z.driverUid,oilTypeName:Z.oilTypeName,quantity:Z.deliveredLiters,branchName:Z.branchName,startMeterReading:Z.startMeterReading,endMeterReading:Z.endMeterReading,deliveryOrderId:Z.deliveryOrderId,photos:Z.photos||{},tankLevelPhoto:Z.tankLevelPhoto,hoseConnectionPhoto:Z.hoseConnectionPhoto,finalTankLevelPhoto:Z.finalTankLevelPhoto,status:Z.status||"completed"})),..._.map(Z=>({...Z,quantity:Z.deliveredLiters||Z.loadedLiters||Z.quantity}))],ee=H.map(Z=>{var me,G,he,Ve,yt;return[Z.id||Z.loadSessionId||"",Z.type||(Z.deliveredLiters?"Supply":"Loading"),O(Z.timestamp,Z.createdAt),V(Z.driverUid),Z.oilTypeName||"",Z.quantity||"",Z.branchName||"",Z.startMeterReading||"",Z.endMeterReading||"",Z.deliveryOrderId||"",((me=Z.photos)==null?void 0:me.tankLevelBefore)||((G=Z.photos)==null?void 0:G.tankLevel)||Z.tankLevelPhoto||"",((he=Z.photos)==null?void 0:he.hoseConnection)||Z.hoseConnectionPhoto||"",((Ve=Z.photos)==null?void 0:Ve.tankLevelAfter)||((yt=Z.photos)==null?void 0:yt.finalTankLevel)||Z.finalTankLevelPhoto||"",Z.status||"completed"]}),se=[W,...ee].map(Z=>Z.map(me=>`"${me}"`).join(",")).join(`
`),z=new Blob([se],{type:"text/csv;charset=utf-8;"}),te=document.createElement("a"),pe=URL.createObjectURL(z);te.setAttribute("href",pe),te.setAttribute("download",`oil_transactions_${new Date().toISOString().split("T")[0]}.csv`),te.style.visibility="hidden",document.body.appendChild(te),te.click(),document.body.removeChild(te),q({title:"Export Complete",description:`Downloaded ${H.length} transactions with proper dates and driver names`})};return v?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:a.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"OILDELIVERY"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Admin Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.displayName}),a.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),a.jsxs(ge,{onClick:U,variant:"outline",size:"sm",className:"flex items-center text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-logout",children:[a.jsx(lx,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"}),a.jsx("span",{className:"sm:hidden",children:"Exit"})]})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:a.jsxs(Lw,{value:e,onValueChange:n,className:"space-y-6",children:[a.jsxs(Lp,{className:"grid w-full grid-cols-3 sm:grid-cols-6 text-xs sm:text-sm",children:[a.jsx(an,{value:"overview",className:"text-xs sm:text-sm",children:"Overview"}),a.jsx(an,{value:"drivers",className:"text-xs sm:text-sm",children:"Drivers"}),a.jsx(an,{value:"branches",className:"text-xs sm:text-sm",children:"Branches"}),a.jsx(an,{value:"oil-types",className:"text-xs sm:text-sm",children:"Oil Types"}),a.jsx(an,{value:"tasks",className:"text-xs sm:text-sm",children:"Tasks"}),a.jsx(an,{value:"settings",className:"text-xs sm:text-sm",children:"Settings"})]}),a.jsxs(Qn,{value:"overview",className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Admin Overview"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Today's operations and download reports"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[a.jsxs(ge,{onClick:()=>I(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm sm:text-base","data-testid":"button-transaction-viewer",children:[a.jsx(HC,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"View Transactions"}),a.jsx("span",{className:"sm:hidden",children:"View"})]}),a.jsxs(ge,{onClick:j,className:"bg-green-600 hover:bg-green-700 text-white text-sm sm:text-base","data-testid":"button-download-csv",children:[a.jsx(uy,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Download All Transactions CSV"}),a.jsx("span",{className:"sm:hidden",children:"Download CSV"})]})]})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs(Pt,{className:"flex items-center",children:[a.jsx(Jr,{className:"h-5 w-5 mr-2 text-blue-600"}),"Today's Oil Delivered (by Oil Type)"]})}),a.jsx($e,{children:a.jsx("div",{className:"space-y-4",children:(()=>{const W=new Date().toDateString(),O=r.filter(ee=>ee.completedTimestamp&&new Date(ee.completedTimestamp).toDateString()===W).reduce((ee,se)=>{const z=se.oilTypeName||"Unknown";return ee[z]=(ee[z]||0)+(se.deliveredLiters||0),ee},{}),H=Object.values(O).reduce((ee,se)=>ee+se,0);return Object.keys(O).length>0?a.jsxs(a.Fragment,{children:[Object.entries(O).map(([ee,se])=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),a.jsx("span",{className:"font-medium",children:ee})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[se.toLocaleString(),"L"]})})]},ee)),a.jsx("div",{className:"border-t pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[a.jsx("span",{children:"Total Today:"}),a.jsxs("span",{className:"text-blue-600",children:[H.toLocaleString(),"L"]})]})})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Jr,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No oil deliveries today"})]})})()})})]}),a.jsxs(ze,{children:[a.jsxs(jt,{children:[a.jsxs(Pt,{className:"flex items-center gap-2",children:[a.jsx(xl,{className:"h-5 w-5"}),"Recent Transactions (Last 10)"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Complete history of loading and supply operations across all drivers"})]}),a.jsx($e,{children:(()=>{const V=[...r.map(O=>({id:O.id,type:"supply",timestamp:O.completedTimestamp||O.createdAt,oilTypeName:O.oilTypeName||"Unknown Oil Type",quantity:O.deliveredLiters??O.loadedLiters??O.quantity??0,driverName:(()=>{const H=l.find(ee=>ee.uid===O.driverUid);return H?H.displayName||H.email:O.driverName||"Unknown Driver"})(),branchName:(()=>{const H=u.find(ee=>ee.id===O.branchId);return H?H.name:O.branchName||"Unknown Branch"})(),photos:{...O.photos||{},...O.tankLevelPhoto&&{tankLevel:O.tankLevelPhoto},...O.hoseConnectionPhoto&&{hoseConnection:O.hoseConnectionPhoto},...O.finalTankLevelPhoto&&{tankLevelAfter:O.finalTankLevelPhoto},...O.meterReadingPhoto&&{meterReading:O.meterReadingPhoto}},...O})),..._.filter(O=>O.type==="loading"||O.type==="supply").map(O=>({id:O.id,type:O.type,timestamp:O.timestamp||O.createdAt,oilTypeName:O.oilTypeName||"Unknown Oil Type",quantity:O.deliveredLiters??O.loadedLiters??O.quantity??0,driverName:(()=>{const H=l.find(ee=>ee.uid===O.driverUid);return H?H.displayName||H.email:O.driverName||"Unknown Driver"})(),branchName:O.type==="supply"?(()=>{const H=u.find(ee=>ee.id===O.branchId);return H?H.name:O.branchName||"Unknown Branch"})():void 0,photos:{...O.photos||{},...O.tankLevelPhoto&&{tankLevel:O.tankLevelPhoto},...O.hoseConnectionPhoto&&{hoseConnection:O.hoseConnectionPhoto},...O.finalTankLevelPhoto&&{tankLevelAfter:O.finalTankLevelPhoto},...O.loadPhoto&&{loadPhoto:O.loadPhoto}},...O}))].sort((O,H)=>{var z,te;const ee=(z=O.timestamp)!=null&&z.toDate?O.timestamp.toDate():new Date(O.timestamp||0);return((te=H.timestamp)!=null&&te.toDate?H.timestamp.toDate():new Date(H.timestamp||0)).getTime()-ee.getTime()}).slice(0,10);return V.length>0?a.jsx("div",{className:"space-y-3",children:V.map((O,H)=>{var ee;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${O.type==="loading"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:O.type==="loading"?"LOADING":"SUPPLY"}),a.jsx("span",{className:"font-medium",children:O.oilTypeName})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O.quantity.toLocaleString(),"L",O.type==="supply"&&O.branchName&&a.jsxs(a.Fragment,{children:[" • Delivered to ",O.branchName]})]}),a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(mr,{className:"h-3 w-3"}),(ee=O.timestamp)!=null&&ee.toDate?O.timestamp.toDate().toLocaleString():"Unknown date"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Driver: ",O.driverName]}),O.type==="supply"&&O.branchName&&a.jsxs("div",{className:"text-xs text-gray-500",children:["Branch: ",O.branchName]})]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{L(O),S(!0)},className:"flex items-center gap-2","data-testid":`button-view-transaction-${H}`,children:[a.jsx(Ln,{className:"h-4 w-4"}),"View"]})]},O.id||H)})}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(xl,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No recent transactions"})]})})()})]})]}),a.jsx(Qn,{value:"drivers",children:a.jsx(jW,{drivers:l,onAddDriver:J,onUpdateDriver:B,onDeleteDriver:K,onToggleDriverStatus:ae})}),a.jsx(Qn,{value:"branches",children:a.jsx(kW,{branches:u,oilTypes:f,onAddBranch:ue,onUpdateBranch:le,onDeleteBranch:Te})}),a.jsx(Qn,{value:"oil-types",children:a.jsx(RW,{oilTypes:f,onAddOilType:ye,onUpdateOilType:de,onDeleteOilType:Ee})}),a.jsx(Qn,{value:"tasks",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Task Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage daily operational tasks"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Pa,{to:"/task-management",children:a.jsxs(ge,{variant:"outline",size:"sm",children:[a.jsx(mr,{className:"w-4 h-4 mr-2"}),"View All Tasks"]})}),a.jsx(Pa,{to:"/complaint-management",children:a.jsxs(ge,{variant:"outline",size:"sm",children:[a.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Complaints"]})}),a.jsx(oj,{onAdd:Ne,drivers:l})]})]}),a.jsx(wa,{tasks:g.slice(0,5),onUpdate:Ie,onDelete:Re,drivers:l}),g.length>5&&a.jsx("div",{className:"text-center pt-4 border-t",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Pa,{to:"/task-management",children:a.jsxs(ge,{variant:"ghost",size:"sm",className:"flex-1",children:["View all ",g.length," tasks →"]})}),a.jsx(Pa,{to:"/complaint-management",children:a.jsxs(ge,{variant:"ghost",size:"sm",className:"flex-1",children:[a.jsx(Ui,{className:"h-4 w-4 mr-1"}),"Complaints (",$,")"]})})]})})]})}),a.jsx(Qn,{value:"settings",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"System Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage system preferences and data"})]}),a.jsx(GW,{storageUsage:m,onDeleteRecords:Be})]})})]})}),a.jsx(Qt,{open:T,onOpenChange:S,children:a.jsxs(Bt,{className:"max-w-2xl",children:[a.jsx(_n,{children:"Transaction Details"}),a.jsx(Ar,{children:"View detailed information about this transaction including photos and metadata"}),C&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:C.type==="loading"?"Oil Loading Transaction":"Oil Supply Transaction"}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[a.jsx("strong",{children:"Date & Time:"})," ",(re=C.timestamp)!=null&&re.toDate?C.timestamp.toDate().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):C.createdAt?new Date(C.createdAt).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown date"]})]}),a.jsx(Ft,{variant:C.type==="loading"?"default":"secondary",className:"text-lg px-3 py-1",children:C.type==="loading"?"Loading":"Supply"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),a.jsx("p",{className:`font-medium ${C.type==="loading"?"text-blue-600":"text-orange-600"}`,children:C.type==="loading"?"Oil Loading":"Oil Supply"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),a.jsx("p",{className:"font-medium",children:(()=>{const W=f.find(V=>V.id===C.oilTypeId);return W?`${W.name} - ${W.viscosity}`:C.oilTypeName||"Unknown Oil Type"})()})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),a.jsxs("p",{className:"font-medium",children:[(C.deliveredLiters||C.loadedLiters||C.quantity||0).toLocaleString(),"L"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driver"}),a.jsx("p",{className:"font-medium",children:(()=>{const W=l.find(V=>V.uid===C.driverUid||V.id===C.driverUid);return W?W.displayName||W.email:C.driverName||C.driverUid||"Unknown Driver"})()})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),a.jsx("p",{className:"font-medium",children:(()=>{const W=u.find(V=>V.id===C.branchId);return W?W.name:C.branchName||"Unknown Branch"})()})]}),C.deliveryOrderId&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Delivery Order"}),a.jsx("p",{className:"font-medium",children:C.deliveryOrderId})]}),(C.startMeterReading||C.endMeterReading)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Start Meter"}),a.jsx("p",{className:"font-medium",children:C.startMeterReading||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"End Meter"}),a.jsx("p",{className:"font-medium",children:C.endMeterReading||"N/A"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),a.jsx("p",{className:"font-medium text-green-600",children:C.status||"Completed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Session ID"}),a.jsx("p",{className:"font-medium text-xs text-gray-500",children:C.loadSessionId||C.id||"N/A"})]})]}),C.photos&&Object.keys(C.photos).length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(C.photos).map(([W,V])=>V&&a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{k({url:V,label:W.replace(/([A-Z])/g," $1").trim()}),R(!0)},children:[a.jsx("img",{src:V,alt:W,className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:W.replace(/([A-Z])/g," $1").trim()})]},W))})]})]})]})}),a.jsx(Qt,{open:M,onOpenChange:R,children:a.jsxs(Bt,{className:"max-w-4xl w-full h-[90vh] p-0",children:[a.jsx(_n,{className:"sr-only",children:"Photo Viewer"}),a.jsxs(Ar,{className:"sr-only",children:["Full size view of ",(P==null?void 0:P.label)||"delivery photo"]}),P&&a.jsxs("div",{className:"relative w-full h-full bg-black rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:P.label}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ge,{variant:"ghost",size:"sm",onClick:()=>{const W=document.createElement("a");W.href=P.url,W.download=`${P.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,W.click()},className:"text-white hover:bg-white/20",children:[a.jsx(Yh,{className:"h-4 w-4 mr-1"}),"Download"]}),a.jsx(ge,{variant:"ghost",size:"sm",onClick:()=>R(!1),className:"text-white hover:bg-white/20",children:a.jsx(ea,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:a.jsx("img",{src:P.url,alt:P.label,className:"max-w-full max-h-full object-contain",style:{maxHeight:"calc(100vh - 120px)"}})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-center space-x-4",children:[a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>window.open(P.url,"_blank"),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[a.jsx(Ln,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),a.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{const W=document.createElement("a");W.href=P.url,W.download=`${P.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,W.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[a.jsx(Yh,{className:"h-4 w-4 mr-1"}),"Download Photo"]})]})]})]})}),D&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4",children:a.jsx("div",{className:"w-full max-w-7xl max-h-[95vh] sm:max-h-[90vh] overflow-auto bg-white rounded-lg p-3 sm:p-6",children:a.jsx(IW,{onClose:()=>I(!1)})})})]})}function QW(){const[t,e]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState("all"),{toast:c}=Hn(),{userData:u}=Ji(),h=async()=>{try{i(!0);const[N,C]=await Promise.all([LA(),Np()]);e(N),r(C.filter(L=>L.role==="driver"))}catch(N){console.error("Error loading data:",N),c({title:"Error",description:"Failed to load tasks and drivers",variant:"destructive"})}finally{i(!1)}};E.useEffect(()=>{h()},[]);const f=async N=>{try{await ww(N),await h(),c({title:"Success",description:"Task created successfully"})}catch(C){console.error("Error creating task:",C),c({title:"Error",description:"Failed to create task",variant:"destructive"})}},p=async(N,C)=>{try{await MA(N,C),await h(),c({title:"Success",description:"Task updated successfully"})}catch(L){console.error("Error updating task:",L),c({title:"Error",description:"Failed to update task",variant:"destructive"})}},g=async N=>{try{await FA(N),await h(),c({title:"Success",description:"Task deleted successfully"})}catch(C){console.error("Error deleting task:",C),c({title:"Error",description:"Failed to delete task",variant:"destructive"})}},y=N=>!N||N==="all"?t:t.filter(C=>C.status===N),m=()=>{const N=new Date;N.setHours(0,0,0,0);const C=new Date(N);return C.setDate(C.getDate()+1),t.filter(L=>{const T=new Date(L.dueDate);return T.setHours(0,0,0,0),T>=N&&T<C})},x=()=>{const N=new Date;return N.setHours(23,59,59,999),t.filter(C=>new Date(C.dueDate)<N&&C.status!=="completed")},v=y("pending"),w=m(),_=x();return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:a.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),a.jsxs("div",{className:"text-white",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold",children:"OILDELIVERY"}),a.jsx("p",{className:"text-xs sm:text-sm text-blue-100",children:"Task Management"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pa,{to:"/admin-dashboard",children:a.jsxs(ge,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:[a.jsx($C,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Back to Dashboard"})]})}),a.jsxs("div",{className:"text-white text-right",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium",children:u==null?void 0:u.displayName}),a.jsx("p",{className:"text-xs text-blue-100 capitalize",children:u==null?void 0:u.role})]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(xl,{className:"h-8 w-8 text-yellow-600"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mr,{className:"h-8 w-8 text-blue-600"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.length})]})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ui,{className:"h-8 w-8 text-red-600"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})})}),a.jsx(ze,{children:a.jsx($e,{className:"p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ax,{className:"h-8 w-8 text-green-600"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})})})]}),a.jsxs(ze,{children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx(Pt,{children:"Task Management"}),a.jsx(Ex,{children:"Create and manage daily operational tasks"})]}),a.jsx(oj,{onAdd:f,drivers:n})]})}),a.jsx($e,{children:a.jsxs(Lw,{value:o,onValueChange:l,children:[a.jsxs(Lp,{className:"grid w-full grid-cols-5",children:[a.jsx(an,{value:"all",children:"All Tasks"}),a.jsx(an,{value:"pending",children:"Pending"}),a.jsx(an,{value:"today",children:"Today"}),a.jsx(an,{value:"overdue",children:"Overdue"}),a.jsx(an,{value:"completed",children:"Completed"})]}),a.jsx(Qn,{value:"all",className:"mt-6",children:a.jsx(wa,{tasks:y("all"),onUpdate:p,onDelete:g,drivers:n})}),a.jsx(Qn,{value:"pending",className:"mt-6",children:a.jsx(wa,{tasks:v,onUpdate:p,onDelete:g,drivers:n})}),a.jsx(Qn,{value:"today",className:"mt-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx(mr,{className:"h-5 w-5 text-blue-600"}),a.jsxs("h3",{className:"font-semibold text-blue-900",children:["Today's Deadline (",w.length," tasks)"]})]}),a.jsx(wa,{tasks:w,onUpdate:p,onDelete:g,drivers:n})]})}),a.jsx(Qn,{value:"overdue",className:"mt-6",children:a.jsxs("div",{className:"space-y-4",children:[_.length>0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[a.jsx(Ui,{className:"h-5 w-5 text-red-600"}),a.jsxs("h3",{className:"font-semibold text-red-900",children:["Overdue Tasks (",_.length,")"]})]}),a.jsx(wa,{tasks:_,onUpdate:p,onDelete:g,drivers:n})]})}),a.jsx(Qn,{value:"completed",className:"mt-6",children:a.jsx(wa,{tasks:y("completed"),onUpdate:p,onDelete:g,drivers:n})})]})})]})]})]})}function YW(){var Z,me;const[t,e]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(!0),[h,f]=E.useState("all"),[p,g]=E.useState(null),[y,m]=E.useState(!1),[x,v]=E.useState(!1),[w,_]=E.useState(!1),[N,C]=E.useState(""),[L,T]=E.useState(!1),[S,P]=E.useState([]),k=E.useRef(null),M=E.useRef(null),{toast:R}=Hn(),{userData:D}=Ji(),[I,q]=E.useState({title:"",description:"",category:"other",priority:"medium",branchId:"",oilTypeId:"",location:"",photos:[]}),[oe,Y]=E.useState(""),[U,$]=E.useState(""),[J,B]=E.useState(!1),[K,ae]=E.useState(""),[ue,le]=E.useState(""),[Te,ye]=E.useState(!1),[de,Ee]=E.useState({});E.useEffect(()=>{Ne()},[]);const Ne=async()=>{try{u(!0);const[G,he,Ve,yt]=await Promise.all([jA(),DA(),OA(),Np()]);e(G),r(he),i(Ve),l(yt)}catch(G){console.error("Error loading data:",G),R({title:"Error",description:"Failed to load complaint data",variant:"destructive"})}finally{u(!1)}},Ie=async()=>{try{T(!0);const G=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});k.current&&(k.current.srcObject=G,k.current.play())}catch(G){console.error("Error starting camera:",G),R({title:"Camera Error",description:"Unable to access camera",variant:"destructive"}),T(!1)}},Re=()=>{if(k.current&&M.current){const G=M.current,he=k.current,Ve=G.getContext("2d");if(G.width=he.videoWidth,G.height=he.videoHeight,Ve){Ve.drawImage(he,0,0),j(Ve,G.width,G.height);const yt=G.toDataURL("image/jpeg",.8);P(ft=>[...ft,yt]),q(ft=>({...ft,photos:[...ft.photos,yt]})),R({title:"Photo Captured",description:"Photo captured with watermark successfully"})}}},Be=G=>{const he=G.target.files;he&&(Array.from(he).forEach(Ve=>{if(Ve.type.startsWith("image/")){const yt=new FileReader;yt.onload=ft=>{var ot;const pt=new Image;pt.onload=()=>{const jn=document.createElement("canvas"),wr=jn.getContext("2d");if(jn.width=pt.width,jn.height=pt.height,wr){wr.drawImage(pt,0,0),j(wr,jn.width,jn.height);const Pn=jn.toDataURL("image/jpeg",.8);P(fs=>[...fs,Pn]),q(fs=>({...fs,photos:[...fs.photos,Pn]})),R({title:"Photo Uploaded",description:"Photo uploaded with watermark successfully"})}},pt.src=(ot=ft.target)==null?void 0:ot.result},yt.readAsDataURL(Ve)}}),G.target.value="")},j=(G,he,Ve)=>{const ft=new Date().toLocaleString(),pt="OILDELIVERY SYSTEM",ot=(D==null?void 0:D.displayName)||(D==null?void 0:D.email)||"Unknown User";G.fillStyle="rgba(0, 0, 0, 0.7)",G.fillRect(10,Ve-120,he-20,100),G.fillStyle="white",G.font="bold 16px Arial",G.fillText("Complaint Evidence",20,Ve-90),G.fillText(`Time: ${ft}`,20,Ve-70),G.fillText(`Reporter: ${ot}`,20,Ve-50),G.fillText(`System: ${pt}`,20,Ve-30),G.strokeStyle="red",G.lineWidth=3,G.strokeRect(5,5,he-10,Ve-10)},re=()=>{k.current&&k.current.srcObject&&(k.current.srcObject.getTracks().forEach(he=>he.stop()),k.current.srcObject=null),T(!1)},W=async()=>{var G,he;try{if(!I.title||!I.description){R({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Ve={...I,reportedBy:(D==null?void 0:D.uid)||"",reporterName:(D==null?void 0:D.displayName)||(D==null?void 0:D.email)||"Unknown",status:"open",createdAt:new Date,updatedAt:new Date,watermarkedPhotos:S,branchName:((G=n.find(pt=>pt.id===I.branchId))==null?void 0:G.name)||"",oilTypeName:((he=s.find(pt=>pt.id===I.oilTypeId))==null?void 0:he.name)||""},yt=await PA(Ve),ft={title:`Complaint: ${I.title}`,description:`Priority: ${I.priority.toUpperCase()} - ${I.description}`,priority:I.priority,dueDate:new Date(Date.now()+(I.priority==="critical"?2:I.priority==="high"?4:7)*24*60*60*1e3),assignedTo:"",status:"pending"};await ww(ft),R({title:"Complaint Submitted",description:"Complaint has been submitted and added to task manager"}),v(!1),se(),Ne()}catch(Ve){console.error("Error submitting complaint:",Ve),R({title:"Error",description:"Failed to submit complaint",variant:"destructive"})}},V=async G=>{try{if(!K){R({title:"Validation Error",description:"Please provide resolution details",variant:"destructive"});return}await o1(G,{status:"resolved",resolution:K,resolvedAt:new Date,updatedAt:new Date}),R({title:"Complaint Resolved",description:"Complaint has been marked as resolved"}),m(!1),ae(""),Ne()}catch(he){console.error("Error resolving complaint:",he),R({title:"Error",description:"Failed to resolve complaint",variant:"destructive"})}},O=G=>{Ee({id:G.id,title:G.title,description:G.description,category:G.category,priority:G.priority,status:G.status,assignedTo:G.assignedTo,branchId:G.branchId,oilTypeId:G.oilTypeId}),ye(!0)},H=async()=>{try{if(!de.id)return;if(await o1(de.id,{title:de.title,description:de.description,category:de.category,priority:de.priority,status:de.status,assignedTo:de.assignedTo,branchId:de.branchId,oilTypeId:de.oilTypeId,updatedAt:new Date}),R({title:"Complaint Updated",description:"Complaint has been successfully updated"}),ye(!1),Ee({}),Ne(),(p==null?void 0:p.id)===de.id){const G=t.find(he=>he.id===de.id);G&&g({...G,...de})}}catch(G){console.error("Error updating complaint:",G),R({title:"Error",description:"Failed to update complaint",variant:"destructive"})}},ee=()=>{ye(!1),Ee({})},se=()=>{q({title:"",description:"",category:"other",priority:"medium",branchId:"",oilTypeId:"",location:"",photos:[]}),P([]),Y(""),$(""),B(!1),re()},z=t.filter(G=>h==="all"?!0:G.status===h),te=G=>{switch(G){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},pe=G=>{switch(G){case"open":return"bg-red-100 text-red-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return c?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{children:"Loading complaint data..."})]})}):a.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Pa,{href:"/admin-dashboard",children:a.jsxs(ge,{variant:"outline",size:"sm",children:[a.jsx($C,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Complaint Management"}),a.jsx("p",{className:"text-gray-600",children:"Track and resolve complaints with photo evidence"})]})]}),a.jsxs(Qt,{open:x,onOpenChange:v,children:[a.jsx(Gu,{asChild:!0,children:a.jsxs(ge,{onClick:()=>v(!0),children:[a.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Report Complaint"]})}),a.jsxs(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(gr,{children:[a.jsx(_n,{children:"Report New Complaint"}),a.jsx(Ar,{children:"Submit a complaint with photo evidence and watermarks"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"title",children:"Complaint Title *"}),a.jsx(et,{id:"title",value:I.title,onChange:G=>q(he=>({...he,title:G.target.value})),placeholder:"Brief description of the issue"})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"description",children:"Description *"}),a.jsx(Qa,{id:"description",value:I.description,onChange:G=>q(he=>({...he,description:G.target.value})),placeholder:"Detailed description of the complaint",rows:4})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{children:"Category"}),a.jsxs(dt,{value:I.category,onValueChange:G=>q(he=>({...he,category:G})),children:[a.jsx(lt,{children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"equipment",children:"Equipment"}),a.jsx(we,{value:"delivery",children:"Delivery"}),a.jsx(we,{value:"safety",children:"Safety"}),a.jsx(we,{value:"customer",children:"Customer"}),a.jsx(we,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Priority"}),a.jsxs(dt,{value:I.priority,onValueChange:G=>q(he=>({...he,priority:G})),children:[a.jsx(lt,{children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"low",children:"Low"}),a.jsx(we,{value:"medium",children:"Medium"}),a.jsx(we,{value:"high",children:"High"}),a.jsx(we,{value:"critical",children:"Critical"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{children:"Branch (Optional)"}),a.jsxs(dt,{value:I.branchId,onValueChange:G=>q(he=>({...he,branchId:G})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select branch"})}),a.jsx(ct,{children:n.map(G=>a.jsx(we,{value:G.id,children:G.name},G.id))})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Oil Type (Optional)"}),a.jsxs(dt,{value:I.oilTypeId,onValueChange:G=>q(he=>({...he,oilTypeId:G})),children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select oil type"})}),a.jsx(ct,{children:s.map(G=>a.jsx(we,{value:G.id,children:G.name},G.id))})]})]})]}),a.jsxs("div",{children:[a.jsx(ve,{children:"Location"}),a.jsxs(dt,{value:J?"custom":oe,onValueChange:G=>{G==="custom"?(B(!0),Y("")):(B(!1),Y(G),q(he=>({...he,location:G})))},children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select location or enter custom"})}),a.jsxs(ct,{children:[n.map(G=>a.jsx(we,{value:G.name,children:G.name},G.id)),a.jsx(we,{value:"custom",children:"Enter Custom Location"})]})]}),J&&a.jsx("div",{className:"mt-2",children:a.jsx(et,{value:U,onChange:G=>{$(G.target.value),q(he=>({...he,location:G.target.value}))},placeholder:"Enter custom location"})})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(ge,{variant:"outline",onClick:()=>{v(!1),se()},children:"Cancel"}),a.jsx(ge,{onClick:W,children:"Submit Complaint"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{children:"Photo Evidence"}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:L?a.jsxs("div",{className:"space-y-4",children:[a.jsx("video",{ref:k,className:"w-full h-48 bg-black rounded",autoPlay:!0,playsInline:!0}),a.jsx("canvas",{ref:M,style:{display:"none"}}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsxs(ge,{onClick:Re,children:[a.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Capture Photo"]}),a.jsx(ge,{variant:"outline",onClick:re,children:"Stop Camera"})]})]}):a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(Pc,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(ge,{onClick:Ie,children:[a.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Take Photo"]}),a.jsxs(ge,{variant:"outline",onClick:()=>{var G;return(G=document.getElementById("photo-upload"))==null?void 0:G.click()},children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Upload Photo"]})]}),a.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:Be}),a.jsx("p",{className:"text-sm text-gray-500",children:"Photos will be automatically watermarked with timestamp and user info"})]})})]}),S.length>0&&a.jsxs("div",{children:[a.jsxs(ve,{children:["Captured Photos (",S.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:S.map((G,he)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:G,alt:`Captured ${he+1}`,className:"w-full h-24 object-cover rounded border cursor-pointer",onClick:()=>{C(G),_(!0)}}),a.jsx(Ft,{className:"absolute top-1 right-1 text-xs",children:"Watermarked"})]},he))})]})]})]})]})]})]}),a.jsxs(Lw,{value:h,onValueChange:f,className:"w-full",children:[a.jsxs(Lp,{className:"grid w-full grid-cols-5",children:[a.jsx(an,{value:"all",children:"All Complaints"}),a.jsx(an,{value:"open",children:"Open"}),a.jsx(an,{value:"in-progress",children:"In Progress"}),a.jsx(an,{value:"resolved",children:"Resolved"}),a.jsx(an,{value:"closed",children:"Closed"})]}),a.jsx(Qn,{value:h,className:"space-y-4",children:z.length===0?a.jsx(ze,{className:"text-center py-12",children:a.jsxs($e,{children:[a.jsx(Ui,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No complaints found"}),a.jsx("p",{className:"text-gray-500",children:h==="all"?"No complaints have been reported yet":`No ${h} complaints found`})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(G=>a.jsxs(ze,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(Pt,{className:"text-lg",children:G.title}),a.jsxs(Ex,{className:"mt-1",children:["Reported by ",G.reporterName]})]}),a.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[a.jsx(Ft,{className:te(G.priority),children:G.priority}),a.jsx(Ft,{className:pe(G.status),children:G.status})]})]})}),a.jsx($e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:G.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mr,{className:"h-3 w-3"}),G.createdAt.toLocaleDateString()]}),G.photos.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ou,{className:"h-3 w-3"}),G.photos.length," photos"]})]}),G.branchName&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[a.jsx(au,{className:"h-3 w-3"}),G.branchName]}),G.oilTypeName&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[a.jsx(Jr,{className:"h-3 w-3"}),G.oilTypeName]}),a.jsxs(ge,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{g(G),m(!0)},children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),"View Details"]})]})})]},G.id))})})]}),a.jsx(Qt,{open:y,onOpenChange:m,children:a.jsx(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:p&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(gr,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[Te&&de.id===p.id?a.jsx(et,{value:de.title||"",onChange:G=>Ee(he=>({...he,title:G.target.value})),className:"text-xl font-semibold"}):a.jsx(_n,{className:"text-xl",children:p.title}),a.jsxs(Ar,{children:["Complaint #",p.id," • Reported by ",p.reporterName]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[Te&&de.id===p.id?a.jsxs(a.Fragment,{children:[a.jsxs(ge,{size:"sm",onClick:H,children:[a.jsx(K4,{className:"h-4 w-4 mr-2"}),"Save"]}),a.jsxs(ge,{size:"sm",variant:"outline",onClick:ee,children:[a.jsx(ea,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):a.jsxs(ge,{size:"sm",variant:"outline",onClick:()=>O(p),children:[a.jsx(Kf,{className:"h-4 w-4 mr-2"}),"Edit"]}),a.jsx(Ft,{className:te(p.priority),children:p.priority}),a.jsx(Ft,{className:pe(p.status),children:p.status})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Description"}),Te&&de.id===p.id?a.jsx(Qa,{value:de.description||"",onChange:G=>Ee(he=>({...he,description:G.target.value})),rows:4,className:"mt-1"}):a.jsx("p",{className:"mt-1",children:p.description})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Category"}),Te&&de.id===p.id?a.jsxs(dt,{value:de.category||p.category,onValueChange:G=>Ee(he=>({...he,category:G})),children:[a.jsx(lt,{className:"mt-1",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"equipment",children:"Equipment"}),a.jsx(we,{value:"delivery",children:"Delivery"}),a.jsx(we,{value:"safety",children:"Safety"}),a.jsx(we,{value:"customer",children:"Customer"}),a.jsx(we,{value:"other",children:"Other"})]})]}):a.jsx("p",{className:"mt-1 capitalize",children:p.category})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Priority"}),Te&&de.id===p.id?a.jsxs(dt,{value:de.priority||p.priority,onValueChange:G=>Ee(he=>({...he,priority:G})),children:[a.jsx(lt,{className:"mt-1",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"low",children:"Low"}),a.jsx(we,{value:"medium",children:"Medium"}),a.jsx(we,{value:"high",children:"High"}),a.jsx(we,{value:"critical",children:"Critical"})]})]}):a.jsx("p",{className:"mt-1 capitalize",children:p.priority})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Status"}),Te&&de.id===p.id?a.jsxs(dt,{value:de.status||p.status,onValueChange:G=>Ee(he=>({...he,status:G})),children:[a.jsx(lt,{className:"mt-1",children:a.jsx(ht,{})}),a.jsxs(ct,{children:[a.jsx(we,{value:"open",children:"Open"}),a.jsx(we,{value:"in-progress",children:"In Progress"}),a.jsx(we,{value:"resolved",children:"Resolved"}),a.jsx(we,{value:"closed",children:"Closed"})]})]}):a.jsx("p",{className:"mt-1 capitalize",children:p.status.replace("-"," ")})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Reporter"}),a.jsx("p",{className:"mt-1",children:p.reporterName})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Created"}),a.jsx("p",{className:"mt-1",children:p.createdAt.toLocaleString()})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),a.jsx("p",{className:"mt-1",children:p.updatedAt.toLocaleString()})]})]}),p.branchName&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Branch"}),a.jsx("p",{className:"mt-1",children:p.branchName})]}),p.oilTypeName&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),a.jsx("p",{className:"mt-1",children:p.oilTypeName})]}),p.location&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Location"}),a.jsx("p",{className:"mt-1",children:p.location})]}),p.status!=="resolved"&&p.status!=="closed"&&a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsx("h4",{className:"font-medium",children:"Resolve Complaint"}),a.jsxs("div",{children:[a.jsx(ve,{children:"Assign To"}),a.jsxs(dt,{value:ue,onValueChange:le,children:[a.jsx(lt,{children:a.jsx(ht,{placeholder:"Select user"})}),a.jsx(ct,{children:o.filter(G=>G.role==="admin"||G.role==="manager").map(G=>a.jsx(we,{value:G.uid,children:G.displayName||G.email},G.uid))})]})]}),a.jsxs("div",{children:[a.jsx(ve,{htmlFor:"resolution",children:"Resolution"}),a.jsx(Qa,{id:"resolution",value:K,onChange:G=>ae(G.target.value),placeholder:"Describe how this complaint was resolved",rows:3})]}),a.jsxs(ge,{onClick:()=>V(p.id),className:"w-full",children:[a.jsx(ax,{className:"h-4 w-4 mr-2"}),"Mark as Resolved"]})]}),p.resolution&&a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx(ve,{className:"text-sm font-medium text-gray-600",children:"Resolution"}),a.jsx("p",{className:"mt-1",children:p.resolution}),p.resolvedAt&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Resolved on ",p.resolvedAt.toLocaleString()]})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsxs(ve,{className:"text-sm font-medium text-gray-600",children:["Photo Evidence (",((Z=p.watermarkedPhotos)==null?void 0:Z.length)||p.photos.length,")"]}),((me=p.watermarkedPhotos)==null?void 0:me.length)>0||p.photos.length>0?a.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:(p.watermarkedPhotos||p.photos).map((G,he)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:G,alt:`Evidence ${he+1}`,className:"w-full h-32 object-cover rounded border cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{C(G),_(!0)}}),p.watermarkedPhotos&&a.jsx(Ft,{className:"absolute top-1 right-1 text-xs",children:"Watermarked"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:a.jsx(Ln,{className:"h-4 w-4 text-white opacity-0 hover:opacity-100 transition-opacity"})})]},he))}):a.jsx("p",{className:"text-gray-500 mt-2",children:"No photos attached"})]})})]})]})})}),a.jsx(Qt,{open:w,onOpenChange:_,children:a.jsx(Bt,{className:"max-w-4xl",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:N,alt:"Full size evidence",className:"max-w-full max-h-[80vh] object-contain"})})})})]})}function XW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(ze,{className:"w-full max-w-md mx-4",children:a.jsxs($e,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(ch,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function ZW(){const{userData:t,isLoading:e}=Ji();return e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:a.jsxs("div",{className:"text-white text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{children:"Loading..."})]})}):t?a.jsxs(sL,{children:[t.role==="admin"?a.jsxs(a.Fragment,{children:[a.jsx(Xs,{path:"/",component:()=>a.jsx(_1,{user:t})}),a.jsx(Xs,{path:"/admin-dashboard",component:()=>a.jsx(_1,{user:t})}),a.jsx(Xs,{path:"/task-management",component:()=>a.jsx(QW,{})}),a.jsx(Xs,{path:"/complaint-management",component:()=>a.jsx(YW,{})})]}):t.role==="driver"?a.jsxs(a.Fragment,{children:[a.jsx(Xs,{path:"/",component:()=>a.jsx(x1,{user:t})}),a.jsx(Xs,{path:"/driver-dashboard",component:()=>a.jsx(x1,{user:t})})]}):a.jsx(Xs,{path:"/",component:c$}),a.jsx(Xs,{component:XW})]}):a.jsx(r$,{})}function JW(){return a.jsx(NL,{client:zL,children:a.jsxs(p3,{children:[a.jsx(kM,{}),a.jsx(ZW,{})]})})}try{console.log("Starting OILDELIVERY app initialization...");const t=document.getElementById("root");if(!t)throw new Error("Root element not found");console.log("Root element found, creating React app..."),$S(t).render(a.jsx(JW,{})),console.log("React app rendered successfully")}catch(t){console.error("App initialization failed:",t),document.body.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: linear-gradient(to bottom right, #f59e0b, #ea580c);
      font-family: system-ui, -apple-system, sans-serif;
    ">
      <div style="
        background: white; 
        padding: 2rem; 
        border-radius: 0.5rem; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
        max-width: 400px;
      ">
        <h1 style="color: #dc2626; margin: 0 0 1rem 0;">OILDELIVERY</h1>
        <p style="color: #374151; margin: 0 0 1rem 0;">
          App is loading... If this persists, please contact support.
        </p>
        <p style="color: #6b7280; font-size: 0.875rem; margin: 0;">
          Error: ${t.message}
        </p>
      </div>
    </div>
  `}
